import{r as j,E as U,A as k,a as d,c as V,w as a,b as s,u as m,Z as $,d as e,e as o,t as n,n as A,g as u,h as f,j as z,f as E,k as h,v as N,x as M,F as H,p as X,O as C}from"./app-DA0EYa_6.js";import{I as L}from"./IconDatabaseOff-DfZH0otJ.js";import{I as Z}from"./IconFilter-f3eGT3XC.js";import{I as q}from"./IconHistory-Dellx8F8.js";import{I as G}from"./IconPrinter-DN1-CNQQ.js";import{I as J}from"./IconReceipt-DjQT6mN-.js";import{I as K}from"./IconSearch-hVNvfgeb.js";import{I as Q}from"./IconX-JXYWA-GE.js";import{_ as W}from"./DashboardLayout-DqHF1oae.js";import{_ as x,a as p}from"./TableTh-CVR3I-fd.js";import{_ as Y}from"./Pagination-B8BHcZ6z.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconShoppingCart-qle56F5S.js";import"./IconChevronRight-QKrPJlsB.js";const tt={class:"space-y-6"},et={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},st={class:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2"},rt={class:"text-sm text-slate-500 dark:text-slate-400"},at={class:"flex gap-2"},lt={key:0,class:"w-2 h-2 rounded-full bg-primary-500"},ot={key:0,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 animate-slide-up"},it={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},dt={class:"flex items-end gap-2"},nt={type:"submit",class:"flex-1 h-11 inline-flex items-center justify-center gap-2 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors"},ut={key:1,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},mt={class:"overflow-x-auto"},xt={class:"w-full"},pt={class:"border-b border-slate-100 dark:border-slate-800"},ft={class:"divide-y divide-slate-100 dark:divide-slate-800"},bt={class:"text-sm font-semibold text-slate-900 dark:text-white"},ct={class:"px-2 py-1 text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 rounded-md"},gt={class:"px-2 py-1 text-xs font-medium bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400 rounded-full"},kt={key:0},vt={key:0,class:"text-xs ml-1"},yt={key:1},_t={key:2,class:"text-slate-400"},ht={key:2,class:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},wt={class:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4"},It={class:"text-sm text-slate-500 dark:text-slate-400"},Mt={__name:"History",props:{transactions:Object,filters:Object},setup(T){const b=T,v={invoice:"",start_date:"",end_date:"",type:""},i=j({...v,...b.filters}),c=j(!1);U(()=>b.filters,l=>{i.value={...v,...l}},{immediate:!0});const y=k(()=>i.value.invoice||i.value.start_date||i.value.end_date||i.value.type),w=k(()=>{var l;return((l=b.transactions)==null?void 0:l.data)??[]}),I=k(()=>{var l;return((l=b.transactions)==null?void 0:l.links)??[]}),D=k(()=>{var l;return((l=b.transactions)==null?void 0:l.current_page)??1}),B=k(()=>{var l,t;return(l=b.transactions)!=null&&l.per_page?Number((t=b.transactions)==null?void 0:t.per_page):w.value.length||1}),P=()=>{C.get(_("transactions.history"),i.value,{preserveScroll:!0,preserveState:!0}),c.value=!1},O=()=>{i.value=v,C.get(_("transactions.history"),v,{preserveScroll:!0,preserveState:!0,replace:!0})},g=(l=0)=>{const t=Number(l)||0;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},_=(l,t)=>typeof window<"u"&&window.route?window.route(l,t):"#";return(l,t)=>(d(),V(W,null,{default:a(()=>{var F;return[s(m($),{title:"Riwayat Transaksi"}),e("div",tt,[e("div",et,[e("div",null,[e("h1",st,[s(m(q),{size:28,class:"text-primary-500"}),t[5]||(t[5]=o(" Riwayat Transaksi ",-1))]),e("p",rt,n(((F=T.transactions)==null?void 0:F.total)||0)+" transaksi tercatat ",1)]),e("div",at,[e("button",{onClick:t[0]||(t[0]=r=>c.value=!c.value),class:A(["inline-flex items-center gap-2 px-4 py-2.5 rounded-xl border text-sm font-medium transition-colors",c.value||y.value?"bg-primary-50 border-primary-200 text-primary-700 dark:bg-primary-950/50 dark:border-primary-800 dark:text-primary-400":"bg-white border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"])},[s(m(Z),{size:18}),t[6]||(t[6]=e("span",null,"Filter",-1)),y.value?(d(),u("span",lt)):f("",!0)],2),s(m(z),{href:_("transactions.index"),class:"inline-flex items-center gap-2 px-4 py-2.5 rounded-xl bg-primary-500 hover:bg-primary-600 text-white text-sm font-medium transition-colors shadow-lg shadow-primary-500/30"},{default:a(()=>[s(m(J),{size:18}),t[7]||(t[7]=e("span",null,"Transaksi Baru",-1))]),_:1},8,["href"])])]),c.value?(d(),u("div",ot,[e("form",{onSubmit:E(P,["prevent"])},[e("div",it,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Nomor Invoice ",-1)),h(e("input",{type:"text",placeholder:"TRX-...","onUpdate:modelValue":t[1]||(t[1]=r=>i.value.invoice=r),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[N,i.value.invoice]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Tanggal Mulai ",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=r=>i.value.start_date=r),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[N,i.value.start_date]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Tanggal Akhir ",-1)),h(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=r=>i.value.end_date=r),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[N,i.value.end_date]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Tipe Produk ",-1)),h(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>i.value.type=r),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all text-sm font-medium"},[...t[11]||(t[11]=[e("option",{value:""},"Semua",-1),e("option",{value:"product"},"Eceran",-1),e("option",{value:"bundle"},"Bundling",-1)])],512),[[M,i.value.type]])]),e("div",dt,[e("button",nt,[s(m(K),{size:18}),t[13]||(t[13]=e("span",null,"Cari",-1))]),y.value?(d(),u("button",{key:0,type:"button",onClick:O,class:"h-11 px-4 inline-flex items-center justify-center gap-2 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"},[s(m(Q),{size:18})])):f("",!0)])])],32)])):f("",!0),w.value.length>0?(d(),u("div",ut,[e("div",mt,[e("table",xt,[e("thead",null,[e("tr",pt,[s(x,null,{default:a(()=>[...t[14]||(t[14]=[o("No",-1)])]),_:1}),s(x,null,{default:a(()=>[...t[15]||(t[15]=[o("Invoice",-1)])]),_:1}),s(x,null,{default:a(()=>[...t[16]||(t[16]=[o("Tanggal",-1)])]),_:1}),s(x,null,{default:a(()=>[...t[17]||(t[17]=[o("Pelanggan",-1)])]),_:1}),s(x,{class:"text-center"},{default:a(()=>[...t[18]||(t[18]=[o("Item",-1)])]),_:1}),s(x,{class:"text-right"},{default:a(()=>[...t[19]||(t[19]=[o("Subtotal",-1)])]),_:1}),s(x,{class:"text-right"},{default:a(()=>[...t[20]||(t[20]=[o("Diskon",-1)])]),_:1}),s(x,{class:"text-right"},{default:a(()=>[...t[21]||(t[21]=[o("Total",-1)])]),_:1}),s(x,{class:"text-right"},{default:a(()=>[...t[22]||(t[22]=[o("Profit",-1)])]),_:1}),s(x,{class:"text-center"})])]),e("tbody",ft,[(d(!0),u(H,null,X(w.value,(r,R)=>(d(),u("tr",{key:r.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[s(p,{class:"text-sm text-slate-600 dark:text-slate-400"},{default:a(()=>[o(n(R+1+(D.value-1)*B.value),1)]),_:2},1024),s(p,null,{default:a(()=>[e("span",bt,n(r.invoice),1)]),_:2},1024),s(p,{class:"text-sm text-slate-600 dark:text-slate-400"},{default:a(()=>[o(n(r.created_at),1)]),_:2},1024),s(p,null,{default:a(()=>{var S;return[e("span",ct,n(((S=r.customer)==null?void 0:S.name)??"Umum"),1)]}),_:2},1024),s(p,{class:"text-center"},{default:a(()=>[e("span",gt,n(r.total_items??0),1)]),_:2},1024),s(p,{class:"text-right text-sm text-slate-600 dark:text-slate-400"},{default:a(()=>[o(n(g(Number(r.grand_total||0)+Number(r.discount||0)+Number(r.event_discount||0))),1)]),_:2},1024),s(p,{class:"text-right text-sm text-danger-600 dark:text-danger-400"},{default:a(()=>[Number(r.discount||0)>0?(d(),u("div",kt,[o(" -"+n(g(Number(r.discount||0)))+" ",1),r.discount_type==="percent"&&r.discount_percent?(d(),u("span",vt," ("+n(r.discount_percent)+"%) ",1)):f("",!0)])):f("",!0),Number(r.event_discount||0)>0?(d(),u("div",yt," -"+n(g(Number(r.event_discount||0)))+" (Event) ",1)):f("",!0),!Number(r.discount||0)&&!Number(r.event_discount||0)?(d(),u("span",_t,"-")):f("",!0)]),_:2},1024),s(p,{class:"text-right text-sm font-semibold text-slate-900 dark:text-white"},{default:a(()=>[o(n(g(Number(r.grand_total||0))),1)]),_:2},1024),s(p,{class:"text-right text-sm font-semibold text-success-600 dark:text-success-400"},{default:a(()=>[o(n(g(Number(r.total_profit||0))),1)]),_:2},1024),s(p,{class:"text-center"},{default:a(()=>[s(m(z),{href:_("transactions.print",r.invoice),class:"inline-flex items-center justify-center w-8 h-8 rounded-lg text-slate-500 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-950/50 transition-colors",title:"Cetak Struk"},{default:a(()=>[s(m(G),{size:18})]),_:1},8,["href"])]),_:2},1024)]))),128))])])])])):(d(),u("div",ht,[e("div",wt,[s(m(L),{size:32,class:"text-slate-400","stroke-width":1.5})]),t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-1"}," Belum Ada Transaksi ",-1)),e("p",It,n(y.value?"Tidak ada transaksi sesuai filter.":"Transaksi akan muncul di sini."),1)])),I.value&&I.value.length>3?(d(),V(Y,{key:3,links:I.value},null,8,["links"])):f("",!0)])]}),_:1}))}};export{Mt as default};
