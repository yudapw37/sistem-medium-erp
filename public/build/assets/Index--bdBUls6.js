import{r as h,T as dt,a as i,c as $,w as l,b as s,u as o,Z as ut,d as e,h as g,n as y,e as n,g as u,k as z,v as P,x as pt,F as B,p as E,t as d,O as v,f as S,J as ct}from"./app-CIYeQ-4j.js";import{I as xt}from"./IconAlertCircle-zvooSIVy.js";import{c as U,g as mt,_ as ft}from"./DashboardLayout-CDE7-Y8V.js";import{a as bt}from"./IconSun-B2kMHmLk.js";import{I as gt}from"./IconCheck-WfpMGL5V.js";import{I as kt}from"./IconDatabaseOff-MG7eloAg.js";import{c as N}from"./createVueComponent-Cyzcg1Tn.js";import{I as vt}from"./IconEdit-CjjI1lSj.js";import{I as K}from"./IconEye-0DdC_4Hy.js";import{I as _t}from"./IconFileSpreadsheet-V28pHaNr.js";import{I as ht}from"./IconReceipt-CzHzcLcH.js";import{I as yt}from"./IconSearch-_c1o4uNe.js";import{I as wt}from"./IconTrash-CUcDdroG.js";import{I as It}from"./IconUser-CjGQ9nH3.js";import{I as Ct}from"./IconX-DHFi-BKV.js";import{_ as w}from"./Button-CxuUSqWK.js";import{_ as Dt}from"./Search-NBeUwUBy.js";import{_ as W}from"./Table-W38pwiux.js";import{_ as q}from"./TableCard-DWxSJUUQ.js";import{_ as H,a as J}from"./TableTbody-B6-z0LtQ.js";import{_ as c,a as p}from"./TableTh-C_S67pHj.js";import{_ as Ft}from"./Pagination-DUsmzl5y.js";import{_ as X}from"./Modal-BK6JeM5l.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconChevronRight-CKLwVeXD.js";/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jt=N("outline","download","Download",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=N("outline","file-import","FileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L=N("outline","upload","Upload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);const $t={class:"mb-6"},zt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},St={class:"mb-6"},Tt={class:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-800 rounded-xl w-fit"},Mt={key:0},Pt={class:"mb-4"},Bt={class:"flex flex-col sm:flex-row gap-4 items-center flex-wrap"},Et={class:"w-full sm:w-64"},Lt={class:"flex items-center gap-2"},Nt={class:"w-full sm:w-48"},At={class:"flex flex-col"},Ot={class:"font-bold text-slate-900 dark:text-white"},Vt={key:0,class:"text-[10px] font-black text-amber-600 dark:text-amber-400 uppercase tracking-tight"},Gt={class:"text-slate-600 dark:text-slate-400"},Rt={class:"flex items-center gap-2"},Ut={class:"text-slate-800 dark:text-slate-200"},Kt={class:"flex items-center gap-2"},Wt={class:"text-slate-600 dark:text-slate-400"},qt={class:"flex flex-col gap-1"},Ht={class:"flex flex-col gap-1"},Jt=["title"],Xt={class:"flex items-center justify-center gap-2"},Zt=["onClick"],Qt=["onClick"],Yt=["onClick","title"],te=["onClick"],ee={key:1,class:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},se={class:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4"},ae={key:1},le={class:"mb-4"},re={class:"flex flex-col sm:flex-row gap-4 items-center justify-between"},oe={class:"w-full sm:w-80"},ne={class:"relative"},ie={class:"flex gap-3"},de=["href"],ue={class:"font-medium text-slate-900 dark:text-white"},pe={class:"text-slate-600 dark:text-slate-400"},ce={class:"text-slate-800 dark:text-slate-200"},xe={class:"text-green-600 font-semibold"},me={class:"flex items-center justify-center gap-1"},fe=["onClick"],be=["onClick"],ge={key:1},ke={class:"flex flex-col items-center"},ve={class:"w-14 h-14 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-3"},_e={class:"p-6"},he={class:"mb-6"},ye={key:0},we={key:1,class:"flex items-center justify-center gap-3"},Ie={class:"text-left"},Ce={class:"font-medium text-slate-900 dark:text-white"},De={class:"text-xs text-slate-500"},Fe={class:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl mb-6"},je={class:"flex gap-3"},$e={class:"flex justify-end gap-3"},ze={class:"p-6"},Se={class:"mb-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl"},Te={class:"grid grid-cols-3 gap-4 text-center"},Me={class:"text-2xl font-bold text-slate-900 dark:text-white"},Pe={class:"text-2xl font-bold text-green-600"},Be={class:"text-2xl font-bold text-red-600"},Ee={class:"max-h-64 overflow-y-auto space-y-2"},Le={class:"mt-6 flex justify-end"},ps={__name:"Index",props:{sales:Object,importLogs:Object,filters:Object},setup(f){var O,V,G;const F=f,_=h("transactions"),A=h(""),I=h(!1),j=h(!1),k=h(null),C=h({errors:[],total_rows:0,success_count:0,failed_count:0}),T=dt({file:null}),x=h({start_date:((O=F.filters)==null?void 0:O.start_date)||"",end_date:((V=F.filters)==null?void 0:V.end_date)||"",approval_status:((G=F.filters)==null?void 0:G.approval_status)||""}),M=()=>{var r;v.get(b("sales.index"),{q:(r=F.filters)==null?void 0:r.q,start_date:x.value.start_date,end_date:x.value.end_date,approval_status:x.value.approval_status},{preserveState:!0,preserveScroll:!0})},Q=()=>{x.value.start_date="",x.value.end_date="",x.value.approval_status="",v.get(b("sales.index"),{},{preserveState:!0})},Y=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),tt=r=>r<1024?r+" B":r<1048576?(r/1024).toFixed(1)+" KB":(r/1048576).toFixed(1)+" MB",et=r=>{switch(r){case"draft":return"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400";case"pending_finance":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"waiting_stock":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"pending_warehouse":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"completed":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"rejected":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-slate-100 text-slate-600"}},st=r=>{switch(r){case"draft":return"Draft";case"pending_finance":return"Pending Finance";case"waiting_stock":return"Menunggu Stok (PO)";case"pending_warehouse":return"Pending Gudang";case"completed":return"Completed";case"rejected":return"Ditolak";default:return r||"Draft"}},b=(r,t)=>typeof window<"u"&&window.route?window.route(r,t):"#",at=r=>{confirm("Finalisasi transaksi? Stok akan dikurangi dan transaksi akan dikunci.")&&v.post(b("sales.finalize",r))},lt=r=>{confirm("Hapus draf transaksi ini?")&&v.delete(b("sales.destroy",r))},rt=r=>{const t=r.target.files[0];t&&(k.value=t)},ot=r=>{const t=r.dataTransfer.files[0];t&&(t.name.endsWith(".xlsx")||t.name.endsWith(".xls"))&&(k.value=t)},nt=()=>{k.value&&(T.file=k.value,v.post(b("sales.import"),{file:k.value},{forceFormData:!0,onSuccess:()=>{I.value=!1,k.value=null}}))},it=async r=>{try{const t=await ct.get(b("sales.import.errors",r));C.value=t.data,j.value=!0}catch(t){console.error("Failed to load errors:",t)}};return(r,t)=>(i(),$(ft,null,{default:l(()=>{var R;return[s(o(ut),{title:"Transaksi (Penjualan)"}),e("div",$t,[e("div",zt,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Transaksi (Penjualan)"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Manajemen transaksi penjualan barang. ")],-1)),_.value==="transactions"?(i(),$(w,{key:0,type:"link",icon:o(U),class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",label:"Transaksi Baru",href:b("sales.create")},null,8,["icon","href"])):g("",!0)])]),e("div",St,[e("div",Tt,[e("button",{onClick:t[0]||(t[0]=a=>_.value="transactions"),class:y(["px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2",_.value==="transactions"?"bg-white dark:bg-slate-900 text-primary-600 dark:text-primary-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"])},[s(o(ht),{size:18}),t[15]||(t[15]=n(" Transaksi ",-1))],2),e("button",{onClick:t[1]||(t[1]=a=>_.value="import"),class:y(["px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2",_.value==="import"?"bg-white dark:bg-slate-900 text-primary-600 dark:text-primary-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"])},[s(o(Z),{size:18}),t[16]||(t[16]=n(" Import Transaksi ",-1))],2)])]),_.value==="transactions"?(i(),u("div",Mt,[e("div",Pt,[e("div",Bt,[e("div",Et,[s(Dt,{url:b("sales.index"),placeholder:"Cari No. Invoice..."},null,8,["url"])]),e("div",Lt,[z(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=a=>x.value.start_date=a),onChange:M,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,544),[[P,x.value.start_date]]),t[17]||(t[17]=e("span",{class:"text-slate-400"},"-",-1)),z(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=a=>x.value.end_date=a),onChange:M,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,544),[[P,x.value.end_date]])]),e("div",Nt,[z(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>x.value.approval_status=a),onChange:M,class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all font-medium"},[...t[18]||(t[18]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"pending_finance"},"Pending Finance",-1),e("option",{value:"waiting_stock"},"Menunggu Stok (PO)",-1),e("option",{value:"pending_warehouse"},"Pending Gudang",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"rejected"},"Ditolak",-1)])],544),[[pt,x.value.approval_status]])]),x.value.start_date||x.value.end_date||x.value.approval_status?(i(),u("button",{key:0,onClick:Q,class:"h-10 px-4 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-all"}," Reset ")):g("",!0)])]),f.sales.data.length>0?(i(),$(q,{key:0,title:"Riwayat Transaksi"},{default:l(()=>[s(W,null,{default:l(()=>[s(H,null,{default:l(()=>[e("tr",null,[s(c,{class:"w-10"},{default:l(()=>[...t[19]||(t[19]=[n("No",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[20]||(t[20]=[n("No. Transaksi",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[21]||(t[21]=[n("Tanggal",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[22]||(t[22]=[n("Customer",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[23]||(t[23]=[n("Gudang",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[24]||(t[24]=[n("Status",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[25]||(t[25]=[n("Approval",-1)])]),_:1}),s(c,{class:"text-right"},{default:l(()=>[...t[26]||(t[26]=[n("Total",-1)])]),_:1}),s(c,{class:"text-center"},{default:l(()=>[...t[27]||(t[27]=[n("Aksi",-1)])]),_:1})])]),_:1}),s(J,null,{default:l(()=>[(i(!0),u(B,null,E(f.sales.data,(a,D)=>(i(),u("tr",{key:a.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[s(p,{class:"text-center"},{default:l(()=>[n(d(++D+(f.sales.current_page-1)*f.sales.per_page),1)]),_:2},1024),s(p,null,{default:l(()=>[e("div",At,[e("span",Ot,d(a.invoice),1),a.is_preorder?(i(),u("span",Vt," Pre-Order ")):g("",!0)])]),_:2},1024),s(p,null,{default:l(()=>[e("span",Gt,d(new Date(a.created_at).toLocaleString("id-ID")),1)]),_:2},1024),s(p,null,{default:l(()=>{var m;return[e("div",Rt,[s(o(It),{size:16,class:"text-slate-400"}),e("span",Ut,d(((m=a.customer)==null?void 0:m.name)||"-"),1)])]}),_:2},1024),s(p,null,{default:l(()=>{var m;return[e("div",Kt,[s(o(bt),{size:16,class:"text-slate-400"}),e("span",Wt,d(((m=a.warehouse)==null?void 0:m.name)||"-"),1)])]}),_:2},1024),s(p,null,{default:l(()=>[e("div",qt,[e("span",{class:y(["px-2 py-1 rounded-full text-xs font-semibold inline-block w-fit",a.status==="finalized"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"])},d(a.status==="finalized"?"Final":"Draft"),3),a.is_preorder?(i(),u("span",{key:0,class:y(["px-2 py-0.5 rounded text-[10px] font-bold inline-block w-fit uppercase tracking-tighter",a.preorder_status==="ready"?"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"])}," PO: "+d(a.preorder_status==="ready"?"SIAP":"PENDING"),3)):g("",!0)])]),_:2},1024),s(p,null,{default:l(()=>[e("div",Ht,[e("span",{class:y(["px-2 py-1 rounded-full text-xs font-semibold inline-block w-fit",et(a.approval_status)])},d(st(a.approval_status)),3),a.rejection_notes?(i(),u("span",{key:0,class:"text-xs text-red-600 dark:text-red-400 max-w-[150px] truncate",title:a.rejection_notes},d(a.rejection_notes),9,Jt)):g("",!0)])]),_:2},1024),s(p,{class:"text-right text-slate-900 dark:text-white font-bold"},{default:l(()=>[n(d(Y(a.grand_total)),1)]),_:2},1024),s(p,null,{default:l(()=>[e("div",Xt,[e("button",{onClick:m=>o(v).visit(b("sales.show",a.id)),class:"p-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 transition-colors",title:"Detail"},[s(o(K),{size:18})],8,Zt),a.approval_status==="draft"||a.approval_status==="rejected"?(i(),u("button",{key:0,onClick:m=>o(v).visit(b("sales.edit",a.id)),class:"p-1.5 rounded-lg hover:bg-amber-50 dark:hover:bg-amber-900/30 text-amber-600 dark:text-amber-400 transition-colors",title:"Edit"},[s(o(vt),{size:18})],8,Qt)):g("",!0),a.approval_status==="draft"||a.approval_status==="rejected"?(i(),u("button",{key:1,onClick:m=>at(a.id),class:"p-1.5 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/30 text-green-600 dark:text-green-400 transition-colors",title:a.approval_status==="rejected"?"Re-submit":"Finalize"},[s(o(gt),{size:18})],8,Yt)):g("",!0),a.approval_status==="draft"?(i(),u("button",{key:2,onClick:m=>lt(a.id),class:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors",title:"Hapus"},[s(o(wt),{size:18})],8,te)):g("",!0)])]),_:2},1024)]))),128))]),_:1})]),_:1})]),_:1})):(i(),u("div",ee,[e("div",se,[s(o(kt),{size:32,class:"text-slate-400","stroke-width":1.5})]),t[28]||(t[28]=e("h3",{class:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-1"}," Belum Ada Transaksi ",-1)),t[29]||(t[29]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"}," Lakukan transaksi penjualan pertama Anda. ",-1)),s(w,{type:"link",icon:o(U),class:"bg-primary-500 hover:bg-primary-600 text-white",label:"Transaksi Baru",href:b("sales.create")},null,8,["icon","href"])])),(R=f.sales)!=null&&R.links&&f.sales.links.length>3?(i(),$(Ft,{key:2,links:f.sales.links},null,8,["links"])):g("",!0)])):g("",!0),_.value==="import"?(i(),u("div",ae,[e("div",le,[e("div",re,[e("div",oe,[e("div",ne,[s(o(yt),{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),z(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>A.value=a),placeholder:"Cari riwayat import...",class:"w-full h-10 pl-10 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[P,A.value]])])]),e("div",ie,[e("a",{href:b("sales.import.template"),class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700 transition-all"},[s(o(jt),{size:18}),t[30]||(t[30]=n(" Download Template ",-1))],8,de),s(w,{type:"button",icon:o(L),class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",label:"Import Excel",onClick:t[6]||(t[6]=a=>I.value=!0)},null,8,["icon"])])])]),s(q,{title:"Riwayat Import"},{default:l(()=>[s(W,null,{default:l(()=>[s(H,null,{default:l(()=>[e("tr",null,[s(c,{class:"w-10"},{default:l(()=>[...t[31]||(t[31]=[n("No",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[32]||(t[32]=[n("Nama File",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[33]||(t[33]=[n("Tanggal Import",-1)])]),_:1}),s(c,null,{default:l(()=>[...t[34]||(t[34]=[n("Diimport Oleh",-1)])]),_:1}),s(c,{class:"text-center"},{default:l(()=>[...t[35]||(t[35]=[n("Total Baris",-1)])]),_:1}),s(c,{class:"text-center"},{default:l(()=>[...t[36]||(t[36]=[n("Sukses",-1)])]),_:1}),s(c,{class:"text-center"},{default:l(()=>[...t[37]||(t[37]=[n("Gagal",-1)])]),_:1}),s(c,{class:"text-center"},{default:l(()=>[...t[38]||(t[38]=[n("Status",-1)])]),_:1}),s(c,{class:"text-center"},{default:l(()=>[...t[39]||(t[39]=[n("Aksi",-1)])]),_:1})])]),_:1}),s(J,null,{default:l(()=>[f.importLogs.data&&f.importLogs.data.length>0?(i(!0),u(B,{key:0},E(f.importLogs.data,(a,D)=>(i(),u("tr",{key:a.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[s(p,{class:"text-center"},{default:l(()=>[n(d(++D+(f.importLogs.current_page-1)*f.importLogs.per_page),1)]),_:2},1024),s(p,null,{default:l(()=>[e("span",ue,d(a.filename),1)]),_:2},1024),s(p,null,{default:l(()=>[e("span",pe,d(new Date(a.created_at).toLocaleString("id-ID")),1)]),_:2},1024),s(p,null,{default:l(()=>{var m;return[e("span",ce,d(((m=a.user)==null?void 0:m.name)||"-"),1)]}),_:2},1024),s(p,{class:"text-center font-medium"},{default:l(()=>[n(d(a.total_rows),1)]),_:2},1024),s(p,{class:"text-center"},{default:l(()=>[e("span",xe,d(a.success_count),1)]),_:2},1024),s(p,{class:"text-center"},{default:l(()=>[e("span",{class:y(a.failed_count>0?"text-red-600 font-semibold":"text-slate-400")},d(a.failed_count),3)]),_:2},1024),s(p,{class:"text-center"},{default:l(()=>[e("span",{class:y(["px-2 py-1 rounded-full text-xs font-semibold",a.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":a.status==="failed"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"])},d(a.status==="completed"?"Selesai":a.status==="failed"?"Gagal":"Proses"),3)]),_:2},1024),s(p,{class:"text-center"},{default:l(()=>[e("div",me,[e("button",{onClick:m=>o(v).visit(b("sales.import.show",a.id)),class:"p-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 transition-colors",title:"Lihat Detail"},[s(o(K),{size:18})],8,fe),a.failed_count>0?(i(),u("button",{key:0,onClick:m=>it(a.id),class:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors",title:"Lihat Error"},[s(o(xt),{size:18})],8,be)):g("",!0)])]),_:2},1024)]))),128)):(i(),u("tr",ge,[s(p,{colspan:"9",class:"text-center py-12"},{default:l(()=>[e("div",ke,[e("div",ve,[s(o(Z),{size:28,class:"text-slate-400"})]),t[40]||(t[40]=e("p",{class:"text-slate-500 dark:text-slate-400 text-sm"},"Belum ada riwayat import",-1)),t[41]||(t[41]=e("p",{class:"text-slate-400 dark:text-slate-500 text-xs mt-1"},'Klik tombol "Import Excel" untuk memulai',-1))])]),_:1})]))]),_:1})]),_:1})]),_:1})])):g("",!0),s(X,{show:I.value,onClose:t[11]||(t[11]=a=>I.value=!1),title:"Import Transaksi dari Excel"},{default:l(()=>[e("div",_e,[e("form",{onSubmit:S(nt,["prevent"])},[e("div",he,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Pilih File Excel ",-1)),e("div",{class:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-8 text-center hover:border-primary-500 transition-colors cursor-pointer",onClick:t[8]||(t[8]=a=>r.$refs.fileInput.click()),onDragover:t[9]||(t[9]=S(()=>{},["prevent"])),onDrop:S(ot,["prevent"])},[e("input",{ref:"fileInput",type:"file",accept:".xlsx,.xls",class:"hidden",onChange:rt},null,544),k.value?(i(),u("div",we,[s(o(_t),{size:32,class:"text-green-500"}),e("div",Ie,[e("p",Ce,d(k.value.name),1),e("p",De,d(tt(k.value.size)),1)]),e("button",{type:"button",onClick:t[7]||(t[7]=S(a=>k.value=null,["stop"])),class:"p-1 rounded-full hover:bg-red-100 text-red-500"},[s(o(Ct),{size:18})])])):(i(),u("div",ye,[s(o(L),{size:40,class:"mx-auto text-slate-400 mb-3"}),t[42]||(t[42]=e("p",{class:"text-slate-600 dark:text-slate-400 text-sm"}," Klik atau drag file Excel ke sini ",-1)),t[43]||(t[43]=e("p",{class:"text-slate-400 text-xs mt-1"}," Format: .xlsx, .xls (Max 10MB) ",-1))]))],32)]),e("div",Fe,[e("div",je,[s(o(mt),{size:20,class:"text-amber-600 flex-shrink-0 mt-0.5"}),t[45]||(t[45]=e("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[e("p",{class:"font-semibold mb-1"},"Perhatian:"),e("ul",{class:"list-disc list-inside space-y-1 text-xs"},[e("li",null,"Pastikan format file sesuai dengan template"),e("li",null,"Customer dan produk harus sudah terdaftar di sistem"),e("li",null,"Transaksi akan dibuat sebagai DRAFT")])],-1))])]),e("div",$e,[s(w,{type:"button",label:"Batal",class:"bg-slate-100 text-slate-600 hover:bg-slate-200",onClick:t[10]||(t[10]=a=>I.value=!1)}),s(w,{type:"submit",icon:o(L),label:"Import",class:"bg-primary-500 hover:bg-primary-600 text-white",disabled:!k.value||o(T).processing,processing:o(T).processing},null,8,["icon","disabled","processing"])])],32)])]),_:1},8,["show"]),s(X,{show:j.value,onClose:t[13]||(t[13]=a=>j.value=!1),title:"Detail Error Import"},{default:l(()=>[e("div",ze,[e("div",Se,[e("div",Te,[e("div",null,[e("p",Me,d(C.value.total_rows),1),t[46]||(t[46]=e("p",{class:"text-xs text-slate-500"},"Total Baris",-1))]),e("div",null,[e("p",Pe,d(C.value.success_count),1),t[47]||(t[47]=e("p",{class:"text-xs text-slate-500"},"Sukses",-1))]),e("div",null,[e("p",Be,d(C.value.failed_count),1),t[48]||(t[48]=e("p",{class:"text-xs text-slate-500"},"Gagal",-1))])])]),e("div",Ee,[(i(!0),u(B,null,E(C.value.errors,(a,D)=>(i(),u("div",{key:D,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-300"},d(a),1))),128))]),e("div",Le,[s(w,{type:"button",label:"Tutup",class:"bg-slate-100 text-slate-600 hover:bg-slate-200",onClick:t[12]||(t[12]=a=>j.value=!1)})])])]),_:1},8,["show"])]}),_:1}))}};export{ps as default};
