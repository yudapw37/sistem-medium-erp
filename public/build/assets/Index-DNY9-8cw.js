import{i as j,r as y,T as D,a as m,c as w,w as n,b as a,u as l,Z as E,d as t,e as u,g as _,h as A,p as M,t as d,F as z,f as L,O as U}from"./app-CIYeQ-4j.js";import{d as F,c as O,_ as G}from"./DashboardLayout-CDE7-Y8V.js";import{I as K}from"./IconDeviceFloppy-DbcGo2jm.js";import{I as R}from"./IconPencilCog-CbLQ-16V.js";import{I as X}from"./IconTrash-CUcDdroG.js";import{I as Z}from"./IconX-DHFi-BKV.js";import{_ as C}from"./Button-CxuUSqWK.js";import{_ as q}from"./Search-NBeUwUBy.js";import{_ as H}from"./Table-W38pwiux.js";import{_ as J,a as Q}from"./TableTbody-B6-z0LtQ.js";import{_ as p,a as b}from"./TableTh-C_S67pHj.js";import{_ as W}from"./Pagination-DUsmzl5y.js";import{_ as V}from"./Input-n-ox4s5-.js";import{_ as Y}from"./TextArea-B8lJlxzM.js";import{_ as ee}from"./InputSelect-CCGvz5pc.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconSearch-_c1o4uNe.js";import"./IconChevronRight-CKLwVeXD.js";import"./IconCircleFilled-CJHeZp2T.js";const te={class:"mb-6"},ae={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},se={class:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2"},le={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},re={class:"p-6"},oe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ne={class:"w-full sm:w-80"},de={key:0},ie={class:"font-medium text-slate-900 dark:text-white"},me={class:"flex flex-col"},ue={class:"text-xs font-bold text-primary-600 uppercase tracking-wider mb-0.5"},ce={class:"text-sm text-slate-700 dark:text-slate-300"},pe={class:"text-sm text-slate-600 dark:text-slate-400"},be={class:"text-sm text-slate-500 dark:text-slate-400 line-clamp-1 max-w-xs"},fe={class:"flex gap-2"},xe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm"},ge={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 w-full max-w-lg shadow-2xl overflow-hidden"},_e={class:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center"},ke={class:"text-xl font-bold text-slate-900 dark:text-white"},he={class:"p-6 space-y-4"},ve={key:1},ye={class:"px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-xl text-slate-700 dark:text-slate-300 font-medium"},we={class:"grid grid-cols-2 gap-4"},Ae={class:"p-6 border-t border-slate-100 dark:border-slate-800 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50"},Ce=["disabled"],Je={__name:"Index",props:{addresses:Object,customers:Array},setup(i){const c=j(),f=y(!1),x=y(!1),g=y(null),s=D({id:null,customer_id:"",label:"",name:"",phone:"",address:""}),v=()=>{f.value=!1,x.value=!1,s.reset(),g.value=null},I=r=>{x.value=!0,g.value=r.customer,s.id=r.id,s.customer_id=r.customer_id,s.label=r.label,s.name=r.name,s.phone=r.phone,s.address=r.address,f.value=!0},N=r=>{g.value=r,s.customer_id=r?r.id:""},B=()=>{x.value?s.put(k("customer-addresses.update",s.id),{onSuccess:()=>{c.success("Alamat berhasil diperbarui"),v()},onError:()=>c.error("Gagal memperbarui alamat")}):s.post(k("customer-addresses.store"),{onSuccess:()=>{c.success("Alamat berhasil ditambahkan"),v()},onError:r=>{r.customer_id?c.error(r.customer_id):c.error("Gagal menambahkan alamat. Periksa inputan Anda.")}})},T=r=>{confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&U.delete(k("customer-addresses.destroy",r),{onSuccess:()=>c.success("Alamat berhasil dihapus")})},k=(r,e)=>typeof window<"u"&&window.route?window.route(r,e):"#";return(r,e)=>(m(),w(G,null,{default:n(()=>{var $,P;return[a(l(E),{title:"Daftar Alamat Pelanggan"}),t("div",te,[t("div",ae,[t("div",null,[t("h1",se,[a(l(F),{size:28,class:"text-primary-500"}),e[6]||(e[6]=u(" Daftar Alamat Pelanggan ",-1))]),e[7]||(e[7]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Data alamat pengiriman yang tersimpan untuk pelanggan. ",-1))]),a(C,{type:"button",icon:l(O),class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",label:"Tambah Alamat",onClick:e[0]||(e[0]=o=>f.value=!0)},null,8,["icon"])])]),t("div",le,[t("div",re,[t("div",oe,[t("div",ne,[a(q,{url:k("customer-addresses.index"),placeholder:"Cari pelanggan atau alamat..."},null,8,["url"])])])]),a(H,null,{default:n(()=>[a(J,null,{default:n(()=>[t("tr",null,[a(p,{class:"w-10"},{default:n(()=>[...e[8]||(e[8]=[u("No",-1)])]),_:1}),a(p,null,{default:n(()=>[...e[9]||(e[9]=[u("Pelanggan",-1)])]),_:1}),a(p,null,{default:n(()=>[...e[10]||(e[10]=[u("Label / Nama",-1)])]),_:1}),a(p,null,{default:n(()=>[...e[11]||(e[11]=[u("No. Telp",-1)])]),_:1}),a(p,null,{default:n(()=>[...e[12]||(e[12]=[u("Alamat",-1)])]),_:1}),a(p)])]),_:1}),a(Q,null,{default:n(()=>[i.addresses.data.length===0?(m(),_("tr",de,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"py-12 text-center text-slate-500 italic"}," Belum ada data alamat tersimpan. ",-1)])])):A("",!0),(m(!0),_(z,null,M(i.addresses.data,(o,S)=>(m(),_("tr",{key:o.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[a(b,{class:"text-center"},{default:n(()=>[u(d(++S+(i.addresses.current_page-1)*i.addresses.per_page),1)]),_:2},1024),a(b,null,{default:n(()=>{var h;return[t("span",ie,d((h=o.customer)==null?void 0:h.name),1)]}),_:2},1024),a(b,null,{default:n(()=>[t("div",me,[t("span",ue,d(o.label),1),t("span",ce,d(o.name),1)])]),_:2},1024),a(b,null,{default:n(()=>[t("span",pe,d(o.phone),1)]),_:2},1024),a(b,null,{default:n(()=>[t("p",be,d(o.address),1)]),_:2},1024),a(b,null,{default:n(()=>[t("div",fe,[a(C,{type:"button",icon:l(R),class:"border bg-warning-100 border-warning-200 text-warning-600 hover:bg-warning-200 dark:bg-warning-900/50 dark:border-warning-800 dark:text-warning-400",onClick:h=>I(o)},null,8,["icon","onClick"]),a(C,{type:"delete",icon:l(X),class:"border bg-danger-100 border-danger-200 text-danger-600 hover:bg-danger-200 dark:bg-danger-900/50 dark:border-danger-800 dark:text-danger-400",onClick:h=>T(o.id)},null,8,["icon","onClick"])])]),_:2},1024)]))),128))]),_:1})]),_:1})]),($=i.addresses)!=null&&$.links&&i.addresses.links.length>3?(m(),w(W,{key:0,links:i.addresses.links},null,8,["links"])):A("",!0),f.value?(m(),_("div",xe,[t("div",ge,[t("div",_e,[t("h2",ke,d(x.value?"Edit Alamat":"Tambah Alamat Baru"),1),t("button",{onClick:v,class:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"},[a(l(Z),{size:24})])]),t("form",{onSubmit:L(B,["prevent"])},[t("div",he,[x.value?(m(),_("div",ve,[e[14]||(e[14]=t("label",{class:"block text-sm text-gray-600 dark:text-gray-400 mb-1"},"Pelanggan",-1)),t("div",ye,d((P=g.value)==null?void 0:P.name),1)])):(m(),w(ee,{key:0,label:"Pilih Pelanggan",data:i.customers,selected:g.value,"set-selected":N,placeholder:"Cari Pelanggan...",searchable:!0,errors:l(s).errors.customer_id},null,8,["data","selected","errors"])),t("div",we,[a(V,{type:"text",label:"Label Alamat",placeholder:"Contoh: Rumah, Kantor",errors:l(s).errors.label,modelValue:l(s).label,"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).label=o)},null,8,["errors","modelValue"]),a(V,{type:"text",label:"Nama Penerima",placeholder:"Nama lengkap penerima",errors:l(s).errors.name,modelValue:l(s).name,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).name=o)},null,8,["errors","modelValue"])]),a(V,{type:"text",label:"No. Telepon Penerima",placeholder:"08xxxxxxxxxx",errors:l(s).errors.phone,modelValue:l(s).phone,"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).phone=o)},null,8,["errors","modelValue"]),a(Y,{label:"Alamat Lengkap",placeholder:"Masukkan alamat lengkap...",errors:l(s).errors.address,modelValue:l(s).address,"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).address=o),rows:3},null,8,["errors","modelValue"])]),t("div",Ae,[t("button",{type:"button",onClick:e[5]||(e[5]=o=>f.value=!1),class:"px-5 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 font-medium transition-colors"}," Batal "),t("button",{type:"submit",disabled:l(s).processing,class:"px-5 py-2.5 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors disabled:opacity-50 inline-flex items-center gap-2"},[a(l(K),{size:18}),u(" "+d(l(s).processing?"Menyimpan...":"Simpan Alamat"),1)],8,Ce)])],32)])])):A("",!0)]}),_:1}))}};export{Je as default};
