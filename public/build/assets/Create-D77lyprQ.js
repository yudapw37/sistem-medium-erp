import{T as U,r as g,J as q,A as $,E as z,a as o,c as A,w as D,b as d,u as r,Z as O,d as e,n as w,k as n,y as _,v as m,g as i,F as S,p as C,h,t as c,O as E}from"./app-CIYeQ-4j.js";import{I as G}from"./IconArrowLeft-D_cLVqwd.js";import{I as N}from"./IconSearch-_c1o4uNe.js";import{I as F}from"./IconTrash-CUcDdroG.js";import{_ as K}from"./DashboardLayout-CDE7-Y8V.js";import{_ as k}from"./Button-CxuUSqWK.js";import{_ as L}from"./InputSelect-CCGvz5pc.js";import{l as M}from"./lodash-Dim8PIC9.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconCircleFilled-CJHeZp2T.js";const Q={class:"mb-6"},R={class:"flex items-center justify-between"},W={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},J={class:"lg:col-span-1 space-y-6"},Z={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},H={class:"space-y-3"},X={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Y={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},ee={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},te={class:"relative"},se={class:"flex items-center gap-2 mb-2"},ae={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-xl max-h-64 overflow-y-auto"},re=["onClick"],le={class:"flex items-center gap-3"},oe={class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex-shrink-0"},de=["src"],ie={class:"font-medium text-slate-900 dark:text-white text-sm"},ne={class:"text-xs text-slate-500"},ue={class:"ml-auto text-right"},be={class:"text-xs font-semibold text-slate-700 dark:text-slate-300"},ce={class:"lg:col-span-2"},pe={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 h-full flex flex-col"},me={class:"flex-1 overflow-x-auto"},xe={class:"w-full"},ge={class:"divide-y divide-slate-100 dark:divide-slate-700"},he={key:0},ke={class:"py-3 pl-2"},fe={class:"flex flex-col"},ve={class:"font-medium text-slate-900 dark:text-white text-sm"},ye={class:"text-xs text-slate-500"},we={class:"py-3 text-center"},_e=["onUpdate:modelValue"],Se={class:"py-3 text-center"},Ce=["onClick"],Ie={class:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-700"},Pe={class:"mb-4"},Ve={class:"flex justify-end gap-3"},Le={__name:"Create",props:{warehouses:Array},setup(I){const a=U({type:"in",warehouse_id:"",date:new Date().toISOString().split("T")[0],notes:"",items:[]}),f=g(null),u=g(""),b=g([]),P=l=>{f.value=l,a.warehouse_id=l?l.id:""},v=M.debounce(async()=>{if(!u.value){b.value=[];return}try{const l=await q.post(p("stock-adjustments.searchProduct"),{q:u.value});b.value=l.data}catch(l){console.error(l)}},300),V=l=>{const t=a.items.find(s=>s.product_id===l.id);t?t.qty++:a.items.push({product_id:l.id,title:l.title,barcode:l.barcode,qty:1}),u.value="",b.value=[]},B=l=>{a.items.splice(l,1)},T=$(()=>a.items.reduce((l,t)=>l+t.buy_price*t.qty,0));z(T,l=>{a.grand_total=l});const j=()=>{a.post(p("stock-adjustments.store"))},p=(l,t)=>typeof window<"u"&&window.route?window.route(l,t):"#";return(l,t)=>(o(),A(K,null,{default:D(()=>[d(r(O),{title:"Penyesuaian Stok Baru"}),e("div",Q,[e("div",R,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Penyesuaian Stok Baru"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Buat penyesuaian stok manual (in/out). ")],-1)),d(k,{type:"link",icon:r(G),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:p("stock-adjustments.index")},null,8,["icon","href"])])]),e("div",W,[e("div",J,[e("div",Z,[t[10]||(t[10]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Tipe Penyesuaian",-1)),e("div",H,[e("label",{class:w(["flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all",r(a).type==="in"?"border-green-500 bg-green-50 dark:bg-green-950/30":"border-slate-200 dark:border-slate-700"])},[n(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=s=>r(a).type=s),value:"in",class:"w-4 h-4 text-green-600"},null,512),[[_,r(a).type]]),t[8]||(t[8]=e("div",null,[e("p",{class:"font-medium text-slate-900 dark:text-white"},"Stock In"),e("p",{class:"text-xs text-slate-500"},"Tambah stok")],-1))],2),e("label",{class:w(["flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all",r(a).type==="out"?"border-red-500 bg-red-50 dark:bg-red-950/30":"border-slate-200 dark:border-slate-700"])},[n(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=s=>r(a).type=s),value:"out",class:"w-4 h-4 text-red-600"},null,512),[[_,r(a).type]]),t[9]||(t[9]=e("div",null,[e("p",{class:"font-medium text-slate-900 dark:text-white"},"Stock Out"),e("p",{class:"text-xs text-slate-500"},"Kurangi stok")],-1))],2)])]),e("div",X,[t[11]||(t[11]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Tanggal",-1)),n(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>r(a).date=s),class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[m,r(a).date]])]),e("div",Y,[t[12]||(t[12]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Gudang Tujuan",-1)),d(L,{label:"Pilih Gudang",data:I.warehouses,selected:f.value,"set-selected":P,placeholder:"Pilih Gudang...",searchable:!0,errors:r(a).errors.warehouse_id},null,8,["data","selected","errors"])]),e("div",ee,[t[13]||(t[13]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Cari Produk",-1)),e("div",te,[e("div",se,[d(r(N),{size:20,class:"text-slate-400"}),n(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s),onInput:t[4]||(t[4]=(...s)=>r(v)&&r(v)(...s)),placeholder:"Scan barcode atau ketik nama...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none"},null,544),[[m,u.value]])]),b.value.length>0?(o(),i("div",ae,[(o(!0),i(S,null,C(b.value,s=>(o(),i("div",{key:s.id,onClick:x=>V(s),class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-700 last:border-0"},[e("div",le,[e("div",oe,[s.image?(o(),i("img",{key:0,src:s.image,class:"w-full h-full object-cover rounded-lg"},null,8,de)):h("",!0)]),e("div",null,[e("p",ie,c(s.title),1),e("p",ne,c(s.barcode),1)]),e("div",ue,[e("p",be,"Stok: "+c(s.stock),1)])])],8,re))),128))])):h("",!0)])])]),e("div",ce,[e("div",pe,[t[17]||(t[17]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Daftar Item",-1)),e("div",me,[e("table",xe,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"border-b border-slate-100 dark:border-slate-700 text-left text-sm text-slate-500"},[e("th",{class:"pb-3 pl-2"},"Produk"),e("th",{class:"pb-3 text-center w-24"},"Qty"),e("th",{class:"pb-3 w-10"})])],-1)),e("tbody",ge,[r(a).items.length===0?(o(),i("tr",he,[...t[14]||(t[14]=[e("td",{colspan:"5",class:"py-8 text-center text-slate-500 italic text-sm"}," Belum ada item dipilih ",-1)])])):h("",!0),(o(!0),i(S,null,C(r(a).items,(s,x)=>(o(),i("tr",{key:x,class:"group"},[e("td",ke,[e("div",fe,[e("span",ve,c(s.title),1),e("span",ye,c(s.barcode),1)])]),e("td",we,[n(e("input",{type:"number","onUpdate:modelValue":y=>s.qty=y,min:"0",class:"w-20 px-2 py-1 text-center text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,_e),[[m,s.qty]])]),e("td",Se,[e("button",{onClick:y=>B(x),class:"text-slate-400 hover:text-danger-500 transition-colors"},[d(r(F),{size:18})],8,Ce)])]))),128))])])]),e("div",Ie,[e("div",Pe,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Catatan ",-1)),n(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>r(a).notes=s),rows:"3",placeholder:"Alasan penyesuaian stok...",class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[m,r(a).notes]])]),e("div",Ve,[d(k,{type:"button",label:"Batal",class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",onClick:t[6]||(t[6]=s=>r(E).visit(p("stock-adjustments.index")))}),d(k,{type:"submit",label:"Simpan Penyesuaian",class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",processing:r(a).processing,disabled:r(a).items.length===0||!r(a).warehouse_id||!r(a).type,onClick:j},null,8,["processing","disabled"])])])])])])]),_:1}))}};export{Le as default};
