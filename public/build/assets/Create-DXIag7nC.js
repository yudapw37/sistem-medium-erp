import{T as X,r as T,J as Y,A as $,E as q,a as o,c as R,w as V,b as i,u as r,Z as ee,M as te,g as d,d as e,F as z,p as D,t as n,e as y,j as se,h as b,n as x,k as p,m as re,v as u,D as E,O as ae}from"./app-CIYeQ-4j.js";import{I as le}from"./IconAlertCircle-zvooSIVy.js";import{I as F}from"./IconArrowLeft-D_cLVqwd.js";import{a as A}from"./IconSun-B2kMHmLk.js";import{e as K,_ as oe}from"./DashboardLayout-CDE7-Y8V.js";import{I as de}from"./IconPhone-Daxc2FTh.js";import{I as ne}from"./IconSearch-_c1o4uNe.js";import{I as ie}from"./IconTrash-CUcDdroG.js";import{I as pe}from"./IconUser-CjGQ9nH3.js";import{_ as j}from"./Button-CxuUSqWK.js";import{_ as ue}from"./InputSelect-CCGvz5pc.js";import{_ as be}from"./Modal-BK6JeM5l.js";import{l as me}from"./lodash-Dim8PIC9.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconCircleFilled-CJHeZp2T.js";const xe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ce={class:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center"},ge={class:"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mx-auto mb-4"},ke={class:"grid grid-cols-1 gap-3"},ye=["onClick"],fe={class:"w-10 h-10 bg-slate-100 dark:bg-slate-800 rounded-lg flex items-center justify-center"},_e={class:"font-medium text-slate-900 dark:text-white"},he={class:"text-xs text-slate-500"},ve={class:"mb-6"},we={class:"flex items-center justify-between"},Ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Pe={class:"lg:col-span-1 space-y-6"},Te={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Ve={class:"grid grid-cols-2 gap-2"},Ie={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Ue={class:"space-y-4"},$e={key:0,class:"p-4 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 relative group"},ze={class:"font-medium text-slate-900 dark:text-white"},De={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},Ae={key:1,class:"mt-3 p-3 rounded-lg bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20"},je={class:"flex gap-2 text-amber-600 dark:text-amber-400"},Be={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Ne={class:"flex items-center justify-between mb-4"},qe={class:"relative inline-flex items-center cursor-pointer"},Me={key:0,class:"space-y-4 pt-2"},Se={key:0,class:"text-xs text-danger-500 mt-1"},Oe={class:"relative"},Re={key:0,class:"text-xs text-danger-500 mt-1"},Ee={class:"p-6"},Fe={class:"space-y-4"},Ke=["onClick"],Le={class:"flex items-start justify-between mb-2"},Qe={class:"px-2 py-1 rounded-md bg-primary-50 dark:bg-primary-500/10 text-primary-600 dark:text-primary-400 text-[10px] font-bold uppercase tracking-wider"},Je={key:0,class:"text-[10px] text-success-600 font-medium"},We={class:"space-y-1"},Ge={class:"flex items-center gap-2 text-sm font-semibold text-slate-900 dark:text-white"},He={class:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400"},Ze={class:"flex items-start gap-2 text-xs text-slate-500 dark:text-slate-400 leading-relaxed mt-2"},Xe={class:"mt-6 flex justify-end"},Ye={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},et={class:"grid grid-cols-3 gap-2"},tt={key:0,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},st={class:"space-y-4"},rt={class:"grid grid-cols-2 gap-4"},at={class:"border-t border-slate-100 dark:border-slate-800 pt-4"},lt={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},ot={class:"lg:col-span-2 space-y-6"},dt={class:"grid grid-cols-1 md:grid-cols-5 gap-6"},nt={class:"md:col-span-2 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},it={class:"flex items-center gap-2 mb-4"},pt={class:"flex items-center gap-3 p-4 rounded-xl bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800"},ut={class:"w-10 h-10 bg-primary-100 dark:bg-primary-800 rounded-lg flex items-center justify-center"},bt={class:"flex-1 min-w-0"},mt={class:"font-medium text-slate-900 dark:text-white truncate"},xt={class:"text-xs text-slate-500 truncate"},ct={class:"md:col-span-3 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},gt={class:"flex items-center gap-2 mb-4"},kt={class:"relative"},yt=["disabled","placeholder"],ft={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-xl max-h-64 overflow-y-auto"},_t=["onClick"],ht={class:"flex items-center gap-3"},vt={class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex-shrink-0"},wt=["src"],Ct={class:"font-medium text-slate-900 dark:text-white text-sm"},Pt={class:"text-xs text-slate-500"},Tt={class:"ml-auto text-right"},Vt={key:0,class:"text-[10px] text-slate-500"},It={class:"text-xs text-primary-600 font-bold mt-1"},Ut={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 flex flex-col"},$t={class:"flex-1 overflow-x-auto"},zt={class:"w-full"},Dt={class:"divide-y divide-slate-100 dark:divide-slate-700"},At={key:0},jt={class:"py-2 pl-2"},Bt={class:"flex flex-col"},Nt={class:"font-medium text-slate-900 dark:text-white text-sm"},qt={key:0,class:"text-purple-600 font-bold mr-1"},Mt={class:"text-xs text-slate-500"},St={class:"py-2 text-right"},Ot=["onUpdate:modelValue"],Rt={class:"py-2 text-right"},Et=["onUpdate:modelValue"],Ft={class:"py-2 text-center"},Kt=["onUpdate:modelValue","onChange"],Lt={class:"py-2 text-right font-medium text-slate-900 dark:text-white text-sm"},Qt={class:"py-2 text-center"},Jt=["onClick"],Wt={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Gt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ht={class:"flex gap-2 mb-2"},Zt={class:"relative"},Xt={key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},Yt={key:2,class:"relative"},es={key:0,class:"text-xs text-success-600 mt-2 font-medium"},ts={class:"flex gap-2 mb-2"},ss={class:"relative"},rs={key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},as={key:2,class:"relative"},ls={key:0,class:"text-xs text-purple-600 mt-2 font-medium"},os={class:"relative"},ds={class:"relative"},ns={class:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800 flex items-center justify-between"},is={class:"text-3xl font-black text-primary-600 dark:text-primary-400"},ps={class:"flex gap-3"},$s={__name:"Create",props:{customers:Array,warehouses:Array},setup(M){const s=X({customer_id:"",warehouse_id:"",grand_total:0,shipping_cost:0,other_cost:0,discount:0,discount_type:"amount",discount_percent:0,event_discount:0,event_discount_type:"amount",event_discount_percent:0,shipping_name:"",shipping_phone:"",shipping_address:"",sender_name:"",sender_phone:"",payment_type:"cash",shipping_type:"pickup",is_preorder:!1,preorder_status:"pending",estimated_ready_date:"",paid_amount:0,notes:"",items:[]}),c=T(null),B=T(null),_=T(""),h=T([]),f=T(!1),L=l=>{c.value=l,s.customer_id=l?l.id:"",s.shipping_name="",s.shipping_phone="",s.shipping_address="",l&&l.addresses&&l.addresses.length>0&&(f.value=!0)},Q=l=>{s.shipping_name=l.name,s.shipping_phone=l.phone,s.shipping_address=l.address,f.value=!1},J=l=>{B.value=l,s.warehouse_id=l.id},S=me.debounce(async()=>{if(!_.value){h.value=[];return}try{const l=await Y.post(C("sales.searchProduct"),{q:_.value,warehouse_id:s.warehouse_id});h.value=l.data}catch(l){console.error(l)}},300),W=l=>{const t=l.type==="bundle",g=s.items.find(P=>t?P.bundle_id===l.id:P.product_id===l.id),U=g?g.qty:0;if(!s.is_preorder&&U+1>l.stock){alert("Stok tidak mencukupi! (Tersedia: "+l.stock+")");return}g?g.qty++:s.items.push({product_id:t?null:l.id,bundle_id:t?l.id:null,title:l.title,barcode:l.barcode,sell_price:l.sell_price,discount:0,qty:1,stock:l.stock,type:l.type}),_.value="",h.value=[]},G=l=>{s.items.splice(l,1)},H=l=>{const t=s.items[l];!s.is_preorder&&t.qty>t.stock&&(alert("Stok tidak mencukupi! (Tersedia: "+t.stock+")"),t.qty=t.stock),t.qty<1&&(t.qty=1)},N=$(()=>s.items.reduce((l,t)=>{const g=t.sell_price*t.qty-(t.discount||0);return l+g},0)),v=$(()=>s.discount_type==="percent"?Math.round(N.value*(s.discount_percent||0)/100):s.discount||0),I=$(()=>{const l=N.value-v.value;return s.event_discount_type==="percent"?Math.round(l*(s.event_discount_percent||0)/100):s.event_discount||0}),O=$(()=>N.value-v.value-I.value+parseInt(s.shipping_cost||0)+parseInt(s.other_cost||0));q(O,l=>{s.grand_total=l}),q([v],([l])=>{s.discount_type==="percent"&&(s.discount=l)}),q([I],([l])=>{s.event_discount_type==="percent"&&(s.event_discount=l)});const Z=()=>{s.post(C("sales.store"))},w=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0),C=(l,t)=>typeof window<"u"&&window.route?window.route(l,t):"#";return(l,t)=>(o(),R(oe,null,{default:V(()=>{var g,U,P;return[i(r(ee),{title:"Transaksi Baru"}),(o(),R(te,{to:"body"},[r(s).warehouse_id?b("",!0):(o(),d("div",xe,[t[33]||(t[33]=e("div",{class:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm"},null,-1)),e("div",ce,[e("div",ge,[i(r(A),{size:32,class:"text-primary-600 dark:text-primary-400"})]),t[31]||(t[31]=e("h2",{class:"text-xl font-bold text-slate-900 dark:text-white mb-2"},"Pilih Gudang",-1)),t[32]||(t[32]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-6"},"Pilih gudang sumber sebelum memulai transaksi.",-1)),e("div",ke,[(o(!0),d(z,null,D(M.warehouses,a=>(o(),d("button",{key:a.id,onClick:m=>J(a),class:"flex items-center gap-3 p-4 rounded-xl border-2 border-slate-200 dark:border-slate-700 hover:border-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-all text-left"},[e("div",fe,[i(r(A),{size:20,class:"text-slate-500"})]),e("div",null,[e("p",_e,n(a.name),1),e("p",he,n(a.address||"Alamat belum diisi"),1)])],8,ye))),128))]),i(r(se),{href:C("sales.index"),class:"inline-flex items-center gap-2 mt-6 text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"},{default:V(()=>[i(r(F),{size:16}),t[30]||(t[30]=y(" Kembali ke Daftar Transaksi ",-1))]),_:1},8,["href"])])]))])),e("div",ve,[e("div",we,[t[34]||(t[34]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Transaksi Baru"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Buat transaksi penjualan baru secara manual. ")],-1)),i(j,{type:"link",icon:r(F),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:C("sales.index")},null,8,["icon","href"])])]),e("div",Ce,[e("div",Pe,[e("div",Te,[t[35]||(t[35]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Tipe Pembayaran",-1)),e("div",Ve,[e("button",{type:"button",onClick:t[0]||(t[0]=a=>r(s).payment_type="cash"),class:x(["px-4 py-2 rounded-xl text-sm font-medium transition-all border",r(s).payment_type==="cash"?"bg-primary-50 border-primary-500 text-primary-700 dark:bg-primary-500/10 dark:text-primary-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Cash ",2),e("button",{type:"button",onClick:t[1]||(t[1]=a=>r(s).payment_type="tempo"),class:x(["px-4 py-2 rounded-xl text-sm font-medium transition-all border",r(s).payment_type==="tempo"?"bg-primary-50 border-primary-500 text-primary-700 dark:bg-primary-500/10 dark:text-primary-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Tempo ",2)])]),e("div",Ie,[t[38]||(t[38]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Informasi Customer",-1)),e("div",Ue,[i(ue,{label:"Pilih Customer",data:M.customers,selected:c.value,"set-selected":L,placeholder:"Pilih Customer...",searchable:!0,errors:r(s).errors.customer_id},null,8,["data","selected","errors"]),c.value?(o(),d("div",$e,[e("p",ze,n(c.value.name),1),e("p",De,n(c.value.phone||"-"),1),c.value.addresses&&c.value.addresses.length>0?(o(),d("button",{key:0,type:"button",onClick:t[2]||(t[2]=a=>f.value=!0),class:"mt-3 w-full flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs font-medium bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors"},[i(r(K),{size:14}),t[36]||(t[36]=y(" Pilih Alamat ",-1))])):(o(),d("div",Ae,[e("div",je,[i(r(le),{size:16,class:"mt-0.5 flex-shrink-0"}),t[37]||(t[37]=e("p",{class:"text-[10px] text-amber-700 dark:text-amber-300 leading-normal font-medium"},[y(" Customer belum ada alamat yang terdaftar. buat di "),e("span",{class:"font-bold"},"pelanggan - daftar alamat")],-1))])]))])):b("",!0)])]),e("div",Be,[e("div",Ne,[t[40]||(t[40]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Pre-Order (PO)",-1)),e("label",qe,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=a=>r(s).is_preorder=a),class:"sr-only peer"},null,512),[[re,r(s).is_preorder]]),t[39]||(t[39]=e("div",{class:"w-11 h-6 bg-slate-200 peer-focus:outline-none dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"},null,-1))])]),i(E,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:V(()=>[r(s).is_preorder?(o(),d("div",Me,[t[45]||(t[45]=e("div",{class:"p-3 bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20 rounded-xl mb-4"},[e("p",{class:"text-[10px] text-amber-700 dark:text-amber-300 leading-normal"},[e("span",{class:"font-bold"},"Info:"),y(" Transaksi PO tidak mengurangi stok saat ini. Stok akan direservasi (booked). ")])],-1)),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1 font-bold lowercase"},"Estimasi Tanggal Ready",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r(s).estimated_ready_date=a),type:"date",class:x(["w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm",{"border-danger-500":r(s).errors.estimated_ready_date}])},null,2),[[u,r(s).estimated_ready_date]]),r(s).errors.estimated_ready_date?(o(),d("p",Se,n(r(s).errors.estimated_ready_date),1)):b("",!0)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1 font-bold lowercase"},"DP / Pembayaran Masuk",-1)),e("div",Oe,[t[42]||(t[42]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"},"Rp",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r(s).paid_amount=a),type:"number",placeholder:"0",class:x(["w-full h-11 pl-9 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm",{"border-danger-500":r(s).errors.paid_amount}])},null,2),[[u,r(s).paid_amount,void 0,{number:!0}]])]),r(s).errors.paid_amount?(o(),d("p",Re,n(r(s).errors.paid_amount),1)):b("",!0),t[44]||(t[44]=e("p",{class:"text-[10px] text-slate-500 mt-1"},"Kosongkan jika belum ada pembayaran.",-1))])])):b("",!0)]),_:1})]),i(be,{show:f.value,onClose:t[7]||(t[7]=a=>f.value=!1),title:"Daftar Alamat "+(((g=c.value)==null?void 0:g.name)||"")},{default:V(()=>{var a;return[e("div",Ee,[e("div",Fe,[(o(!0),d(z,null,D((a=c.value)==null?void 0:a.addresses,m=>(o(),d("div",{key:m.id,onClick:k=>Q(m),class:"p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-primary-500 dark:hover:border-primary-500 cursor-pointer transition-all group bg-slate-50 dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800"},[e("div",Le,[e("span",Qe,n(m.label),1),m.is_default?(o(),d("span",Je,"Utama")):b("",!0)]),e("div",We,[e("div",Ge,[i(r(pe),{size:14,class:"text-slate-400"}),y(" "+n(m.name),1)]),e("div",He,[i(r(de),{size:14,class:"text-slate-400"}),y(" "+n(m.phone),1)]),e("div",Ze,[i(r(K),{size:14,class:"text-slate-400 flex-shrink-0 mt-0.5"}),y(" "+n(m.address),1)])])],8,Ke))),128))]),e("div",Xe,[i(j,{type:"button",label:"Tutup",class:"bg-slate-100 text-slate-600 hover:bg-slate-200",onClick:t[6]||(t[6]=m=>f.value=!1)})])])]}),_:1},8,["show","title"]),e("div",Ye,[t[46]||(t[46]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Jenis Pengiriman",-1)),e("div",et,[e("button",{type:"button",onClick:t[8]||(t[8]=a=>r(s).shipping_type="pickup"),class:x(["px-2 py-2 rounded-xl text-[10px] font-bold transition-all border uppercase",r(s).shipping_type==="pickup"?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Ambil ",2),e("button",{type:"button",onClick:t[9]||(t[9]=a=>r(s).shipping_type="cod"),class:x(["px-2 py-2 rounded-xl text-[10px] font-bold transition-all border uppercase",r(s).shipping_type==="cod"?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," COD ",2),e("button",{type:"button",onClick:t[10]||(t[10]=a=>r(s).shipping_type="courier"),class:x(["px-2 py-2 rounded-xl text-[10px] font-bold transition-all border uppercase",r(s).shipping_type==="courier"?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Kurir ",2)])]),i(E,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:V(()=>[r(s).shipping_type!=="pickup"?(o(),d("div",tt,[t[52]||(t[52]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Detail Pengirim & Penerima",-1)),e("div",st,[e("div",rt,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"Nama Pengirim",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r(s).sender_name=a),type:"text",placeholder:"Nama pengirim...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[u,r(s).sender_name]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"No. Telp Pengirim",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>r(s).sender_phone=a),type:"text",placeholder:"No. Telp...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[u,r(s).sender_phone]])])]),e("div",at,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"Nama Penerima",-1)),p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>r(s).shipping_name=a),type:"text",placeholder:"Masukkan nama penerima...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[u,r(s).shipping_name]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"No. Telp Penerima",-1)),p(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>r(s).shipping_phone=a),type:"text",placeholder:"Masukkan nomor telepon...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[u,r(s).shipping_phone]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"Alamat Lengkap",-1)),p(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=a=>r(s).shipping_address=a),placeholder:"Masukkan alamat pengiriman...",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none resize-none text-sm",rows:"3"},null,512),[[u,r(s).shipping_address]])])])])])):b("",!0)]),_:1}),e("div",lt,[t[53]||(t[53]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Catatan",-1)),p(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>r(s).notes=a),placeholder:"Catatan/keterangan (opsional)",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none resize-none",rows:"3"},null,512),[[u,r(s).notes]])])]),e("div",ot,[e("div",dt,[e("div",nt,[e("div",it,[i(r(A),{size:20,class:"text-slate-400"}),t[54]||(t[54]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Informasi Gudang",-1))]),e("div",pt,[e("div",ut,[i(r(A),{size:20,class:"text-primary-600 dark:text-primary-400"})]),e("div",bt,[e("p",mt,n((U=B.value)==null?void 0:U.name),1),e("p",xt,n(((P=B.value)==null?void 0:P.address)||"Alamat belum diisi"),1)])])]),e("div",ct,[e("div",gt,[i(r(ne),{size:20,class:"text-slate-400"}),t[55]||(t[55]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Cari Produk",-1))]),e("div",kt,[p(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=a=>_.value=a),onInput:t[18]||(t[18]=(...a)=>r(S)&&r(S)(...a)),disabled:!r(s).warehouse_id,placeholder:r(s).warehouse_id?"Scan barcode atau ketik nama...":"Pilih gudang terlebih dahulu...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none disabled:opacity-50 disabled:cursor-not-allowed"},null,40,yt),[[u,_.value]]),h.value.length>0?(o(),d("div",ft,[(o(!0),d(z,null,D(h.value,a=>(o(),d("div",{key:a.id,onClick:m=>W(a),class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-700 last:border-0"},[e("div",ht,[e("div",vt,[a.image?(o(),d("img",{key:0,src:a.image,class:"w-full h-full object-cover rounded-lg"},null,8,wt)):b("",!0)]),e("div",null,[e("p",Ct,n(a.title),1),e("p",Pt,n(a.barcode),1)]),e("div",Tt,[e("p",{class:x(["text-xs font-semibold",a.type==="bundle"?"text-purple-600":"text-slate-700 dark:text-slate-300"])},n(a.type==="bundle"?"Bundling":"Stok: "+a.stock),3),a.type==="bundle"?(o(),d("p",Vt,"Tersedia: "+n(a.stock),1)):b("",!0),e("p",It,n(w(a.sell_price)),1)])])],8,_t))),128))])):b("",!0)])])]),e("div",Ut,[t[58]||(t[58]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-6"},"Daftar Item",-1)),e("div",$t,[e("table",zt,[t[57]||(t[57]=e("thead",null,[e("tr",{class:"border-b border-slate-100 dark:border-slate-700 text-left text-sm text-slate-500"},[e("th",{class:"pb-3 pl-2"},"Produk"),e("th",{class:"pb-3 text-right"},"Harga Jual"),e("th",{class:"pb-3 text-right w-28"},"Diskon"),e("th",{class:"pb-3 text-center w-24"},"Qty"),e("th",{class:"pb-3 text-right"},"Subtotal"),e("th",{class:"pb-3 w-10"})])],-1)),e("tbody",Dt,[r(s).items.length===0?(o(),d("tr",At,[...t[56]||(t[56]=[e("td",{colspan:"6",class:"py-8 text-center text-slate-500 italic text-sm"}," Belum ada item dipilih ",-1)])])):b("",!0),(o(!0),d(z,null,D(r(s).items,(a,m)=>(o(),d("tr",{key:m,class:"group"},[e("td",jt,[e("div",Bt,[e("span",Nt,[a.bundle_id?(o(),d("span",qt,"[B]")):b("",!0),y(" "+n(a.title),1)]),e("span",Mt,n(a.barcode),1)])]),e("td",St,[p(e("input",{type:"number","onUpdate:modelValue":k=>a.sell_price=k,min:"0",class:"w-32 px-2 py-1 text-right text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,Ot),[[u,a.sell_price]])]),e("td",Rt,[p(e("input",{type:"number","onUpdate:modelValue":k=>a.discount=k,min:"0",placeholder:"0",class:"w-28 px-2 py-1 text-right text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,Et),[[u,a.discount,void 0,{number:!0}]])]),e("td",Ft,[p(e("input",{type:"number","onUpdate:modelValue":k=>a.qty=k,onChange:k=>H(m),min:"1",class:"w-20 px-2 py-1 text-center text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,40,Kt),[[u,a.qty]])]),e("td",Lt,n(w(a.sell_price*a.qty-(a.discount||0))),1),e("td",Qt,[e("button",{onClick:k=>G(m),class:"text-slate-400 hover:text-danger-500 transition-colors"},[i(r(ie),{size:18})],8,Jt)])]))),128))])])])]),e("div",Wt,[e("div",Gt,[e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Diskon",-1)),e("div",Ht,[e("button",{type:"button",onClick:t[19]||(t[19]=a=>r(s).discount_type="amount"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).discount_type==="amount"?"bg-primary-500 border-primary-500 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Nominal ",2),e("button",{type:"button",onClick:t[20]||(t[20]=a=>r(s).discount_type="percent"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).discount_type==="percent"?"bg-primary-500 border-primary-500 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Persentase ",2)]),e("div",Zt,[r(s).discount_type==="amount"?(o(),d("span",Xt,"Rp")):b("",!0),r(s).discount_type==="amount"?p((o(),d("input",{key:1,"onUpdate:modelValue":t[21]||(t[21]=a=>r(s).discount=a),type:"number",min:"0",placeholder:"0",class:"w-full h-11 pl-9 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512)),[[u,r(s).discount,void 0,{number:!0}]]):(o(),d("div",Yt,[p(e("input",{"onUpdate:modelValue":t[22]||(t[22]=a=>r(s).discount_percent=a),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full h-11 pl-4 pr-9 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512),[[u,r(s).discount_percent,void 0,{number:!0}]]),t[59]||(t[59]=e("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"%",-1))]))]),v.value>0?(o(),d("p",es,"Potongan: "+n(w(v.value)),1)):b("",!0)]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Diskon Event",-1)),e("div",ts,[e("button",{type:"button",onClick:t[23]||(t[23]=a=>r(s).event_discount_type="amount"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).event_discount_type==="amount"?"bg-purple-600 border-purple-600 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Nominal ",2),e("button",{type:"button",onClick:t[24]||(t[24]=a=>r(s).event_discount_type="percent"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).event_discount_type==="percent"?"bg-purple-600 border-purple-600 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Persentase ",2)]),e("div",ss,[r(s).event_discount_type==="amount"?(o(),d("span",rs,"Rp")):b("",!0),r(s).event_discount_type==="amount"?p((o(),d("input",{key:1,"onUpdate:modelValue":t[25]||(t[25]=a=>r(s).event_discount=a),type:"number",min:"0",placeholder:"0",class:"w-full h-11 pl-9 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512)),[[u,r(s).event_discount,void 0,{number:!0}]]):(o(),d("div",as,[p(e("input",{"onUpdate:modelValue":t[26]||(t[26]=a=>r(s).event_discount_percent=a),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full h-11 pl-4 pr-9 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512),[[u,r(s).event_discount_percent,void 0,{number:!0}]]),t[61]||(t[61]=e("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"%",-1))]))]),I.value>0?(o(),d("p",ls,"Potongan Event: "+n(w(I.value)),1)):b("",!0)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Ongkos Kirim",-1)),e("div",os,[t[63]||(t[63]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"Rp",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[27]||(t[27]=a=>r(s).shipping_cost=a),min:"0",placeholder:"0",class:"w-full pl-9 pr-4 h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[u,r(s).shipping_cost]])])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Biaya Lainnya",-1)),e("div",ds,[t[65]||(t[65]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"Rp",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[28]||(t[28]=a=>r(s).other_cost=a),min:"0",placeholder:"0",class:"w-full pl-9 pr-4 h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[u,r(s).other_cost]])])])]),e("div",ns,[e("div",null,[t[67]||(t[67]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 uppercase tracking-wider font-bold"},"Total Akhir",-1)),e("p",is,n(w(O.value)),1)]),e("div",ps,[i(j,{type:"button",label:"Batal",class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",onClick:t[29]||(t[29]=a=>r(ae).visit(C("sales.index")))}),i(j,{type:"submit",label:"Simpan Transaksi",class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30 px-8",processing:r(s).processing,disabled:r(s).items.length===0||!r(s).customer_id||!r(s).warehouse_id,onClick:Z},null,8,["processing","disabled"])])])])])])]}),_:1}))}};export{$s as default};
