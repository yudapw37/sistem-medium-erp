import{T as z,r as f,C as A,a as i,c as E,w as K,b as n,u as o,Z as M,d as e,t as d,k as m,v as h,n as y,e as P,g as u,F as S,p as V,h as I,O,J as D}from"./app-CIYeQ-4j.js";import{I as G}from"./IconArrowLeft-D_cLVqwd.js";import{I as j}from"./IconTrash-CUcDdroG.js";import{_ as F}from"./DashboardLayout-CDE7-Y8V.js";import{_ as w}from"./Button-CxuUSqWK.js";import{_ as L}from"./InputSelect-CCGvz5pc.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconCircleFilled-CJHeZp2T.js";const Q={class:"mb-6"},W={class:"flex items-center justify-between"},J={class:"text-sm text-slate-500 dark:text-slate-400"},R={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Z={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},H={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},X={class:"flex gap-2"},Y={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},ee={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},te={class:"text-sm space-y-1"},se={class:"text-slate-600 dark:text-slate-400"},ae={class:"text-slate-600 dark:text-slate-400"},re={class:"font-bold text-slate-900 dark:text-white"},oe={class:"flex flex-row gap-6"},le={style:{width:"75%"}},de={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},ie={class:"mb-4"},ne={class:"relative"},ue={key:0,class:"absolute w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto"},be=["onClick"],ce={class:"font-medium text-slate-900 dark:text-white"},pe={class:"text-xs text-slate-500"},xe={class:"overflow-x-auto"},me={class:"w-full"},he={class:"divide-y divide-slate-100 dark:divide-slate-700"},ke={key:0},ge={class:"py-3 pl-2 text-slate-600 dark:text-slate-400"},fe={class:"py-3"},ye={class:"flex flex-col"},we={class:"font-medium text-slate-900 dark:text-white text-sm"},ve={class:"text-xs text-slate-500"},_e={class:"py-3 text-center"},Ce=["onUpdate:modelValue"],Te={class:"py-3 text-center"},Pe=["onClick"],Se={style:{width:"25%"}},Ve={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 h-full flex flex-col"},Ie={class:"flex-1 mb-4"},$e={class:"space-y-3"},Fe={__name:"Edit",props:{penyesuaian:Object,warehouses:Array},setup(k){var _,C;const l=k,r=z({type:l.penyesuaian.type,warehouse_id:l.penyesuaian.warehouse_id,date:((_=l.penyesuaian.date)==null?void 0:_.split("T")[0])||new Date().toISOString().split("T")[0],notes:l.penyesuaian.notes||"",items:((C=l.penyesuaian.details)==null?void 0:C.map(s=>{var t,a;return{product_id:s.product_id,title:(t=s.product)==null?void 0:t.title,barcode:(a=s.product)==null?void 0:a.barcode,qty:s.qty}}))||[]}),g=f(null),b=f(""),c=f([]);let v=null;A(()=>{l.penyesuaian.warehouse_id&&(g.value=l.warehouses.find(s=>s.id===l.penyesuaian.warehouse_id))});const $=s=>{g.value=s,r.warehouse_id=s?s.id:""},q=()=>{if(clearTimeout(v),b.value.length<2){c.value=[];return}v=setTimeout(async()=>{try{const s=await D.post(p("stock-penyesuaian.searchProduct"),{q:b.value});c.value=s.data}catch(s){console.error(s)}},300)},B=s=>{const t=r.items.find(a=>a.product_id===s.id);t?t.qty+=1:r.items.push({product_id:s.id,title:s.title,barcode:s.barcode,qty:1}),b.value="",c.value=[]},N=s=>{r.items.splice(s,1)},U=()=>{r.put(p("stock-penyesuaian.update",l.penyesuaian.id))},p=(s,t)=>typeof window<"u"&&window.route?window.route(s,t):"#";return(s,t)=>(i(),E(F,null,{default:K(()=>[n(o(M),{title:"Edit Stock Penyesuaian"}),e("div",Q,[e("div",W,[e("div",null,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Edit Stock Penyesuaian",-1)),e("p",J,d(k.penyesuaian.code),1)]),n(w,{type:"link",icon:o(G),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:p("stock-penyesuaian.index")},null,8,["icon","href"])])]),e("div",R,[e("div",Z,[t[7]||(t[7]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Tanggal",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=a=>o(r).date=a),class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[h,o(r).date]])]),e("div",H,[t[8]||(t[8]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Tipe Penyesuaian",-1)),e("div",X,[e("button",{onClick:t[1]||(t[1]=a=>o(r).type="in"),class:y(["flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-colors",o(r).type==="in"?"bg-green-500 text-white":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Masuk ",2),e("button",{onClick:t[2]||(t[2]=a=>o(r).type="out"),class:y(["flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-colors",o(r).type==="out"?"bg-red-500 text-white":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Keluar ",2)])]),e("div",Y,[t[9]||(t[9]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Gudang",-1)),n(L,{label:"Pilih Gudang",data:k.warehouses,selected:g.value,"set-selected":$,placeholder:"Pilih Gudang...",searchable:!0,errors:o(r).errors.warehouse_id},null,8,["data","selected","errors"])]),e("div",ee,[t[12]||(t[12]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Informasi",-1)),e("div",te,[e("p",se,[t[10]||(t[10]=P(" Tipe: ",-1)),e("span",{class:y(o(r).type==="in"?"text-green-600 font-bold":"text-red-600 font-bold")},d(o(r).type==="in"?"Stok Masuk":"Stok Keluar"),3)]),e("p",ae,[t[11]||(t[11]=P(" Total Item: ",-1)),e("span",re,d(o(r).items.length),1)])])])]),e("div",oe,[e("div",le,[e("div",de,[e("div",ie,[t[13]||(t[13]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3"},"Cari Produk",-1)),e("div",ne,[m(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>b.value=a),onInput:q,placeholder:"Ketik nama atau barcode produk...",class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,544),[[h,b.value]]),c.value.length>0?(i(),u("div",ue,[(i(!0),u(S,null,V(c.value,a=>(i(),u("div",{key:a.id,onClick:x=>B(a),class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[e("div",ce,d(a.title),1),e("div",pe,d(a.barcode),1)],8,be))),128))])):I("",!0)])]),e("div",xe,[e("table",me,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"border-b border-slate-100 dark:border-slate-700 text-left text-sm text-slate-500"},[e("th",{class:"pb-3 pl-2 w-12"},"No"),e("th",{class:"pb-3"},"Produk"),e("th",{class:"pb-3 text-center w-32"},"Qty"),e("th",{class:"pb-3 text-center w-24"},"Aksi")])],-1)),e("tbody",he,[o(r).items.length===0?(i(),u("tr",ke,[...t[14]||(t[14]=[e("td",{colspan:"4",class:"py-8 text-center text-slate-500 italic text-sm"}," Belum ada produk. Cari dan tambahkan produk di atas. ",-1)])])):I("",!0),(i(!0),u(S,null,V(o(r).items,(a,x)=>(i(),u("tr",{key:x,class:"group hover:bg-slate-50 dark:hover:bg-slate-800/50"},[e("td",ge,d(x+1),1),e("td",fe,[e("div",ye,[e("span",we,d(a.title),1),e("span",ve,d(a.barcode),1)])]),e("td",_e,[m(e("input",{type:"number","onUpdate:modelValue":T=>a.qty=T,min:"1",class:"w-24 px-2 py-1 text-center text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,Ce),[[h,a.qty,void 0,{number:!0}]])]),e("td",Te,[e("button",{onClick:T=>N(x),class:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors"},[n(o(j),{size:18})],8,Pe)])]))),128))])])])])]),e("div",Se,[e("div",Ve,[t[17]||(t[17]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Catatan & Aksi",-1)),e("div",Ie,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Catatan ",-1)),m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>o(r).notes=a),rows:"10",placeholder:"Catatan penyesuaian stok...",class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"},null,512),[[h,o(r).notes]])]),e("div",$e,[n(w,{type:"submit",label:"Simpan Perubahan",class:"w-full bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",processing:o(r).processing,disabled:o(r).items.length===0||!o(r).warehouse_id,onClick:U},null,8,["processing","disabled"]),n(w,{type:"button",label:"Batal",class:"w-full bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",onClick:t[5]||(t[5]=a=>o(O).visit(p("stock-penyesuaian.index")))})])])])])]),_:1}))}};export{Fe as default};
