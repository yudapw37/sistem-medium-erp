import{K as F,r as f,A,a as o,c as E,w as C,b as i,u as c,Z as M,d as t,g as n,F as D,p as I,n as y,t as l,e as N,k as R,v as V,h as O,D as $,J as S}from"./app-DA0EYa_6.js";import{I as L}from"./IconCalendar-B7TcRpGX.js";import{I as q}from"./IconSun-9pmbsCzq.js";import{f as K,_ as Q}from"./DashboardLayout-DqHF1oae.js";import{I as U}from"./IconDatabaseOff-DfZH0otJ.js";import{I as Z}from"./IconFileSpreadsheet-DCPU1LFp.js";import{I as G}from"./IconSearch-hVNvfgeb.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";const H={key:0,class:"space-y-4"},P=["onClick"],W={class:"flex items-center justify-between mb-4"},X={class:"flex items-center gap-3"},Y={class:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center"},tt={class:"font-bold text-lg text-slate-900 dark:text-white"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},st={class:"bg-slate-50 dark:bg-slate-800/60 rounded-xl p-4"},at={class:"grid grid-cols-3 gap-3"},rt={class:"text-lg font-bold text-slate-900 dark:text-white"},lt={class:"text-lg font-bold text-slate-900 dark:text-white"},ot={class:"text-lg font-bold text-blue-600 dark:text-blue-400"},nt={class:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 border border-emerald-100 dark:border-emerald-800/30"},dt={class:"text-xs font-semibold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider mb-3 flex items-center gap-1"},it={class:"grid grid-cols-3 gap-3"},ut={class:"text-lg font-bold text-emerald-700 dark:text-emerald-300"},ct={class:"text-lg font-bold text-emerald-700 dark:text-emerald-300"},xt={class:"text-lg font-bold text-emerald-700 dark:text-emerald-300"},mt={key:0,class:"border-t border-slate-200 dark:border-slate-800 overflow-hidden"},pt={key:0,class:"flex items-center justify-center py-12"},ft={key:1,class:"p-4"},bt={class:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},gt={class:"relative w-full sm:w-72"},vt=["href"],ht={class:"overflow-x-auto"},_t={class:"w-full text-sm"},yt={class:"py-3 px-3"},kt={class:"relative inline-flex items-center cursor-pointer"},wt=["checked","onChange","disabled"],Ct={class:"py-3 px-3"},Dt={class:"font-bold text-slate-900 dark:text-white"},It={class:"py-3 px-3 text-slate-700 dark:text-slate-300"},Nt={class:"py-3 px-3 text-center"},Ot={class:"inline-flex items-center justify-center px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-semibold"},St={class:"py-3 px-3 text-right font-bold text-slate-900 dark:text-white"},Tt={class:"py-3 px-3 text-slate-500"},jt={key:0,class:"text-center py-8 text-slate-400 text-sm"},Jt={key:1,class:"text-center py-8 text-slate-400 text-sm"},zt={key:1,class:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},Bt={class:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4"},Ht={__name:"Resume",props:{months:Array},setup(T){const p=F([...T.months]),x=f(null),u=f([]),g=f(!1),v=f(null),m=f(""),k=A(()=>{if(!m.value)return u.value;const a=m.value.toLowerCase();return u.value.filter(e=>String(e.id).toLowerCase().includes(a))}),j=["","Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],J=a=>j[a]||"",z=async(a,e)=>{if(x.value===a){x.value=null,u.value=[],m.value="";return}x.value=a,g.value=!0,u.value=[];try{const s=await S.get(_("old-orders.resume-detail",{year:e.year,month:e.month}));u.value=s.data}catch(s){console.error("Error fetching orders:",s)}finally{g.value=!1}},B=async(a,e)=>{v.value=a.id;const s=!a.resume_status;try{const d=await S.put(_("old-orders.toggle-status",a.id),{resume_status:s});if(a.resume_status=s,d.data.summary){const r=d.data.summary;p[e].true_orders=r.true_orders,p[e].true_barang=r.true_barang,p[e].true_nominal=r.true_nominal}}catch(d){console.error("Error toggling status:",d)}finally{v.value=null}},h=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a||0),b=a=>new Intl.NumberFormat("id-ID").format(a||0),_=(a,e)=>typeof window<"u"&&window.route?window.route(a,e):"#";return(a,e)=>(o(),E(Q,null,{default:C(()=>[i(c(M),{title:"Resume Old Order"}),e[15]||(e[15]=t("div",{class:"mb-6"},[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Resume Old Order"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Ringkasan order lama per bulan. ")])])],-1)),p.length>0?(o(),n("div",H,[(o(!0),n(D,null,I(p,(s,d)=>(o(),n("div",{key:`${s.year}-${s.month}`,class:y(["bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden transition-all duration-300",{"ring-2 ring-primary-500/30":x.value===d}])},[t("button",{onClick:r=>z(d,s),class:"w-full text-left p-5 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[t("div",W,[t("div",X,[t("div",Y,[i(c(L),{size:20,class:"text-primary-500"})]),t("div",null,[t("h3",tt,l(J(s.month))+" "+l(s.year),1)])]),i(c(q),{size:20,class:y(["text-slate-400 transition-transform duration-300",{"rotate-180":x.value===d}])},null,8,["class"])]),t("div",et,[t("div",st,[e[4]||(e[4]=t("div",{class:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-3"}," Semua Order ",-1)),t("div",at,[t("div",null,[e[1]||(e[1]=t("div",{class:"text-xs text-slate-400"},"Jumlah Order",-1)),t("div",rt,l(b(s.total_orders)),1)]),t("div",null,[e[2]||(e[2]=t("div",{class:"text-xs text-slate-400"},"Jumlah Buku",-1)),t("div",lt,l(b(s.total_barang)),1)]),t("div",null,[e[3]||(e[3]=t("div",{class:"text-xs text-slate-400"},"Nominal",-1)),t("div",ot,l(h(s.total_nominal)),1)])])]),t("div",nt,[t("div",dt,[i(c(K),{size:14}),e[5]||(e[5]=N(" Order Aktif (Status âœ“) ",-1))]),t("div",it,[t("div",null,[e[6]||(e[6]=t("div",{class:"text-xs text-slate-400"},"Jumlah Order",-1)),t("div",ut,l(b(s.true_orders)),1)]),t("div",null,[e[7]||(e[7]=t("div",{class:"text-xs text-slate-400"},"Jumlah Buku",-1)),t("div",ct,l(b(s.true_barang)),1)]),t("div",null,[e[8]||(e[8]=t("div",{class:"text-xs text-slate-400"},"Nominal",-1)),t("div",xt,l(h(s.true_nominal)),1)])])])])],8,P),i($,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-[2000px] opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"max-h-[2000px] opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:C(()=>[x.value===d?(o(),n("div",mt,[g.value?(o(),n("div",pt,[...e[9]||(e[9]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-primary-500 border-t-transparent"},null,-1),t("span",{class:"ml-3 text-sm text-slate-500"},"Memuat data order...",-1)])])):(o(),n("div",ft,[t("div",bt,[t("div",gt,[i(c(G),{size:16,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),R(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>m.value=r),type:"text",placeholder:"Cari No Order...",class:"w-full h-10 pl-9 pr-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all placeholder:text-slate-400"},null,512),[[V,m.value]])]),t("a",{href:_("old-orders.resume-export-excel",{year:s.year,month:s.month}),target:"_blank",class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-bold transition-all shadow-lg shadow-emerald-500/20"},[i(c(Z),{size:18}),e[10]||(e[10]=N(" Export Excel ",-1))],8,vt)]),t("div",ht,[t("table",_t,[e[12]||(e[12]=t("thead",null,[t("tr",{class:"border-b border-slate-200 dark:border-slate-700"},[t("th",{class:"text-left py-3 px-3 text-xs font-semibold text-slate-500 uppercase"},"Status"),t("th",{class:"text-left py-3 px-3 text-xs font-semibold text-slate-500 uppercase"},"Code Order"),t("th",{class:"text-left py-3 px-3 text-xs font-semibold text-slate-500 uppercase"},"Customer"),t("th",{class:"text-center py-3 px-3 text-xs font-semibold text-slate-500 uppercase"},"Total Barang"),t("th",{class:"text-right py-3 px-3 text-xs font-semibold text-slate-500 uppercase"},"Nominal"),t("th",{class:"text-left py-3 px-3 text-xs font-semibold text-slate-500 uppercase"},"Tanggal")])],-1)),t("tbody",null,[(o(!0),n(D,null,I(k.value,r=>{var w;return o(),n("tr",{key:r.id,class:y(["border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",{"opacity-50":!r.resume_status}])},[t("td",yt,[t("label",kt,[t("input",{type:"checkbox",checked:r.resume_status,onChange:At=>B(r,d),class:"sr-only peer",disabled:v.value===r.id},null,40,wt),e[11]||(e[11]=t("div",{class:"w-9 h-5 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-500/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-emerald-500 transition-colors"},null,-1))])]),t("td",Ct,[t("span",Dt,l(r.id),1)]),t("td",It,l(((w=r.customer)==null?void 0:w.nama)||"-"),1),t("td",Nt,[t("span",Ot,l(r.total_barang),1)]),t("td",St,l(h(r.computed_nominal)),1),t("td",Tt,l(r.created_at?new Date(r.created_at).toLocaleDateString("id-ID"):"-"),1)],2)}),128))])])]),k.value.length===0&&u.value.length>0?(o(),n("div",jt,' Tidak ditemukan order dengan nomor "'+l(m.value)+'". ',1)):u.value.length===0?(o(),n("div",Jt," Tidak ada order di bulan ini. ")):O("",!0)]))])):O("",!0)]),_:2},1024)],2))),128))])):(o(),n("div",zt,[t("div",Bt,[i(c(U),{size:32,class:"text-slate-400","stroke-width":1.5})]),e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-1"}," Tidak Ada Data ",-1)),e[14]||(e[14]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Tidak ditemukan data old order. ",-1))]))]),_:1}))}};export{Ht as default};
