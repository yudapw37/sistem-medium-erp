import{A as I,a,g as o,d as t,t as s,h as r,u as g,F as K,p as q,e as st,n as E,r as at,c as C,w as gt,b as B,Z as ht,N as yt,s as kt,O as vt}from"./app-DA0EYa_6.js";import{I as wt}from"./IconArrowLeft-gRB0gwWT.js";import{I as $t}from"./IconCheck--wdzxov0.js";import{I as _t}from"./IconEdit-CG94FACO.js";import{c as Dt}from"./createVueComponent-CUBUAVU4.js";import{I as mt}from"./IconPrinter-DN1-CNQQ.js";import{I as nt}from"./IconReceipt-DjQT6mN-.js";import{_ as It}from"./DashboardLayout-DqHF1oae.js";import{_ as M}from"./Button-mcRGNCmf.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconShoppingCart-qle56F5S.js";/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pt=Dt("outline","file-text","FileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);const jt={ref:"receiptRef",class:"sales-receipt font-mono text-xs leading-tight",style:{width:"80mm",padding:"4mm"}},St={class:"text-center mb-2"},Tt={class:"text-sm font-bold"},At={key:0,class:"text-xs"},Nt={key:1,class:"text-xs"},Ot={class:"whitespace-pre-wrap"},zt={class:"my-1"},Ct={class:"flex justify-between"},Lt={class:"flex justify-between"},Rt={class:"flex justify-between"},Et={class:"flex justify-between"},Kt={class:"flex justify-between"},qt={class:"whitespace-pre-wrap"},Ft={class:"my-1"},Bt={class:"font-medium truncate"},Mt={key:0,class:"pl-2"},Gt={class:"flex justify-between"},Vt={key:1,class:"flex justify-between text-[10px]"},Ht={class:"whitespace-pre-wrap"},Jt={class:"my-1"},Ut={class:"flex justify-between"},Qt={key:0,class:"flex justify-between"},Wt={key:1,class:"flex justify-between"},Yt={key:2,class:"flex justify-between"},Zt={key:3,class:"flex justify-between"},Xt={key:4,class:"flex justify-between"},te={class:"flex justify-between font-bold text-sm"},ee={class:"whitespace-pre-wrap"},se={class:"my-1"},le={class:"flex justify-between"},ae={class:"uppercase"},ne={class:"flex justify-between"},oe={class:"uppercase"},ie={key:0,class:"my-1"},de={class:"whitespace-pre-wrap"},re={class:"mb-2"},ce={class:"whitespace-pre-wrap"},ue={class:"whitespace-pre-wrap"},xe={__name:"SalesReceipt",props:{sale:Object,storeName:{type:String,default:"TOKO ANDA"},storeAddress:{type:String,default:""},storePhone:{type:String,default:""}},setup(e){const _=e,u=(l=0)=>"Rp "+Number(l||0).toLocaleString("id-ID"),D=l=>new Date(l).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=I(()=>{var l;return((l=_.sale)==null?void 0:l.details)??[]}),L=I(()=>m.value.reduce((l,n)=>l+n.sell_price*n.qty,0)),p=I(()=>m.value.reduce((l,n)=>l+(n.discount||0),0)),b={pickup:"Ambil di Gudang",cod:"COD",courier:"Jasa Kirim"},c=I(()=>{var l;return b[(l=_.sale)==null?void 0:l.shipping_type]||"-"}),i="=".repeat(32),x="-".repeat(32);return(l,n)=>{var k,w,$,d,f,P,j,S,T,A,N,O,h,R,z,G,V,H,J,U,Q,W,Y,Z;return a(),o("div",jt,[t("div",St,[t("p",Tt,s(e.storeName),1),e.storeAddress?(a(),o("p",At,s(e.storeAddress),1)):r("",!0),e.storePhone?(a(),o("p",Nt,"Telp: "+s(e.storePhone),1)):r("",!0)]),t("pre",Ot,s(g(i)),1),t("div",zt,[t("div",Ct,[n[0]||(n[0]=t("span",null,"No:",-1)),t("span",null,s((k=e.sale)==null?void 0:k.invoice),1)]),t("div",Lt,[n[1]||(n[1]=t("span",null,"Tgl:",-1)),t("span",null,s(D((w=e.sale)==null?void 0:w.created_at)),1)]),t("div",Rt,[n[2]||(n[2]=t("span",null,"Petugas:",-1)),t("span",null,s(((d=($=e.sale)==null?void 0:$.user)==null?void 0:d.name)||"-"),1)]),t("div",Et,[n[3]||(n[3]=t("span",null,"Pelanggan:",-1)),t("span",null,s(((P=(f=e.sale)==null?void 0:f.customer)==null?void 0:P.name)||"Umum"),1)]),t("div",Kt,[n[4]||(n[4]=t("span",null,"Gudang:",-1)),t("span",null,s(((S=(j=e.sale)==null?void 0:j.warehouse)==null?void 0:S.name)||"-"),1)])]),t("pre",qt,s(g(i)),1),t("div",Ft,[(a(!0),o(K,null,q(m.value,(v,lt)=>{var X,tt;return a(),o("div",{key:v.id||lt,class:"mb-1"},[t("p",Bt,s(v.bundle?"[B] "+v.bundle.name:(X=v.product)==null?void 0:X.title),1),(tt=v.bundle)!=null&&tt.items?(a(),o("div",Mt,[(a(!0),o(K,null,q(v.bundle.items,F=>{var et;return a(),o("p",{key:F.id,class:"text-[10px] opacity-75"}," - "+s((et=F.product)==null?void 0:et.title)+" ("+s(F.qty)+" pcs) ",1)}),128))])):r("",!0),t("div",Gt,[t("span",null,s(v.qty)+"x @ "+s(u(v.sell_price)),1),t("span",null,s(u(v.sell_price*v.qty)),1)]),v.discount>0?(a(),o("div",Vt,[n[5]||(n[5]=t("span",null,"Diskon:",-1)),t("span",null,"-"+s(u(v.discount)),1)])):r("",!0)])}),128))]),t("pre",Ht,s(g(x)),1),t("div",Jt,[t("div",Ut,[n[6]||(n[6]=t("span",null,"Subtotal",-1)),t("span",null,s(u(L.value)),1)]),p.value>0?(a(),o("div",Qt,[n[7]||(n[7]=t("span",null,"Diskon Item",-1)),t("span",null,"-"+s(u(p.value)),1)])):r("",!0),((T=e.sale)==null?void 0:T.discount)>0?(a(),o("div",Wt,[n[8]||(n[8]=t("span",null,"Diskon Transaksi",-1)),t("span",null,"-"+s(u((A=e.sale)==null?void 0:A.discount)),1)])):r("",!0),((N=e.sale)==null?void 0:N.event_discount)>0?(a(),o("div",Yt,[n[9]||(n[9]=t("span",null,"Diskon Event",-1)),t("span",null,"-"+s(u((O=e.sale)==null?void 0:O.event_discount)),1)])):r("",!0),((h=e.sale)==null?void 0:h.shipping_cost)>0?(a(),o("div",Zt,[n[10]||(n[10]=t("span",null,"Ongkir",-1)),t("span",null,s(u((R=e.sale)==null?void 0:R.shipping_cost)),1)])):r("",!0),((z=e.sale)==null?void 0:z.other_cost)>0?(a(),o("div",Xt,[n[11]||(n[11]=t("span",null,"Biaya Lain",-1)),t("span",null,s(u((G=e.sale)==null?void 0:G.other_cost)),1)])):r("",!0),t("div",te,[n[12]||(n[12]=t("span",null,"TOTAL",-1)),t("span",null,s(u((V=e.sale)==null?void 0:V.grand_total)),1)])]),t("pre",ee,s(g(x)),1),t("div",se,[t("div",le,[n[13]||(n[13]=t("span",null,"Tipe Bayar:",-1)),t("span",ae,s((H=e.sale)==null?void 0:H.payment_type),1)]),t("div",ne,[n[14]||(n[14]=t("span",null,"Pengiriman:",-1)),t("span",oe,s(c.value),1)])]),((J=e.sale)==null?void 0:J.shipping_type)!=="pickup"?(a(),o("div",ie,[t("pre",de,s(g(x)),1),t("div",re,[n[15]||(n[15]=t("p",{class:"font-bold underline mb-1"},"PENGIRIM:",-1)),t("p",null,s(((U=e.sale)==null?void 0:U.sender_name)||"-"),1),t("p",null,s(((Q=e.sale)==null?void 0:Q.sender_phone)||"-"),1)]),t("div",null,[n[16]||(n[16]=t("p",{class:"font-bold underline mb-1"},"PENERIMA:",-1)),t("p",null,s(((W=e.sale)==null?void 0:W.shipping_name)||"-"),1),t("p",null,s(((Y=e.sale)==null?void 0:Y.shipping_phone)||"-"),1),t("p",ce,s(((Z=e.sale)==null?void 0:Z.shipping_address)||"-"),1)])])):r("",!0),t("pre",ue,s(g(i)),1),n[17]||(n[17]=t("div",{class:"text-center mt-2"},[t("p",{class:"text-xs"},"Terima kasih"),t("p",{class:"text-xs"},"atas kepercayaan Anda")],-1))],512)}}},pe=dt(xe,[["__scopeId","data-v-a538476f"]]),me={class:"sales-receipt-58 font-mono text-[9px] leading-tight",style:{width:"58mm",padding:"2mm"}},be={class:"text-center mb-1"},fe={class:"font-bold text-[10px]"},ge={key:0},he={class:"truncate"},ye={class:"flex justify-between"},ke={key:0,class:"flex justify-between text-[8px]"},ve={class:"flex justify-between"},we={key:0,class:"flex justify-between"},$e={key:1,class:"flex justify-between"},_e={key:2,class:"flex justify-between"},De={key:3,class:"flex justify-between"},Ie={class:"flex justify-between font-bold"},Pe={key:4,class:"mt-1 border-t border-dashed"},je={__name:"SalesReceipt58mm",props:{sale:Object,storeName:{type:String,default:"TOKO"},storePhone:{type:String,default:""}},setup(e){const _=e,u=(b=0)=>"Rp"+Number(b||0).toLocaleString("id-ID"),D=b=>new Date(b).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),m=I(()=>{var b;return((b=_.sale)==null?void 0:b.details)??[]}),L=I(()=>m.value.reduce((b,c)=>b+c.sell_price*c.qty-(c.discount||0),0)),p="-".repeat(24);return(b,c)=>{var i,x,l,n,k,w,$,d,f,P,j,S,T,A,N,O;return a(),o("div",me,[t("div",be,[t("p",fe,s(e.storeName),1),e.storePhone?(a(),o("p",ge,s(e.storePhone),1)):r("",!0)]),t("pre",null,s(g(p)),1),t("p",null,"#"+s((i=e.sale)==null?void 0:i.invoice),1),t("p",null,s(D((x=e.sale)==null?void 0:x.created_at)),1),t("pre",null,s(g(p)),1),(a(!0),o(K,null,q(m.value,(h,R)=>{var z;return a(),o("div",{key:R,class:"mb-1"},[t("p",he,s(h.bundle?"[B] "+h.bundle.name:(z=h.product)==null?void 0:z.title),1),t("div",ye,[t("span",null,s(h.qty)+"x @ "+s(u(h.sell_price)),1),t("span",null,s(u(h.sell_price*h.qty-(h.discount||0))),1)]),h.discount>0?(a(),o("div",ke,[c[0]||(c[0]=t("span",null,"Disc:",-1)),t("span",null,"-"+s(u(h.discount)),1)])):r("",!0)])}),128)),t("pre",null,s(g(p)),1),t("div",ve,[c[1]||(c[1]=t("span",null,"Subtotal",-1)),t("span",null,s(u(L.value)),1)]),((l=e.sale)==null?void 0:l.discount)>0?(a(),o("div",we,[c[2]||(c[2]=t("span",null,"Diskon",-1)),t("span",null,"-"+s(u((n=e.sale)==null?void 0:n.discount)),1)])):r("",!0),((k=e.sale)==null?void 0:k.event_discount)>0?(a(),o("div",$e,[c[3]||(c[3]=t("span",null,"Disc Event",-1)),t("span",null,"-"+s(u((w=e.sale)==null?void 0:w.event_discount)),1)])):r("",!0),(($=e.sale)==null?void 0:$.shipping_cost)>0?(a(),o("div",_e,[c[4]||(c[4]=t("span",null,"Ongkir",-1)),t("span",null,s(u((d=e.sale)==null?void 0:d.shipping_cost)),1)])):r("",!0),((f=e.sale)==null?void 0:f.other_cost)>0?(a(),o("div",De,[c[5]||(c[5]=t("span",null,"Lainnya",-1)),t("span",null,s(u((P=e.sale)==null?void 0:P.other_cost)),1)])):r("",!0),t("div",Ie,[c[6]||(c[6]=t("span",null,"TOTAL",-1)),t("span",null,s(u((j=e.sale)==null?void 0:j.grand_total)),1)]),((S=e.sale)==null?void 0:S.shipping_type)!=="pickup"?(a(),o("div",Pe,[t("p",null,"S: "+s(((T=e.sale)==null?void 0:T.sender_name)||"-")+" / "+s(((A=e.sale)==null?void 0:A.sender_phone)||"-"),1),t("p",null,"R: "+s(((N=e.sale)==null?void 0:N.shipping_name)||"-")+" / "+s(((O=e.sale)==null?void 0:O.shipping_phone)||"-"),1)])):r("",!0),t("pre",null,s(g(p)),1),c[7]||(c[7]=t("p",{class:"text-center"},"Terima kasih!",-1))])}}},Se=dt(je,[["__scopeId","data-v-937ce1c2"]]),Te={class:"sales-invoice bg-white p-8",style:{width:"210mm","min-height":"297mm"}},Ae={class:"flex justify-between items-start mb-8 border-b-2 border-slate-800 pb-4"},Ne={class:"text-2xl font-bold text-slate-800"},Oe={key:0,class:"text-sm text-slate-600"},ze={key:1,class:"text-sm text-slate-600"},Ce={class:"text-right"},Le={class:"text-lg font-semibold text-primary-600"},Re={class:"text-sm text-slate-600"},Ee={class:"grid grid-cols-2 gap-8 mb-8"},Ke={class:"font-semibold text-slate-800"},qe={key:0,class:"text-sm text-slate-600"},Fe={key:1,class:"text-sm text-slate-600"},Be={class:"text-right"},Me={class:"font-semibold text-slate-800"},Ge={class:"text-sm text-slate-600"},Ve={class:"text-sm text-slate-600"},He={class:"w-full mb-6"},Je={class:"py-3 px-4 text-sm text-slate-600"},Ue={class:"py-3 px-4"},Qe={class:"font-medium text-slate-800"},We={key:0,class:"text-purple-600 font-bold"},Ye={class:"text-xs text-slate-500"},Ze={class:"py-3 px-4 text-right text-sm text-slate-600"},Xe={class:"py-3 px-4 text-center text-sm text-slate-800 font-medium"},ts={class:"py-3 px-4 text-right text-sm font-semibold text-slate-800"},es={class:"flex justify-end mb-8"},ss={class:"w-80"},ls={class:"flex justify-between py-2 border-b border-slate-200"},as={class:"font-medium"},ns={key:0,class:"flex justify-between py-2 border-b border-slate-200"},os={class:"text-red-500"},is={key:1,class:"flex justify-between py-2 border-b border-slate-200"},ds={class:"text-purple-500"},rs={key:2,class:"flex justify-between py-2 border-b border-slate-200"},cs={key:3,class:"flex justify-between py-2 border-b border-slate-200"},us={class:"flex justify-between py-3 bg-slate-800 text-white px-4 rounded-lg mt-2"},xs={class:"font-bold text-lg"},ps={class:"grid grid-cols-2 gap-8 mb-8 p-4 bg-slate-50 rounded-lg"},ms={class:"font-semibold text-slate-800 uppercase"},bs={class:"font-semibold text-slate-800"},fs={key:0,class:"mb-8 p-6 border-2 border-slate-200 rounded-xl"},gs={class:"grid grid-cols-2 gap-8"},hs={class:"font-bold text-slate-800"},ys={class:"text-sm text-slate-600"},ks={class:"font-bold text-slate-800"},vs={class:"text-sm text-slate-600"},ws={class:"mt-4 pt-4 border-t border-slate-100"},$s={class:"text-sm text-slate-600 leading-relaxed"},_s={key:1,class:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},Ds={class:"text-sm text-slate-700"},Is={__name:"SalesInvoice",props:{sale:Object,storeName:{type:String,default:"TOKO ANDA"},storeAddress:{type:String,default:""},storePhone:{type:String,default:""}},setup(e){const _=e,u=c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c||0),D=c=>new Date(c).toLocaleString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=I(()=>{var c;return((c=_.sale)==null?void 0:c.details)??[]}),L=I(()=>m.value.reduce((c,i)=>c+i.sell_price*i.qty-(i.discount||0),0)),p={pickup:"Ambil di Gudang",cod:"COD",courier:"Jasa Kirim"},b=I(()=>{var c;return p[(c=_.sale)==null?void 0:c.shipping_type]||"-"});return(c,i)=>{var x,l,n,k,w,$,d,f,P,j,S,T,A,N,O,h,R,z,G,V,H,J,U,Q,W,Y,Z,v,lt,X,tt,F,et,rt,ct,ut;return a(),o("div",Te,[t("div",Ae,[t("div",null,[t("h1",Ne,s(e.storeName),1),e.storeAddress?(a(),o("p",Oe,s(e.storeAddress),1)):r("",!0),e.storePhone?(a(),o("p",ze,"Telp: "+s(e.storePhone),1)):r("",!0)]),t("div",Ce,[i[0]||(i[0]=t("h2",{class:"text-xl font-bold text-slate-800"},"INVOICE",-1)),t("p",Le,s((x=e.sale)==null?void 0:x.invoice),1),t("p",Re,s(D((l=e.sale)==null?void 0:l.created_at)),1)])]),t("div",Ee,[t("div",null,[i[1]||(i[1]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase mb-2"},"Kepada:",-1)),t("p",Ke,s(((k=(n=e.sale)==null?void 0:n.customer)==null?void 0:k.name)||"Umum"),1),($=(w=e.sale)==null?void 0:w.customer)!=null&&$.phone?(a(),o("p",qe,s((f=(d=e.sale)==null?void 0:d.customer)==null?void 0:f.phone),1)):r("",!0),(j=(P=e.sale)==null?void 0:P.customer)!=null&&j.address?(a(),o("p",Fe,s((T=(S=e.sale)==null?void 0:S.customer)==null?void 0:T.address),1)):r("",!0)]),t("div",Be,[i[3]||(i[3]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase mb-2"},"Dari Gudang:",-1)),t("p",Me,s((N=(A=e.sale)==null?void 0:A.warehouse)==null?void 0:N.name),1),t("p",Ge,"Petugas: "+s((h=(O=e.sale)==null?void 0:O.user)==null?void 0:h.name),1),t("p",Ve,[i[2]||(i[2]=st(" Status: ",-1)),t("span",{class:E([((R=e.sale)==null?void 0:R.status)==="finalized"?"text-green-600":"text-yellow-600","font-semibold"])},s(((z=e.sale)==null?void 0:z.status)==="finalized"?"Finalized":"Draft"),3)])])]),t("table",He,[i[4]||(i[4]=t("thead",null,[t("tr",{class:"bg-slate-100"},[t("th",{class:"py-3 px-4 text-left text-sm font-bold text-slate-700"},"No"),t("th",{class:"py-3 px-4 text-left text-sm font-bold text-slate-700"},"Produk"),t("th",{class:"py-3 px-4 text-right text-sm font-bold text-slate-700"},"Harga"),t("th",{class:"py-3 px-4 text-right text-sm font-bold text-slate-700"},"Diskon"),t("th",{class:"py-3 px-4 text-center text-sm font-bold text-slate-700"},"Qty"),t("th",{class:"py-3 px-4 text-right text-sm font-bold text-slate-700"},"Subtotal")])],-1)),t("tbody",null,[(a(!0),o(K,null,q(m.value,(y,ft)=>{var xt,pt;return a(),o("tr",{key:y.id,class:"border-b border-slate-200"},[t("td",Je,s(ft+1),1),t("td",Ue,[t("p",Qe,[y.bundle?(a(),o("span",We,"[B] ")):r("",!0),st(" "+s(y.bundle?y.bundle.name:(xt=y.product)==null?void 0:xt.title),1)]),t("p",Ye,s(y.bundle?y.bundle.code:(pt=y.product)==null?void 0:pt.barcode),1)]),t("td",Ze,s(u(y.sell_price)),1),t("td",{class:E(["py-3 px-4 text-right text-sm",y.discount>0?"text-red-500":"text-slate-400"])},s(y.discount>0?"-"+u(y.discount):"-"),3),t("td",Xe,s(y.qty),1),t("td",ts,s(u(y.sell_price*y.qty-(y.discount||0))),1)])}),128))])]),t("div",es,[t("div",ss,[t("div",ls,[i[5]||(i[5]=t("span",{class:"text-slate-600"},"Subtotal",-1)),t("span",as,s(u(L.value)),1)]),((G=e.sale)==null?void 0:G.discount)>0?(a(),o("div",ns,[i[6]||(i[6]=t("span",{class:"text-slate-600"},"Diskon Transaksi",-1)),t("span",os,"-"+s(u((V=e.sale)==null?void 0:V.discount)),1)])):r("",!0),((H=e.sale)==null?void 0:H.event_discount)>0?(a(),o("div",is,[i[7]||(i[7]=t("span",{class:"text-slate-600"},"Diskon Event",-1)),t("span",ds,"-"+s(u((J=e.sale)==null?void 0:J.event_discount)),1)])):r("",!0),((U=e.sale)==null?void 0:U.shipping_cost)>0?(a(),o("div",rs,[i[8]||(i[8]=t("span",{class:"text-slate-600"},"Ongkos Kirim",-1)),t("span",null,s(u((Q=e.sale)==null?void 0:Q.shipping_cost)),1)])):r("",!0),((W=e.sale)==null?void 0:W.other_cost)>0?(a(),o("div",cs,[i[9]||(i[9]=t("span",{class:"text-slate-600"},"Biaya Lainnya",-1)),t("span",null,s(u((Y=e.sale)==null?void 0:Y.other_cost)),1)])):r("",!0),t("div",us,[i[10]||(i[10]=t("span",{class:"font-bold"},"TOTAL",-1)),t("span",xs,s(u((Z=e.sale)==null?void 0:Z.grand_total)),1)])])]),t("div",ps,[t("div",null,[i[11]||(i[11]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase mb-2"},"Pembayaran",-1)),t("p",ms,s((v=e.sale)==null?void 0:v.payment_type),1)]),t("div",null,[i[12]||(i[12]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase mb-2"},"Pengiriman",-1)),t("p",bs,s(b.value),1)])]),((lt=e.sale)==null?void 0:lt.shipping_type)!=="pickup"?(a(),o("div",fs,[i[16]||(i[16]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase mb-4"},"Informasi Pengiriman",-1)),t("div",gs,[t("div",null,[i[13]||(i[13]=t("p",{class:"text-xs font-bold text-slate-400 uppercase mb-1"},"Pengirim:",-1)),t("p",hs,s(((X=e.sale)==null?void 0:X.sender_name)||"-"),1),t("p",ys,s(((tt=e.sale)==null?void 0:tt.sender_phone)||"-"),1)]),t("div",null,[i[14]||(i[14]=t("p",{class:"text-xs font-bold text-slate-400 uppercase mb-1"},"Penerima:",-1)),t("p",ks,s(((F=e.sale)==null?void 0:F.shipping_name)||"-"),1),t("p",vs,s(((et=e.sale)==null?void 0:et.shipping_phone)||"-"),1)])]),t("div",ws,[i[15]||(i[15]=t("p",{class:"text-xs font-bold text-slate-400 uppercase mb-1"},"Alamat Pengiriman:",-1)),t("p",$s,s(((rt=e.sale)==null?void 0:rt.shipping_address)||"-"),1)])])):r("",!0),(ct=e.sale)!=null&&ct.notes?(a(),o("div",_s,[i[17]||(i[17]=t("h3",{class:"text-sm font-bold text-slate-500 uppercase mb-2"},"Catatan",-1)),t("p",Ds,s((ut=e.sale)==null?void 0:ut.notes),1)])):r("",!0),i[18]||(i[18]=t("div",{class:"text-center text-sm text-slate-500 mt-8 pt-4 border-t border-slate-200"},[t("p",null,"Terima kasih atas kepercayaan Anda"),t("p",{class:"text-xs mt-1"},"Dokumen ini dicetak secara otomatis oleh sistem")],-1))])}}},Ps=dt(Is,[["__scopeId","data-v-59c15f92"]]),js={class:"mb-6"},Ss={class:"flex items-center justify-between"},Ts={class:"flex items-center gap-3"},As={class:"text-sm text-slate-500 dark:text-slate-400"},Ns={class:"flex gap-2"},Os={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},zs={class:"lg:col-span-1 space-y-6"},Cs={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Ls={class:"space-y-4"},Rs={class:"font-medium text-slate-900 dark:text-white"},Es={class:"font-medium text-slate-900 dark:text-white"},Ks={class:"text-sm text-slate-500"},qs={class:"font-medium text-slate-900 dark:text-white"},Fs={class:"font-medium text-slate-900 dark:text-white"},Bs={key:0},Ms={class:"font-medium text-green-600 dark:text-green-400"},Gs={key:1,class:"p-3 bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20 rounded-xl mb-4"},Vs={class:"flex items-center gap-2 text-amber-700 dark:text-amber-400 font-bold text-xs uppercase mb-2"},Hs={class:"space-y-2"},Js={class:"text-sm font-medium text-slate-900 dark:text-white"},Us={class:"text-sm font-bold text-slate-900 dark:text-white"},Qs={class:"pt-4 border-t border-slate-100 dark:border-slate-800 space-y-4"},Ws={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 uppercase mt-1"},Ys={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 uppercase mt-1"},Zs={key:2,class:"pt-4 border-t border-slate-100 dark:border-slate-800 space-y-4"},Xs={class:"grid grid-cols-2 gap-4"},tl={class:"text-sm font-medium text-slate-900 dark:text-white"},el={class:"text-xs text-slate-500"},sl={class:"text-sm font-medium text-slate-900 dark:text-white"},ll={class:"text-xs text-slate-500"},al={class:"pt-4 border-t border-slate-50 dark:border-slate-800/50"},nl={class:"text-sm text-slate-900 dark:text-white mt-1"},ol={class:"lg:col-span-2"},il={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},dl={class:"overflow-x-auto"},rl={class:"w-full"},cl={class:"divide-y divide-slate-100 dark:divide-slate-800"},ul={class:"px-6 py-4"},xl={class:"flex flex-col"},pl={class:"font-medium text-slate-900 dark:text-white flex items-center gap-2"},ml={key:0,class:"text-purple-600 font-bold"},bl={class:"text-xs text-slate-500"},fl={key:0,class:"mt-2 pl-4 border-l-2 border-slate-100 dark:border-slate-800 space-y-1"},gl={class:"px-6 py-4 text-right text-slate-600 dark:text-slate-400"},hl={class:"px-6 py-4 text-center text-slate-900 dark:text-white font-medium"},yl={class:"px-6 py-4 text-right text-slate-900 dark:text-white font-bold"},kl={class:"border-t border-slate-100 dark:border-slate-800"},vl={class:"px-6 py-2 text-right font-semibold text-slate-900 dark:text-white"},wl={class:"px-6 py-2 text-right font-semibold text-slate-900 dark:text-white"},$l={class:"px-6 py-2 text-right font-semibold text-slate-900 dark:text-white"},_l={key:0},Dl={class:"px-6 py-2 text-right font-semibold text-danger-500"},Il={key:1},Pl={class:"px-6 py-2 text-right font-semibold text-purple-600"},jl={class:"bg-slate-50 dark:bg-slate-800/30"},Sl={class:"px-6 py-4 text-right font-black text-primary-600 dark:text-primary-400 text-lg"},Tl={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},Al={class:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Nl={class:"flex gap-3 mb-6"},Ol=["onClick"],zl={class:"font-semibold text-slate-800 dark:text-white"},Cl={class:"text-xs text-slate-500"},Ll={class:"bg-slate-100 dark:bg-slate-800 p-4 rounded-xl mb-4 overflow-x-auto max-h-96"},Rl={class:"flex justify-end gap-3"},ot="TOKO ANDA",bt="",it="",Zl={__name:"Show",props:{sale:Object},setup(e){const _=e,u=at(!1),D=at(null),m=at("80mm"),L=[{id:"58mm",name:"Struk 58mm",description:"Thermal printer kecil",icon:nt},{id:"80mm",name:"Struk 80mm",description:"Thermal printer standar",icon:nt},{id:"invoice",name:"Invoice A4",description:"Kertas ukuran penuh",icon:Pt}],p=x=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(x),b=(x,l)=>typeof window<"u"&&window.route?window.route(x,l):"#",c=()=>{confirm("Finalisasi transaksi? Stok akan dikurangi dan transaksi akan dikunci.")&&vt.post(b("sales.finalize",_.sale.id))},i=()=>{var w,$;const x=window.open("","_blank"),l=(($=(w=D.value)==null?void 0:w.$el)==null?void 0:$.outerHTML)||"",n={"58mm":"@page { size: 58mm auto; margin: 0; }","80mm":"@page { size: 80mm auto; margin: 0; }",invoice:"@page { size: A4; margin: 10mm; }"},k=m.value==="invoice";x.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
            <title>${k?"Invoice":"Struk"} - ${_.sale.invoice}</title>
            <style>
                * { margin: 0; padding: 0; box-sizing: border-box; }
                body { font-family: ${k?"Arial, sans-serif":"monospace"}; font-size: ${k?"11pt":"10pt"}; }
                .sales-receipt, .sales-receipt-58 { padding: 2mm; }
                .sales-invoice { padding: 10mm; }
                .text-center { text-align: center; }
                .text-right { text-align: right; }
                .text-left { text-align: left; }
                .text-xs { font-size: 9pt; }
                .text-sm { font-size: 10pt; }
                .text-lg { font-size: 14pt; }
                .text-xl { font-size: 16pt; }
                .text-2xl { font-size: 18pt; }
                .font-bold { font-weight: bold; }
                .font-semibold { font-weight: 600; }
                .font-medium { font-weight: 500; }
                .mb-1 { margin-bottom: 2mm; }
                .mb-2, .mb-6 { margin-bottom: 4mm; }
                .mb-8 { margin-bottom: 8mm; }
                .my-1 { margin-top: 2mm; margin-bottom: 2mm; }
                .mt-2, .mt-8 { margin-top: 4mm; }
                .p-4, .p-8 { padding: 4mm; }
                .py-2, .py-3 { padding-top: 2mm; padding-bottom: 2mm; }
                .px-4 { padding-left: 4mm; padding-right: 4mm; }
                .pl-2 { padding-left: 4mm; }
                .pb-4 { padding-bottom: 4mm; }
                .pt-4 { padding-top: 4mm; }
                .truncate { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
                .flex { display: flex; }
                .grid { display: grid; }
                .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
                .gap-8 { gap: 8mm; }
                .justify-between { justify-content: space-between; }
                .justify-end { justify-content: flex-end; }
                .items-start { align-items: flex-start; }
                .uppercase { text-transform: uppercase; }
                .border-b, .border-t { border-style: solid; border-color: #e2e8f0; }
                .border-b { border-bottom-width: 1px; }
                .border-b-2 { border-bottom-width: 2px; }
                .border-t { border-top-width: 1px; }
                .border-slate-200 { border-color: #e2e8f0; }
                .border-slate-800 { border-color: #1e293b; }
                .bg-slate-100 { background-color: #f1f5f9; }
                .bg-slate-800 { background-color: #1e293b; color: white; }
                .bg-slate-50 { background-color: #f8fafc; }
                .bg-yellow-50 { background-color: #fefce8; }
                .text-slate-500, .text-slate-600 { color: #64748b; }
                .text-slate-700, .text-slate-800 { color: #334155; }
                .text-red-500 { color: #ef4444; }
                .text-green-600 { color: #16a34a; }
                .text-yellow-600 { color: #ca8a04; }
                .text-purple-500, .text-purple-600 { color: #9333ea; }
                .text-primary-600 { color: #0891b2; }
                .rounded-lg { border-radius: 4mm; }
                .w-80 { width: 80mm; }
                .w-full { width: 100%; }
                pre { font-family: monospace; margin: 0; white-space: pre-wrap; }
                table { width: 100%; border-collapse: collapse; }
                th, td { padding: 2mm; }
                @media print { ${n[m.value]} }
            </style>
        </head>
        <body>${l}</body>
        </html>
    `),x.document.close(),x.onload=()=>{x.print(),x.onafterprint=()=>x.close()}};return(x,l)=>(a(),C(It,null,{default:gt(()=>{var n,k,w,$;return[B(g(ht),{title:"Detail Transaksi"}),t("div",js,[t("div",Ss,[t("div",null,[t("div",Ts,[l[3]||(l[3]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Detail Transaksi",-1)),t("span",{class:E(["px-2 py-1 rounded-full text-xs font-semibold",e.sale.status==="finalized"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"])},s(e.sale.status==="finalized"?"Finalized":"Draft"),3)]),t("p",As," No. Transaksi: "+s(e.sale.invoice),1)]),t("div",Ns,[B(M,{onClick:l[0]||(l[0]=d=>u.value=!0),icon:g(mt),class:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/30",label:"Cetak"},null,8,["icon"]),e.sale.status==="draft"?(a(),C(M,{key:0,onClick:c,icon:g($t),class:"bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-600/30",label:"Finalisasi"},null,8,["icon"])):r("",!0),e.sale.status==="draft"?(a(),C(M,{key:1,type:"link",icon:g(_t),class:"bg-amber-500 hover:bg-amber-600 text-white shadow-lg shadow-amber-500/30",label:"Edit",href:b("sales.edit",e.sale.id)},null,8,["icon","href"])):r("",!0),B(M,{type:"link",icon:g(wt),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:b("sales.index")},null,8,["icon","href"])])])]),t("div",Os,[t("div",zs,[t("div",Cs,[l[18]||(l[18]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Ringkasan",-1)),t("div",Ls,[t("div",null,[l[4]||(l[4]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Tanggal",-1)),t("p",Rs,s(new Date(e.sale.created_at).toLocaleString("id-ID")),1)]),t("div",null,[l[5]||(l[5]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Customer",-1)),t("p",Es,s(((n=e.sale.customer)==null?void 0:n.name)||"-"),1),t("p",Ks,s(((k=e.sale.customer)==null?void 0:k.phone)||""),1)]),t("div",null,[l[6]||(l[6]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Gudang",-1)),t("p",qs,s(((w=e.sale.warehouse)==null?void 0:w.name)||"-"),1)]),t("div",null,[l[7]||(l[7]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Dibuat Oleh",-1)),t("p",Fs,s(($=e.sale.user)==null?void 0:$.name),1)]),e.sale.finalized_at?(a(),o("div",Bs,[l[8]||(l[8]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Selesai Pada",-1)),t("p",Ms,s(new Date(e.sale.finalized_at).toLocaleString("id-ID")),1)])):r("",!0),e.sale.is_preorder?(a(),o("div",Gs,[t("div",Vs,[B(g(nt),{size:16}),l[9]||(l[9]=st(" Informasi Pre-Order ",-1))]),t("div",Hs,[t("div",null,[l[10]||(l[10]=t("p",{class:"text-[10px] text-slate-500 uppercase"},"Status PO",-1)),t("p",{class:E(["text-sm font-bold",e.sale.preorder_status==="ready"?"text-success-600":"text-amber-600"])},s(e.sale.preorder_status==="ready"?"STOK SIAP":"MENUNGGU STOK"),3)]),t("div",null,[l[11]||(l[11]=t("p",{class:"text-[10px] text-slate-500 uppercase"},"Est. Ready",-1)),t("p",Js,s(e.sale.estimated_ready_date?new Date(e.sale.estimated_ready_date).toLocaleDateString("id-ID"):"-"),1)]),t("div",null,[l[12]||(l[12]=t("p",{class:"text-[10px] text-slate-500 uppercase"},"DP / Terbayar",-1)),t("p",Us,s(p(e.sale.paid_amount)),1)])])])):r("",!0),t("div",Qs,[t("div",null,[l[13]||(l[13]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Tipe Pembayaran",-1)),t("span",Ws,s(e.sale.payment_type),1)]),t("div",null,[l[14]||(l[14]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Jenis Pengiriman",-1)),t("span",Ys,s(e.sale.shipping_type==="pickup"?"Ambil di Gudang":e.sale.shipping_type==="cod"?"COD":"Jasa Kirim"),1)])]),e.sale.shipping_type!=="pickup"?(a(),o("div",Zs,[t("div",Xs,[t("div",null,[l[15]||(l[15]=t("h4",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2"},"PENGIRIM",-1)),t("p",tl,s(e.sale.sender_name||"-"),1),t("p",el,s(e.sale.sender_phone||"-"),1)]),t("div",null,[l[16]||(l[16]=t("h4",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2"},"PENERIMA",-1)),t("p",sl,s(e.sale.shipping_name||"-"),1),t("p",ll,s(e.sale.shipping_phone||"-"),1)])]),t("div",al,[l[17]||(l[17]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Alamat Pengiriman",-1)),t("p",nl,s(e.sale.shipping_address||"-"),1)])])):r("",!0)])])]),t("div",ol,[t("div",il,[l[27]||(l[27]=t("div",{class:"p-6 border-b border-slate-100 dark:border-slate-800"},[t("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Daftar Item")],-1)),t("div",dl,[t("table",rl,[l[26]||(l[26]=t("thead",null,[t("tr",{class:"bg-slate-50 dark:bg-slate-800/50 text-left text-xs font-bold text-slate-500 uppercase tracking-wider"},[t("th",{class:"px-6 py-4"},"Produk"),t("th",{class:"px-6 py-4 text-right"},"Harga Jual"),t("th",{class:"px-6 py-4 text-right"},"Diskon"),t("th",{class:"px-6 py-4 text-center"},"Qty"),t("th",{class:"px-6 py-4 text-right"},"Subtotal")])],-1)),t("tbody",cl,[(a(!0),o(K,null,q(e.sale.details,d=>(a(),o("tr",{key:d.id,class:"text-sm"},[t("td",ul,[t("div",xl,[t("span",pl,[d.bundle_id?(a(),o("span",ml,"[B]")):r("",!0),st(" "+s(d.bundle_id?d.bundle.name:d.product.title),1)]),t("span",bl,s(d.bundle_id?d.bundle.code:d.product.barcode),1),d.bundle_id?(a(),o("div",fl,[(a(!0),o(K,null,q(d.bundle.items,f=>(a(),o("div",{key:f.id,class:"text-[10px] text-slate-500 flex items-center gap-1"},[l[19]||(l[19]=t("span",{class:"w-1 h-1 rounded-full bg-slate-300"},null,-1)),st(" "+s(f.product.title)+" ("+s(f.qty)+"x) ",1)]))),128))])):r("",!0)])]),t("td",gl,s(p(d.sell_price)),1),t("td",{class:E(["px-6 py-4 text-right",d.discount>0?"text-danger-500":"text-slate-400"])},s(d.discount>0?"-"+p(d.discount):"-"),3),t("td",hl,s(d.qty),1),t("td",yl,s(p(d.sell_price*d.qty-(d.discount||0))),1)]))),128))]),t("tfoot",null,[t("tr",kl,[l[20]||(l[20]=t("td",{colspan:"4",class:"px-6 py-2 text-right text-slate-500 font-medium"},"Subtotal Item",-1)),t("td",vl,s(p(e.sale.details.reduce((d,f)=>d+f.sell_price*f.qty-(f.discount||0),0))),1)]),t("tr",null,[l[21]||(l[21]=t("td",{colspan:"4",class:"px-6 py-2 text-right text-slate-500 font-medium"},"Ongkos Kirim",-1)),t("td",wl,s(p(e.sale.shipping_cost)),1)]),t("tr",null,[l[22]||(l[22]=t("td",{colspan:"4",class:"px-6 py-2 text-right text-slate-500 font-medium"},"Biaya Lainnya",-1)),t("td",$l,s(p(e.sale.other_cost)),1)]),e.sale.discount>0?(a(),o("tr",_l,[l[23]||(l[23]=t("td",{colspan:"4",class:"px-6 py-2 text-right text-slate-500 font-medium"},"Diskon",-1)),t("td",Dl," -"+s(p(e.sale.discount)),1)])):r("",!0),e.sale.event_discount>0?(a(),o("tr",Il,[l[24]||(l[24]=t("td",{colspan:"4",class:"px-6 py-2 text-right text-slate-500 font-medium"},"Diskon Event",-1)),t("td",Pl," -"+s(p(e.sale.event_discount)),1)])):r("",!0),t("tr",jl,[l[25]||(l[25]=t("td",{colspan:"4",class:"px-6 py-4 text-right font-bold text-slate-600 dark:text-slate-400"},"TOTAL AKHIR",-1)),t("td",Sl,s(p(e.sale.grand_total)),1)])])])])])])]),(a(),C(yt,{to:"body"},[u.value?(a(),o("div",Tl,[t("div",{class:"absolute inset-0 bg-slate-900/60",onClick:l[1]||(l[1]=d=>u.value=!1)}),t("div",Al,[l[28]||(l[28]=t("h3",{class:"text-lg font-bold text-slate-800 dark:text-white mb-4"},"Cetak Dokumen",-1)),t("div",Nl,[(a(),o(K,null,q(L,d=>t("button",{key:d.id,onClick:f=>m.value=d.id,class:E(["flex-1 p-4 rounded-xl border-2 transition-all text-left",m.value===d.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"])},[(a(),C(kt(d.icon),{size:24,class:E(["mb-2",m.value===d.id?"text-primary-600":"text-slate-500"])},null,8,["class"])),t("p",zl,s(d.name),1),t("p",Cl,s(d.description),1)],10,Ol)),64))]),t("div",Ll,[m.value==="58mm"?(a(),C(Se,{key:0,ref_key:"receiptRef",ref:D,sale:e.sale,storeName:ot,storePhone:it},null,8,["sale"])):m.value==="80mm"?(a(),C(pe,{key:1,ref_key:"receiptRef",ref:D,sale:e.sale,storeName:ot,storeAddress:bt,storePhone:it},null,8,["sale"])):(a(),C(Ps,{key:2,ref_key:"receiptRef",ref:D,sale:e.sale,storeName:ot,storeAddress:bt,storePhone:it},null,8,["sale"]))]),t("div",Rl,[B(M,{type:"button",label:"Tutup",class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300",onClick:l[2]||(l[2]=d=>u.value=!1)}),B(M,{type:"button",icon:g(mt),label:"Cetak",class:"bg-blue-600 hover:bg-blue-700 text-white",onClick:i},null,8,["icon"])])])])):r("",!0)]))]}),_:1}))}};export{Zl as default};
