import{r as I,T as R,a as u,c as T,w as a,b as l,u as r,Z as J,d as t,e as n,t as d,k as g,x as h,g as m,p as j,F as D,n as X,h as Z,v as $,f as G,O as B}from"./app-DA0EYa_6.js";import{I as H}from"./IconArrowLeft-gRB0gwWT.js";import{I as Q}from"./IconCheck--wdzxov0.js";import{I as U}from"./IconPlus-CZBZv6OX.js";import{I as W}from"./IconX-JXYWA-GE.js";import{_ as Y}from"./DashboardLayout-DqHF1oae.js";import{_ as k}from"./Button-mcRGNCmf.js";import{_ as ee}from"./Table-CzIMA27R.js";import{_ as te}from"./TableCard-BYxyxo2i.js";import{_ as se,a as le}from"./TableTbody-BBPwPiVX.js";import{_ as x,a as p}from"./TableTh-CVR3I-fd.js";import{_ as ae}from"./Pagination-B8BHcZ6z.js";import{_ as re}from"./Modal-BevHxW0g.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";import"./IconChevronRight-QKrPJlsB.js";const ne={class:"mb-6"},oe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ie={class:"text-sm text-slate-500 dark:text-slate-400"},de={class:"font-bold text-emerald-600"},ue={class:"flex gap-2"},me={class:"mb-4 flex flex-wrap gap-4"},pe=["value"],fe={class:"px-2 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700"},be={key:0,class:"flex items-center justify-center gap-1"},xe=["onClick"],ge=["onClick"],ce={key:1,class:"text-slate-400 text-xs"},ve={key:1},ke={class:"space-y-4"},ye={class:"grid grid-cols-2 gap-4"},we=["value"],_e={class:"grid grid-cols-2 gap-4"},Ce={class:"relative"},Se=["value"],Ie={class:"flex justify-end gap-3 mt-6"},Je={__name:"Expenses",props:{activePettyCash:Object,remainingBalance:Number,expenses:Object,categories:Object,filters:Object},setup(f){var P,V;const y=f,c=I(!1),w=I(((P=y.filters)==null?void 0:P.category)||""),_=I(((V=y.filters)==null?void 0:V.status)||""),C=y.categories,i=R({date:new Date().toISOString().slice(0,10),category:"",amount:"",description:"",receipt_number:""}),F=o=>o?o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"",A=o=>o.replace(/\./g,"").replace(/[^0-9]/g,""),K=()=>{B.get(v("petty-cash.expenses"),{category:w.value,status:_.value},{preserveState:!0})},E=()=>{i.post(v("petty-cash.expenses.store"),{onSuccess:()=>{c.value=!1,i.reset()}})},q=o=>{B.post(v("petty-cash.expenses.approve",o))},M=o=>{B.post(v("petty-cash.expenses.reject",o))},z=o=>o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",S=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o||0),v=(o,e)=>typeof window<"u"&&window.route?window.route(o,e):"#";return(o,e)=>(u(),T(Y,null,{default:a(()=>{var N,O;return[l(r(J),{title:"Pengeluaran Kas Kecil"}),t("div",ne,[t("div",oe,[t("div",null,[e[11]||(e[11]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Pengeluaran Kas Kecil",-1)),t("p",ie,[e[10]||(e[10]=n(" Sisa: ",-1)),t("span",de,d(S(f.remainingBalance)),1),n(" dari "+d(S(((N=f.activePettyCash)==null?void 0:N.amount)||0)),1)])]),t("div",ue,[l(k,{type:"link",icon:r(H),class:"bg-white border border-slate-200 text-slate-700",label:"Kembali",href:v("petty-cash.index")},null,8,["icon","href"]),l(k,{type:"button",onClick:e[0]||(e[0]=s=>c.value=!0),icon:r(U),class:"bg-primary-500 hover:bg-primary-600 text-white",label:"Tambah Pengeluaran"},null,8,["icon"])])])]),t("div",me,[g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),onChange:K,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm"},[e[12]||(e[12]=t("option",{value:""},"Semua Kategori",-1)),(u(!0),m(D,null,j(r(C),(s,b)=>(u(),m("option",{key:b,value:b},d(s),9,pe))),128))],544),[[h,w.value]]),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>_.value=s),onChange:K,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm"},[...e[13]||(e[13]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Disetujui",-1),t("option",{value:"rejected"},"Ditolak",-1)])],544),[[h,_.value]])]),l(te,{title:"Daftar Pengeluaran"},{default:a(()=>[l(ee,null,{default:a(()=>[l(se,null,{default:a(()=>[t("tr",null,[l(x,null,{default:a(()=>[...e[14]||(e[14]=[n("Referensi",-1)])]),_:1}),l(x,null,{default:a(()=>[...e[15]||(e[15]=[n("Tanggal",-1)])]),_:1}),l(x,null,{default:a(()=>[...e[16]||(e[16]=[n("Kategori",-1)])]),_:1}),l(x,null,{default:a(()=>[...e[17]||(e[17]=[n("Keterangan",-1)])]),_:1}),l(x,null,{default:a(()=>[...e[18]||(e[18]=[n("No. Bon",-1)])]),_:1}),l(x,{class:"text-right"},{default:a(()=>[...e[19]||(e[19]=[n("Jumlah",-1)])]),_:1}),l(x,null,{default:a(()=>[...e[20]||(e[20]=[n("Status",-1)])]),_:1}),l(x,{class:"text-center"},{default:a(()=>[...e[21]||(e[21]=[n("Aksi",-1)])]),_:1})])]),_:1}),l(le,null,{default:a(()=>[f.expenses.data.length>0?(u(!0),m(D,{key:0},j(f.expenses.data,s=>(u(),m("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50"},[l(p,{class:"font-mono font-bold text-primary-600"},{default:a(()=>[n(d(s.reference),1)]),_:2},1024),l(p,null,{default:a(()=>[n(d(z(s.date)),1)]),_:2},1024),l(p,null,{default:a(()=>[t("span",fe,d(r(C)[s.category]||s.category),1)]),_:2},1024),l(p,{class:"max-w-[200px] truncate"},{default:a(()=>[n(d(s.description),1)]),_:2},1024),l(p,{class:"font-mono text-slate-500"},{default:a(()=>[n(d(s.receipt_number||"-"),1)]),_:2},1024),l(p,{class:"text-right font-mono text-red-600"},{default:a(()=>[n("-"+d(S(s.amount)),1)]),_:2},1024),l(p,null,{default:a(()=>[t("span",{class:X(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="approved"?"bg-green-100 text-green-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"])},d(s.status==="approved"?"Disetujui":s.status==="rejected"?"Ditolak":"Pending"),3)]),_:2},1024),l(p,{class:"text-center"},{default:a(()=>{var b;return[s.status==="pending"?(u(),m("div",be,[t("button",{onClick:L=>q(s.id),class:"p-1.5 rounded-lg hover:bg-green-50 text-green-600",title:"Setujui"},[l(r(Q),{size:18})],8,xe),t("button",{onClick:L=>M(s.id),class:"p-1.5 rounded-lg hover:bg-red-50 text-red-600",title:"Tolak"},[l(r(W),{size:18})],8,ge)])):(u(),m("span",ce,d((b=s.approver)==null?void 0:b.name),1))]}),_:2},1024)]))),128)):(u(),m("tr",ve,[l(p,{colspan:"8",class:"text-center py-8"},{default:a(()=>[...e[22]||(e[22]=[t("p",{class:"text-slate-500"},"Belum ada pengeluaran",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1}),(O=f.expenses)!=null&&O.links&&f.expenses.links.length>3?(u(),T(ae,{key:0,links:f.expenses.links},null,8,["links"])):Z("",!0),l(re,{show:c.value,onClose:e[9]||(e[9]=s=>c.value=!1)},{default:a(()=>[t("form",{onSubmit:G(E,["prevent"]),class:"p-6"},[e[30]||(e[30]=t("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"Tambah Pengeluaran",-1)),t("div",ke,[t("div",ye,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[n(" Tanggal "),t("span",{class:"text-red-500"},"*")],-1)),g(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>r(i).date=s),required:"",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[$,r(i).date]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[n(" Kategori "),t("span",{class:"text-red-500"},"*")],-1)),g(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>r(i).category=s),required:"",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},[e[24]||(e[24]=t("option",{value:""},"-- Pilih --",-1)),(u(!0),m(D,null,j(r(C),(s,b)=>(u(),m("option",{key:b,value:b},d(s),9,we))),128))],512),[[h,r(i).category]])])]),t("div",_e,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[n(" Jumlah "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Ce,[e[26]||(e[26]=t("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"},"Rp",-1)),t("input",{type:"text",value:F(r(i).amount),onInput:e[5]||(e[5]=s=>r(i).amount=A(s.target.value)),required:"",class:"w-full pl-12 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-right font-mono",placeholder:"0"},null,40,Se)])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"No. Bon/Kuitansi",-1)),g(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=s=>r(i).receipt_number=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",placeholder:"Opsional"},null,512),[[$,r(i).receipt_number]])])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[n(" Keterangan "),t("span",{class:"text-red-500"},"*")],-1)),g(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=s=>r(i).description=s),required:"",rows:"2",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",placeholder:"Untuk keperluan apa..."},null,512),[[$,r(i).description]])])]),t("div",Ie,[l(k,{type:"button",onClick:e[8]||(e[8]=s=>c.value=!1),label:"Batal",class:"bg-slate-100 text-slate-700"}),l(k,{type:"submit",icon:r(U),label:"Simpan",class:"bg-primary-500 text-white",disabled:r(i).processing},null,8,["icon","disabled"])])],32)]),_:1},8,["show"])]}),_:1}))}};export{Je as default};
