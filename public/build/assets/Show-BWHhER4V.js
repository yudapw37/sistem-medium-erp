import{A as k,a as l,c as F,w as N,b as g,u as f,Z as O,d as t,t as a,e as u,g as d,p as j,F as m,h as B}from"./app-CIYeQ-4j.js";import{I as E}from"./IconArrowLeft-D_cLVqwd.js";import{I as A}from"./IconPrinter-ViNqmzsS.js";import{_ as C}from"./DashboardLayout-CDE7-Y8V.js";import{_ as K}from"./Button-CxuUSqWK.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";const P={class:"mb-6"},L={class:"flex items-center justify-between"},M={class:"text-sm text-slate-500 dark:text-slate-400"},S={class:"flex gap-2"},Q=["href"],R={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},U={class:"lg:col-span-1 space-y-6"},V={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},$={class:"space-y-4"},G={class:"font-bold text-primary-600 dark:text-primary-400 text-lg"},H={class:"font-medium text-slate-900 dark:text-white"},q={class:"font-medium text-slate-900 dark:text-white"},z={class:"pt-4 border-t border-slate-100 dark:border-slate-800 space-y-4"},Z={class:"grid grid-cols-2 gap-4"},J={class:"text-sm font-medium text-slate-900 dark:text-white"},W={class:"text-xs text-slate-500"},X={class:"text-sm font-medium text-slate-900 dark:text-white"},Y={class:"text-xs text-slate-500"},tt={class:"pt-4 border-t border-slate-50 dark:border-slate-800/50"},et={class:"text-sm text-slate-900 dark:text-white mt-1"},st={class:"text-xs text-slate-500 mt-1"},at={class:"pt-4 border-t border-slate-100 dark:border-slate-800 space-y-3"},ot={class:"flex justify-between text-sm"},rt={class:"font-medium text-slate-900 dark:text-white"},lt={class:"flex justify-between text-sm"},dt={class:"font-medium text-slate-900 dark:text-white"},nt={class:"flex justify-between text-sm"},it={class:"font-medium text-danger-500"},xt={class:"flex justify-between text-sm"},ct={class:"font-medium text-danger-500"},mt={class:"flex justify-between text-sm"},pt={class:"font-medium text-slate-900 dark:text-white"},ut={class:"flex justify-between text-sm pt-3 border-t border-slate-100 dark:border-slate-800"},ht={class:"font-black text-primary-600 dark:text-primary-400 text-lg"},bt={class:"lg:col-span-2"},kt={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},gt={class:"overflow-x-auto"},ft={class:"w-full"},yt={class:"divide-y divide-slate-100 dark:divide-slate-800"},_t={class:"px-6 py-4 text-slate-500"},wt={class:"px-6 py-4"},vt={class:"font-medium text-slate-900 dark:text-white"},jt={class:"mt-1 pl-3 border-l-2 border-slate-200 dark:border-slate-700 space-y-0.5"},Bt={key:1,class:"font-medium text-slate-900 dark:text-white"},Dt={class:"px-6 py-4 text-center text-slate-900 dark:text-white font-medium"},It={class:"px-6 py-4 text-right text-slate-600 dark:text-slate-400"},Tt={class:"px-6 py-4 text-right text-slate-600 dark:text-slate-400"},Ft={class:"px-6 py-4 text-right"},Nt={key:0,class:"text-danger-500 font-medium"},Ot={key:1,class:"text-slate-400"},Et={class:"px-6 py-4 text-right text-slate-900 dark:text-white font-bold"},At={key:0},Ct={class:"bg-slate-50 dark:bg-slate-800/30"},Kt={class:"px-6 py-4 text-right font-black text-primary-600 dark:text-primary-400 text-lg"},Pt={key:0,class:"p-12 text-center"},zt={__name:"Show",props:{order:Object},setup(o){const p=o,i=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r||0),y=(r,e=null)=>{const s=(e!==null?e:r.nama_promo&&r.nama_promo!=="-"&&r.code_promo&&r.code_promo!=="-")&&r.harga_promo>0?r.harga_promo:r.harga,h=r.jumlah||0;let n=s*h;return r.diskon>0&&(n=n-n*r.diskon/100),n},_=k(()=>{var x;if(!p.order.details)return[];const r=[],e=new Map;for(const s of p.order.details)if(s.nama_promo&&s.nama_promo!=="-"&&s.code_promo&&s.code_promo!=="-"){const n=s.nama_promo;if(!e.has(n)){const b={isBundle:!0,nama_promo:s.nama_promo,harga_promo:s.harga_promo||0,diskon:s.diskon||0,totalQty:0,totalBerat:0,subtotal:0,children:[]};e.set(n,b),r.push(b)}const c=e.get(n);c.children.push(s),c.totalQty+=s.jumlah||0,c.totalBerat+=parseFloat(((x=s.barang)==null?void 0:x.berat)||0)*(s.jumlah||0),c.subtotal+=y(s,!0)}else r.push({...s,isBundle:!1,subtotal:y(s,!1)});return r}),D=k(()=>_.value.reduce((r,e)=>r+e.subtotal,0)),I=k(()=>{const r=parseFloat(p.order.total_harga)||0,e=parseFloat(p.order.totalDiskon)||0,x=parseFloat(p.order.diskonKodeUnik)||0,s=parseFloat(p.order.biayaExpedisi)||0;return r-e-x+s}),w=(r,e)=>typeof window<"u"&&window.route?window.route(r,e):"#";return(r,e)=>(l(),F(C,null,{default:N(()=>{var x;return[g(f(O),{title:`Detail Old Order #${o.order.id}`},null,8,["title"]),t("div",P,[t("div",L,[t("div",null,[e[0]||(e[0]=t("div",{class:"flex items-center gap-3"},[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Detail Old Order")],-1)),t("p",M," Code Order: "+a(o.order.id),1)]),t("div",S,[g(K,{type:"link",icon:f(E),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:w("old-orders.index")},null,8,["icon","href"]),t("a",{href:w("old-orders.print",o.order.id),target:"_blank",class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold bg-primary-500 text-white hover:bg-primary-600 transition-all"},[g(f(A),{size:18}),e[1]||(e[1]=u(" Cetak Invoice ",-1))],8,Q)])])]),t("div",R,[t("div",U,[t("div",V,[e[14]||(e[14]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Informasi Order",-1)),t("div",$,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Code Order",-1)),t("p",G,a(o.order.id),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Customer",-1)),t("p",H,a(((x=o.order.customer)==null?void 0:x.nama)||"-"),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Tanggal",-1)),t("p",q,a(o.order.created_at?new Date(o.order.created_at).toLocaleString("id-ID"):"-"),1)]),t("div",z,[t("div",Z,[t("div",null,[e[5]||(e[5]=t("h4",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2"},"PENGIRIM",-1)),t("p",J,a(o.order.nama_pengirim||"-"),1),t("p",W,a(o.order.telephone_pengirim||"-"),1)]),t("div",null,[e[6]||(e[6]=t("h4",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2"},"PENERIMA",-1)),t("p",X,a(o.order.nama_penerima||"-"),1),t("p",Y,a(o.order.telephone_penerima||"-"),1)])]),t("div",tt,[e[7]||(e[7]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider"},"Alamat",-1)),t("p",et,a(o.order.alamat||"-"),1),t("p",st,a([o.order.kecamatan,o.order.kab_kota].filter(Boolean).join(", ")||"-"),1)])]),t("div",at,[t("div",ot,[e[8]||(e[8]=t("span",{class:"text-slate-500"},"Total Barang",-1)),t("span",rt,a(o.order.total_barang),1)]),t("div",lt,[e[9]||(e[9]=t("span",{class:"text-slate-500"},"Total Harga",-1)),t("span",dt,a(i(o.order.total_harga)),1)]),t("div",nt,[e[10]||(e[10]=t("span",{class:"text-slate-500"},"Total Diskon",-1)),t("span",it,a(o.order.totalDiskon>0?"-"+i(o.order.totalDiskon):"-"),1)]),t("div",xt,[e[11]||(e[11]=t("span",{class:"text-slate-500"},"Diskon Kode Unik",-1)),t("span",ct,a(o.order.diskonKodeUnik>0?"-"+i(o.order.diskonKodeUnik):"-"),1)]),t("div",mt,[e[12]||(e[12]=t("span",{class:"text-slate-500"},"Biaya Expedisi",-1)),t("span",pt,a(i(o.order.biayaExpedisi)),1)]),t("div",ut,[e[13]||(e[13]=t("span",{class:"font-bold text-slate-700 dark:text-slate-300"},"GRAND TOTAL",-1)),t("span",ht,a(i(I.value)),1)])])])])]),t("div",bt,[t("div",kt,[e[19]||(e[19]=t("div",{class:"p-6 border-b border-slate-100 dark:border-slate-800"},[t("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Daftar Item")],-1)),t("div",gt,[t("table",ft,[e[17]||(e[17]=t("thead",null,[t("tr",{class:"bg-slate-50 dark:bg-slate-800/50 text-left text-xs font-bold text-slate-500 uppercase tracking-wider"},[t("th",{class:"px-6 py-4"},"No"),t("th",{class:"px-6 py-4"},"Nama"),t("th",{class:"px-6 py-4 text-center"},"Qty"),t("th",{class:"px-6 py-4 text-right"},"Berat"),t("th",{class:"px-6 py-4 text-right"},"Harga"),t("th",{class:"px-6 py-4 text-right"},"Diskon (%)"),t("th",{class:"px-6 py-4 text-right"},"Subtotal")])],-1)),t("tbody",yt,[(l(!0),d(m,null,j(_.value,(s,h)=>{var n,c;return l(),d("tr",{key:h,class:"text-sm"},[t("td",_t,a(h+1),1),t("td",wt,[s.isBundle?(l(),d(m,{key:0},[t("span",vt,a(s.nama_promo),1),t("div",jt,[(l(!0),d(m,null,j(s.children,(b,T)=>{var v;return l(),d("div",{key:T,class:"text-xs text-slate-400 flex items-center gap-1"},[e[15]||(e[15]=t("span",{class:"w-1 h-1 rounded-full bg-slate-300"},null,-1)),u(" "+a(((v=b.barang)==null?void 0:v.judul_buku)||"-")+" ("+a(b.jumlah)+"x) ",1)])}),128))])],64)):(l(),d("span",Bt,a(((n=s.barang)==null?void 0:n.judul_buku)||"-"),1))]),t("td",Dt,a(s.totalQty||s.jumlah),1),t("td",It,[s.isBundle?(l(),d(m,{key:0},[u(a((s.totalBerat/1e3).toFixed(2))+" kg ",1)],64)):(l(),d(m,{key:1},[u(a(((((c=s.barang)==null?void 0:c.berat)||0)/1e3).toFixed(2))+" kg ",1)],64))]),t("td",Tt,[s.isBundle?(l(),d(m,{key:0},[u(a(i(s.harga_promo)),1)],64)):(l(),d(m,{key:1},[u(a(i(s.harga)),1)],64))]),t("td",Ft,[s.diskon>0?(l(),d("span",Nt,a(s.diskon)+"% ",1)):(l(),d("span",Ot,"-"))]),t("td",Et,a(i(s.subtotal)),1)])}),128))]),o.order.details&&o.order.details.length>0?(l(),d("tfoot",At,[t("tr",Ct,[e[16]||(e[16]=t("td",{colspan:"6",class:"px-6 py-4 text-right font-bold text-slate-600 dark:text-slate-400"}," TOTAL ITEM ",-1)),t("td",Kt,a(i(D.value)),1)])])):B("",!0)])]),!o.order.details||o.order.details.length===0?(l(),d("div",Pt,[...e[18]||(e[18]=[t("p",{class:"text-slate-400"},"Tidak ada detail item.",-1)])])):B("",!0)])])])]}),_:1}))}};export{zt as default};
