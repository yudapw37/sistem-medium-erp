import{r as v,a as n,c as f,w as g,b as r,u as i,Z as _,d as t,t as a,h as c,g as b,p as C,F as B,O as j}from"./app-CIYeQ-4j.js";import{g as A,_ as P}from"./DashboardLayout-CDE7-Y8V.js";import{I as K}from"./IconArrowLeft-D_cLVqwd.js";import{I as y}from"./IconLock-3pTrw-Ry.js";import{_ as m}from"./Button-CxuUSqWK.js";import{_ as T}from"./Modal-BK6JeM5l.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";const I={class:"mb-6"},N={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},S={class:"text-sm text-slate-500 dark:text-slate-400"},D={class:"flex gap-2"},E={key:0,class:"mb-6 bg-amber-50 border border-amber-200 rounded-2xl p-4"},$={class:"flex items-center gap-3"},F={class:"font-semibold text-amber-700"},L={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},O={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},V={class:"text-2xl font-bold font-mono text-slate-900 dark:text-white"},R={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},z={class:"text-2xl font-bold font-mono text-red-600"},J={class:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl p-6 text-white"},M={class:"text-2xl font-bold font-mono"},Z={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden mb-6"},q={class:"p-6"},G={class:"w-full"},H={class:"py-3 text-slate-700 dark:text-slate-300"},Q={class:"px-2 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700"},U={class:"py-3 text-center text-slate-600"},W={class:"py-3 text-right font-mono text-red-600"},X={key:0},Y={class:"bg-slate-50 dark:bg-slate-800"},tt={class:"font-bold"},et={class:"py-3 text-center"},st={class:"py-3 text-right font-mono text-red-700 px-2"},at={class:"p-6"},ot={class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 mb-4"},lt={class:"flex justify-between mb-2"},nt={class:"font-mono"},rt={class:"flex justify-between mb-2"},dt={class:"font-mono text-red-600"},it={class:"flex justify-between pt-2 border-t border-slate-200 dark:border-slate-700 font-bold"},ut={class:"font-mono text-emerald-600"},bt={class:"flex justify-end gap-3"},Ct={__name:"Settlement",props:{activePettyCash:Object,remainingBalance:Number,totalAmount:Number,totalExpenses:Number,expensesByCategory:Array,pendingCount:Number},setup(s){const d=v(!1),k=()=>{d.value=!0},h=()=>{j.post(x("petty-cash.close"),{},{onSuccess:()=>{d.value=!1}})},o=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u||0),x=(u,e)=>typeof window<"u"&&window.route?window.route(u,e):"#";return(u,e)=>(n(),f(P,null,{default:g(()=>{var p;return[r(i(_),{title:"Pertanggungjawaban Kas Kecil"}),t("div",I,[t("div",N,[t("div",null,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Pertanggungjawaban Kas Kecil",-1)),t("p",S," Periode: "+a((p=s.activePettyCash)==null?void 0:p.reference),1)]),t("div",D,[r(m,{type:"link",icon:i(K),class:"bg-white border border-slate-200 text-slate-700",label:"Kembali",href:x("petty-cash.index")},null,8,["icon","href"]),s.pendingCount===0?(n(),f(m,{key:0,type:"button",onClick:k,icon:i(y),class:"bg-red-500 hover:bg-red-600 text-white",label:"Tutup Periode"},null,8,["icon"])):c("",!0)])])]),s.pendingCount>0?(n(),b("div",E,[t("div",$,[r(i(A),{class:"text-amber-500",size:24}),t("div",null,[t("p",F,"Ada "+a(s.pendingCount)+" pengeluaran yang belum disetujui",1),e[3]||(e[3]=t("p",{class:"text-sm text-amber-600"},"Setujui atau tolak semua pengeluaran sebelum menutup periode.",-1))])])])):c("",!0),t("div",L,[t("div",O,[e[4]||(e[4]=t("p",{class:"text-sm text-slate-500 mb-1"},"Dana Awal",-1)),t("p",V,a(o(s.totalAmount)),1)]),t("div",R,[e[5]||(e[5]=t("p",{class:"text-sm text-slate-500 mb-1"},"Total Pengeluaran",-1)),t("p",z,a(o(s.totalExpenses)),1)]),t("div",J,[e[6]||(e[6]=t("p",{class:"text-emerald-100 text-sm mb-1"},"Sisa Kas",-1)),t("p",M,a(o(s.remainingBalance)),1)])]),t("div",Z,[e[10]||(e[10]=t("div",{class:"px-6 py-4 border-b border-slate-200 dark:border-slate-800"},[t("h3",{class:"font-bold text-slate-900 dark:text-white"},"Rincian per Kategori")],-1)),t("div",q,[t("table",G,[e[9]||(e[9]=t("thead",null,[t("tr",{class:"border-b border-slate-100 dark:border-slate-800"},[t("th",{class:"text-left py-2 text-sm font-semibold text-slate-600"},"Kategori"),t("th",{class:"text-center py-2 text-sm font-semibold text-slate-600"},"Jumlah Transaksi"),t("th",{class:"text-right py-2 text-sm font-semibold text-slate-600"},"Total")])],-1)),t("tbody",null,[(n(!0),b(B,null,C(s.expensesByCategory,l=>(n(),b("tr",{key:l.category,class:"border-b border-slate-50 dark:border-slate-800"},[t("td",H,[t("span",Q,a(l.label),1)]),t("td",U,a(l.count)+" transaksi",1),t("td",W,a(o(l.total)),1)]))),128)),s.expensesByCategory.length===0?(n(),b("tr",X,[...e[7]||(e[7]=[t("td",{colspan:"3",class:"py-8 text-center text-slate-500"},"Belum ada pengeluaran yang disetujui",-1)])])):c("",!0)]),t("tfoot",Y,[t("tr",tt,[e[8]||(e[8]=t("td",{class:"py-3 px-2"},"Total",-1)),t("td",et,a(s.expensesByCategory.reduce((l,w)=>l+w.count,0))+" transaksi",1),t("td",st,a(o(s.totalExpenses)),1)])])])])]),r(T,{show:d.value,onClose:e[1]||(e[1]=l=>d.value=!1)},{default:g(()=>[t("div",at,[e[14]||(e[14]=t("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"Konfirmasi Tutup Periode",-1)),e[15]||(e[15]=t("p",{class:"text-slate-600 dark:text-slate-400 mb-4"}," Apakah Anda yakin ingin menutup periode kas kecil ini? ",-1)),t("div",ot,[t("div",lt,[e[11]||(e[11]=t("span",{class:"text-slate-500"},"Dana Awal",-1)),t("span",nt,a(o(s.totalAmount)),1)]),t("div",rt,[e[12]||(e[12]=t("span",{class:"text-slate-500"},"Total Pengeluaran",-1)),t("span",dt,"-"+a(o(s.totalExpenses)),1)]),t("div",it,[e[13]||(e[13]=t("span",null,"Sisa",-1)),t("span",ut,a(o(s.remainingBalance)),1)])]),e[16]||(e[16]=t("p",{class:"text-amber-600 text-sm mb-6"}," ⚠️ Setelah ditutup, jurnal akuntansi akan otomatis dibuat dan periode tidak dapat dibuka kembali. ",-1)),t("div",bt,[r(m,{type:"button",onClick:e[0]||(e[0]=l=>d.value=!1),label:"Batal",class:"bg-slate-100 text-slate-700"}),r(m,{type:"button",onClick:h,icon:i(y),label:"Tutup Periode",class:"bg-red-500 text-white"},null,8,["icon"])])])]),_:1},8,["show"])]}),_:1}))}};export{Ct as default};
