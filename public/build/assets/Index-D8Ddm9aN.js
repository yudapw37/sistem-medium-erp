import{r as C,a as f,c as S,w as l,b as a,u as i,Z as J,d as e,k as z,x as V,v as j,e as n,g as k,p as P,t as r,n as I,h,F as R,O as $}from"./app-DA0EYa_6.js";import{I as A}from"./IconCheck--wdzxov0.js";import{I as Z}from"./IconEdit-CG94FACO.js";import{I as G}from"./IconEye-Bk7XjJNy.js";import{I as Q}from"./IconLock-Mu8bXaRi.js";import{c as W}from"./createVueComponent-CUBUAVU4.js";import{I as X}from"./IconPlus-CZBZv6OX.js";import{I as B}from"./IconTrash-BZm3hFVP.js";import{_ as Y}from"./DashboardLayout-DqHF1oae.js";import{_ as x}from"./Button-mcRGNCmf.js";import{_ as tt}from"./Search-efVWyAAU.js";import{_ as et}from"./Table-CzIMA27R.js";import{_ as st}from"./TableCard-BYxyxo2i.js";import{_ as at,a as lt}from"./TableTbody-BBPwPiVX.js";import{_ as c,a as m}from"./TableTh-CVR3I-fd.js";import{_ as nt}from"./Pagination-B8BHcZ6z.js";import{_ as N}from"./Modal-BevHxW0g.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";import"./IconSearch-hVNvfgeb.js";import"./IconChevronRight-QKrPJlsB.js";/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ot=W("outline","minus","Minus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]);const it={class:"mb-6"},rt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ut={class:"flex gap-2"},dt={class:"mb-4"},ft={class:"flex flex-col sm:flex-row gap-4 items-center flex-wrap"},mt={class:"w-full sm:w-64"},pt={class:"font-mono font-bold text-primary-600"},bt={class:"flex items-center justify-center gap-1"},ct=["href"],kt=["onClick"],gt=["href"],xt=["onClick"],vt={key:3,class:"text-slate-400",title:"Terkunci"},yt={key:1},_t={class:"p-6"},ht={class:"text-slate-600 dark:text-slate-400 mb-6"},wt={class:"flex justify-end gap-3"},Ct={class:"p-6"},zt={class:"text-slate-600 dark:text-slate-400 mb-6"},It={class:"flex justify-end gap-3"},Wt={__name:"Index",props:{transactions:Object,filters:Object},setup(g){var K,D,F,M;const v=g,u=C({type:((K=v.filters)==null?void 0:K.type)||"",status:((D=v.filters)==null?void 0:D.status)||"",start_date:((F=v.filters)==null?void 0:F.start_date)||"",end_date:((M=v.filters)==null?void 0:M.end_date)||""}),y=C(!1),_=C(!1),p=C(null),w=()=>{var o;$.get(b("cash-transactions.index"),{q:(o=v.filters)==null?void 0:o.q,...u.value},{preserveState:!0})},E=o=>{p.value=o,_.value=!0},L=()=>{$.post(b("cash-transactions.finalize",p.value.id),{},{onSuccess:()=>{_.value=!1,p.value=null}})},O=o=>{p.value=o,y.value=!0},U=()=>{$.delete(b("cash-transactions.destroy",p.value.id),{onSuccess:()=>{y.value=!1,p.value=null}})},H=o=>o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",q=o=>new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(o||0),b=(o,t)=>typeof window<"u"&&window.route?window.route(o,t):"#";return(o,t)=>(f(),S(Y,null,{default:l(()=>{var T;return[a(i(J),{title:"Kas Masuk/Keluar"}),e("div",it,[e("div",rt,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Kas Masuk / Keluar"),e("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Transaksi kas non-penjualan ")],-1)),e("div",ut,[a(x,{type:"link",icon:i(X),class:"bg-green-500 hover:bg-green-600 text-white",label:"Kas Masuk",href:b("cash-transactions.create",{type:"in"})},null,8,["icon","href"]),a(x,{type:"link",icon:i(ot),class:"bg-red-500 hover:bg-red-600 text-white",label:"Kas Keluar",href:b("cash-transactions.create",{type:"out"})},null,8,["icon","href"])])])]),e("div",dt,[e("div",ft,[e("div",mt,[a(tt,{url:b("cash-transactions.index"),placeholder:"Cari referensi..."},null,8,["url"])]),z(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value.type=s),onChange:w,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm"},[...t[9]||(t[9]=[e("option",{value:""},"Semua Tipe",-1),e("option",{value:"in"},"Kas Masuk",-1),e("option",{value:"out"},"Kas Keluar",-1)])],544),[[V,u.value.type]]),z(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>u.value.status=s),onChange:w,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm"},[...t[10]||(t[10]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"finalized"},"Final",-1)])],544),[[V,u.value.status]]),z(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>u.value.start_date=s),onChange:w,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm"},null,544),[[j,u.value.start_date]]),t[11]||(t[11]=e("span",{class:"text-slate-400"},"-",-1)),z(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>u.value.end_date=s),onChange:w,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm"},null,544),[[j,u.value.end_date]])])]),a(st,{title:"Daftar Transaksi Kas"},{default:l(()=>[a(et,null,{default:l(()=>[a(at,null,{default:l(()=>[e("tr",null,[a(c,null,{default:l(()=>[...t[12]||(t[12]=[n("Referensi",-1)])]),_:1}),a(c,null,{default:l(()=>[...t[13]||(t[13]=[n("Tanggal",-1)])]),_:1}),a(c,null,{default:l(()=>[...t[14]||(t[14]=[n("Tipe",-1)])]),_:1}),a(c,null,{default:l(()=>[...t[15]||(t[15]=[n("Status",-1)])]),_:1}),a(c,null,{default:l(()=>[...t[16]||(t[16]=[n("Akun Kas",-1)])]),_:1}),a(c,null,{default:l(()=>[...t[17]||(t[17]=[n("Akun Lawan",-1)])]),_:1}),a(c,{class:"text-right"},{default:l(()=>[...t[18]||(t[18]=[n("Jumlah",-1)])]),_:1}),a(c,{class:"text-center"},{default:l(()=>[...t[19]||(t[19]=[n("Aksi",-1)])]),_:1})])]),_:1}),a(lt,null,{default:l(()=>[g.transactions.data.length>0?(f(!0),k(R,{key:0},P(g.transactions.data,s=>(f(),k("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50"},[a(m,null,{default:l(()=>[e("span",pt,r(s.reference),1)]),_:2},1024),a(m,null,{default:l(()=>[n(r(H(s.date)),1)]),_:2},1024),a(m,null,{default:l(()=>[e("span",{class:I(["px-2 py-1 rounded-full text-xs font-semibold",s.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},r(s.type==="in"?"Masuk":"Keluar"),3)]),_:2},1024),a(m,null,{default:l(()=>[e("span",{class:I(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="finalized"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"])},r(s.status==="finalized"?"Final":"Draft"),3)]),_:2},1024),a(m,null,{default:l(()=>{var d;return[n(r((d=s.cash_account)==null?void 0:d.name),1)]}),_:2},1024),a(m,null,{default:l(()=>{var d;return[n(r((d=s.account)==null?void 0:d.name),1)]}),_:2},1024),a(m,{class:I(["text-right font-mono",s.type==="in"?"text-green-600":"text-red-600"])},{default:l(()=>[n(r(s.type==="in"?"+":"-")+r(q(s.amount)),1)]),_:2},1032,["class"]),a(m,{class:"text-center"},{default:l(()=>[e("div",bt,[e("a",{href:b("cash-transactions.show",s.id),class:"p-1.5 rounded-lg hover:bg-primary-50 text-primary-600",title:"Detail"},[a(i(G),{size:18})],8,ct),s.status==="draft"?(f(),k("button",{key:0,onClick:d=>E(s),class:"p-1.5 rounded-lg hover:bg-blue-50 text-blue-600",title:"Finalize"},[a(i(A),{size:18})],8,kt)):h("",!0),s.status==="draft"?(f(),k("a",{key:1,href:b("cash-transactions.edit",s.id),class:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-600",title:"Edit"},[a(i(Z),{size:18})],8,gt)):h("",!0),s.status==="draft"?(f(),k("button",{key:2,onClick:d=>O(s),class:"p-1.5 rounded-lg hover:bg-red-50 text-red-600",title:"Hapus"},[a(i(B),{size:18})],8,xt)):h("",!0),s.status==="finalized"?(f(),k("span",vt,[a(i(Q),{size:18})])):h("",!0)])]),_:2},1024)]))),128)):(f(),k("tr",yt,[a(m,{colspan:"8",class:"text-center py-12"},{default:l(()=>[...t[20]||(t[20]=[e("p",{class:"text-slate-500"},"Belum ada transaksi kas",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1}),(T=g.transactions)!=null&&T.links&&g.transactions.links.length>3?(f(),S(nt,{key:0,links:g.transactions.links},null,8,["links"])):h("",!0),a(N,{show:_.value,onClose:t[5]||(t[5]=s=>_.value=!1)},{default:l(()=>{var s;return[e("div",_t,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"Konfirmasi Finalize",-1)),e("p",ht,[t[21]||(t[21]=n(" Apakah Anda yakin ingin mem-finalize transaksi ",-1)),e("strong",null,r((s=p.value)==null?void 0:s.reference),1),t[22]||(t[22]=n("? ",-1)),t[23]||(t[23]=e("br",null,null,-1)),t[24]||(t[24]=e("br",null,null,-1)),t[25]||(t[25]=e("span",{class:"text-amber-600"},"⚠️ Setelah di-finalize, transaksi tidak dapat diedit atau dihapus dan jurnal akan otomatis dibuat.",-1))]),e("div",wt,[a(x,{type:"button",onClick:t[4]||(t[4]=d=>_.value=!1),label:"Batal",class:"bg-slate-100 hover:bg-slate-200 text-slate-700"}),a(x,{type:"button",onClick:L,icon:i(A),label:"Finalize",class:"bg-blue-500 hover:bg-blue-600 text-white"},null,8,["icon"])])])]}),_:1},8,["show"]),a(N,{show:y.value,onClose:t[7]||(t[7]=s=>y.value=!1)},{default:l(()=>{var s;return[e("div",Ct,[t[29]||(t[29]=e("h3",{class:"text-lg font-bold text-slate-900 dark:text-white mb-4"},"Konfirmasi Hapus",-1)),e("p",zt,[t[27]||(t[27]=n(" Apakah Anda yakin ingin menghapus transaksi ",-1)),e("strong",null,r((s=p.value)==null?void 0:s.reference),1),t[28]||(t[28]=n("? ",-1))]),e("div",It,[a(x,{type:"button",onClick:t[6]||(t[6]=d=>y.value=!1),label:"Batal",class:"bg-slate-100 hover:bg-slate-200 text-slate-700"}),a(x,{type:"button",onClick:U,icon:i(B),label:"Hapus",class:"bg-red-500 hover:bg-red-600 text-white"},null,8,["icon"])])])]}),_:1},8,["show"])]}),_:1}))}};export{Wt as default};
