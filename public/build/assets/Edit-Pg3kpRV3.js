import{T as G,r as P,A as I,E as A,J as H,a as d,c as Z,w as $,b as u,u as r,Z as X,d as e,t as i,n as x,g as n,e as _,h as c,k as p,m as Y,v as b,D as M,p as N,F as z,O as ee}from"./app-CIYeQ-4j.js";import{I as te}from"./IconAlertCircle-zvooSIVy.js";import{I as se}from"./IconArrowLeft-D_cLVqwd.js";import{a as re}from"./IconSun-B2kMHmLk.js";import{e as j,_ as ae}from"./DashboardLayout-CDE7-Y8V.js";import{I as le}from"./IconPhone-Daxc2FTh.js";import{I as oe}from"./IconSearch-_c1o4uNe.js";import{I as de}from"./IconTrash-CUcDdroG.js";import{I as ne}from"./IconUser-CjGQ9nH3.js";import{_ as D}from"./Button-CxuUSqWK.js";import{_ as O}from"./InputSelect-CCGvz5pc.js";import{_ as ie}from"./Modal-BK6JeM5l.js";import{l as pe}from"./lodash-Dim8PIC9.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconCircleFilled-CJHeZp2T.js";const ue={class:"mb-6"},be={class:"flex items-center justify-between"},me={class:"text-sm text-slate-500 dark:text-slate-400"},ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},xe={class:"lg:col-span-1 space-y-6"},ge={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},ke={class:"grid grid-cols-2 gap-2"},ye={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},_e={class:"space-y-4"},fe={key:0,class:"p-4 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 relative group"},he={class:"font-medium text-slate-900 dark:text-white"},ve={class:"text-sm text-slate-500 dark:text-slate-400 mt-1"},we={key:1,class:"mt-3 p-3 rounded-lg bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20"},Ce={class:"flex gap-2 text-amber-600 dark:text-amber-400"},Pe={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Ve={class:"flex items-center justify-between mb-4"},Te={class:"relative inline-flex items-center cursor-pointer"},Ue={key:0,class:"space-y-4 pt-2"},Ie={key:0,class:"text-xs text-danger-500 mt-1"},$e={class:"relative"},De={key:0,class:"text-xs text-danger-500 mt-1"},qe={class:"p-6"},Ae={class:"space-y-4"},Ne=["onClick"],ze={class:"flex items-start justify-between mb-2"},Be={class:"px-2 py-1 rounded-md bg-primary-50 dark:bg-primary-500/10 text-primary-600 dark:text-primary-400 text-[10px] font-bold uppercase tracking-wider"},Se={key:0,class:"text-[10px] text-success-600 font-medium"},Ee={class:"space-y-1"},Me={class:"flex items-center gap-2 text-sm font-semibold text-slate-900 dark:text-white"},je={class:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400"},Oe={class:"flex items-start gap-2 text-xs text-slate-500 dark:text-slate-400 leading-relaxed mt-2"},Re={class:"mt-6 flex justify-end"},Fe={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Le={class:"grid grid-cols-3 gap-2"},Qe={key:0,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Je={class:"space-y-4"},Ke={class:"grid grid-cols-2 gap-4"},We={class:"border-t border-slate-100 dark:border-slate-800 pt-4"},Ge={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},He={class:"lg:col-span-2 space-y-6"},Ze={class:"grid grid-cols-1 md:grid-cols-5 gap-6"},Xe={class:"md:col-span-2 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Ye={class:"flex items-center gap-2 mb-4"},et={class:"md:col-span-3 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},tt={class:"flex items-center gap-2 mb-4"},st={class:"relative"},rt=["disabled","placeholder"],at={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-xl max-h-64 overflow-y-auto"},lt=["onClick"],ot={class:"flex items-center gap-3"},dt={class:"w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex-shrink-0"},nt=["src"],it={class:"font-medium text-slate-900 dark:text-white text-sm"},pt={class:"text-xs text-slate-500"},ut={class:"ml-auto text-right"},bt={key:0,class:"text-[10px] text-slate-500"},mt={class:"text-xs text-primary-600 font-bold mt-1"},ct={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 flex flex-col"},xt={class:"flex-1 overflow-x-auto"},gt={class:"w-full"},kt={class:"divide-y divide-slate-100 dark:divide-slate-700"},yt={key:0},_t={class:"py-2 pl-2"},ft={class:"flex flex-col"},ht={class:"font-medium text-slate-900 dark:text-white text-sm"},vt={key:0,class:"text-purple-600 font-bold mr-1"},wt={class:"text-xs text-slate-500"},Ct={class:"py-2 text-right"},Pt=["onUpdate:modelValue"],Vt={class:"py-2 text-right"},Tt=["onUpdate:modelValue"],Ut={class:"py-3 text-center"},It=["onUpdate:modelValue","onChange"],$t={class:"py-2 text-right font-medium text-slate-900 dark:text-white text-sm"},Dt={class:"py-2 text-center"},qt=["onClick"],At={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},zt={class:"flex gap-2 mb-2"},Bt={class:"relative"},St={key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},Et={key:2,class:"relative"},Mt={key:0,class:"text-xs text-success-600 mt-2 font-medium"},jt={class:"flex gap-2 mb-2"},Ot={class:"relative"},Rt={key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},Ft={key:2,class:"relative"},Lt={key:0,class:"text-xs text-purple-600 mt-2 font-medium"},Qt={class:"relative"},Jt={class:"relative"},Kt={class:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-800 flex items-center justify-between"},Wt={class:"text-3xl font-black text-primary-600 dark:text-primary-400"},Gt={class:"flex gap-3"},xs={__name:"Edit",props:{sale:Object,customers:Array,warehouses:Array},setup(V){const o=V,s=G({customer_id:o.sale.customer_id,warehouse_id:o.sale.warehouse_id,grand_total:o.sale.grand_total,shipping_cost:o.sale.shipping_cost,other_cost:o.sale.other_cost,shipping_name:o.sale.shipping_name||"",shipping_phone:o.sale.shipping_phone||"",shipping_address:o.sale.shipping_address||"",sender_name:o.sale.sender_name||"",sender_phone:o.sale.sender_phone||"",payment_type:o.sale.payment_type||"cash",shipping_type:o.sale.shipping_type||"pickup",discount:o.sale.discount||0,discount_type:o.sale.discount_type||"amount",discount_percent:o.sale.discount_percent||0,event_discount:o.sale.event_discount||0,event_discount_type:o.sale.event_discount_type||"amount",event_discount_percent:o.sale.event_discount_percent||0,event_discount_percent:o.sale.event_discount_percent||0,notes:o.sale.notes||"",is_preorder:o.sale.is_preorder,preorder_status:o.sale.preorder_status||"pending",estimated_ready_date:o.sale.estimated_ready_date?o.sale.estimated_ready_date.split("T")[0]:"",paid_amount:o.sale.paid_amount||0,items:o.sale.details.map(l=>({product_id:l.product_id,bundle_id:l.bundle_id,title:l.bundle_id?l.bundle.name:l.product.title,barcode:l.bundle_id?l.bundle.code:l.product.barcode,sell_price:l.sell_price,discount:l.discount||0,qty:l.qty,stock:l.bundle_id?l.bundle.stock:l.product.stock,type:l.bundle_id?"bundle":"product"}))}),g=P(o.customers.find(l=>l.id===o.sale.customer_id)||null),B=P(o.warehouses.find(l=>l.id===o.sale.warehouse_id)||null),h=P(""),v=P([]),f=P(!1),R=l=>{g.value=l,s.customer_id=l?l.id:"",s.shipping_name="",s.shipping_phone="",s.shipping_address="",l&&l.addresses&&l.addresses.length>0&&(f.value=!0)},F=l=>{s.shipping_name=l.name,s.shipping_phone=l.phone,s.shipping_address=l.address,f.value=!1},L=l=>{B.value=l,s.warehouse_id=l?l.id:""},q=I(()=>s.items.reduce((l,t)=>{const k=t.sell_price*t.qty-(t.discount||0);return l+k},0)),w=I(()=>s.discount_type==="percent"?Math.round(q.value*(s.discount_percent||0)/100):s.discount||0),T=I(()=>{const l=q.value-w.value;return s.event_discount_type==="percent"?Math.round(l*(s.event_discount_percent||0)/100):s.event_discount||0}),S=I(()=>q.value-w.value-T.value+parseInt(s.shipping_cost||0)+parseInt(s.other_cost||0));A(S,l=>{s.grand_total=l}),A([w],([l])=>{s.discount_type==="percent"&&(s.discount=l)}),A([T],([l])=>{s.event_discount_type==="percent"&&(s.event_discount=l)});const E=pe.debounce(async()=>{if(!h.value){v.value=[];return}try{const l=await H.post(U("sales.searchProduct"),{q:h.value,warehouse_id:s.warehouse_id});v.value=l.data}catch(l){console.error(l)}},300),Q=l=>{const t=l.type==="bundle",k=s.items.find(m=>t?m.bundle_id===l.id:m.product_id===l.id),a=k?k.qty:0;if(!s.is_preorder&&a+1>l.stock){alert("Stok tidak mencukupi! (Tersedia: "+l.stock+")");return}k?k.qty++:s.items.push({product_id:t?null:l.id,bundle_id:t?l.id:null,title:l.title,barcode:l.barcode,sell_price:l.sell_price,discount:0,qty:1,stock:l.stock,type:l.type}),h.value="",v.value=[]},J=l=>{s.items.splice(l,1)},K=l=>{const t=s.items[l];!s.is_preorder&&t.qty>t.stock&&(alert("Stok tidak mencukupi! (Tersedia: "+t.stock+")"),t.qty=t.stock),t.qty<1&&(t.qty=1)},W=()=>{s.put(U("sales.update",o.sale.id))},C=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0),U=(l,t)=>typeof window<"u"&&window.route?window.route(l,t):"#";return(l,t)=>(d(),Z(ae,null,{default:$(()=>{var k;return[u(r(X),{title:"Edit Transaksi"}),e("div",ue,[e("div",be,[e("div",null,[t[30]||(t[30]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Edit Transaksi",-1)),e("p",me," Edit draf transaksi "+i(V.sale.invoice)+". ",1)]),u(D,{type:"link",icon:r(se),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:U("sales.index")},null,8,["icon","href"])])]),e("div",ce,[e("div",xe,[e("div",ge,[t[31]||(t[31]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Tipe Pembayaran",-1)),e("div",ke,[e("button",{type:"button",onClick:t[0]||(t[0]=a=>r(s).payment_type="cash"),class:x(["px-4 py-2 rounded-xl text-sm font-medium transition-all border",r(s).payment_type==="cash"?"bg-primary-50 border-primary-500 text-primary-700 dark:bg-primary-500/10 dark:text-primary-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Cash ",2),e("button",{type:"button",onClick:t[1]||(t[1]=a=>r(s).payment_type="tempo"),class:x(["px-4 py-2 rounded-xl text-sm font-medium transition-all border",r(s).payment_type==="tempo"?"bg-primary-50 border-primary-500 text-primary-700 dark:bg-primary-500/10 dark:text-primary-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Tempo ",2)])]),e("div",ye,[t[34]||(t[34]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Informasi Customer",-1)),e("div",_e,[u(O,{label:"Pilih Customer",data:V.customers,selected:g.value,"set-selected":R,placeholder:"Pilih Customer...",searchable:!0,errors:r(s).errors.customer_id},null,8,["data","selected","errors"]),g.value?(d(),n("div",fe,[e("p",he,i(g.value.name),1),e("p",ve,i(g.value.phone||"-"),1),g.value.addresses&&g.value.addresses.length>0?(d(),n("button",{key:0,type:"button",onClick:t[2]||(t[2]=a=>f.value=!0),class:"mt-3 w-full flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs font-medium bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors"},[u(r(j),{size:14}),t[32]||(t[32]=_(" Pilih Alamat ",-1))])):(d(),n("div",we,[e("div",Ce,[u(r(te),{size:16,class:"mt-0.5 flex-shrink-0"}),t[33]||(t[33]=e("p",{class:"text-[10px] text-amber-700 dark:text-amber-300 leading-normal font-medium"},[_(" Customer belum ada alamat yang terdaftar. buat di "),e("span",{class:"font-bold"},"pelanggan - daftar alamat")],-1))])]))])):c("",!0)])]),e("div",Pe,[e("div",Ve,[t[36]||(t[36]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Pre-Order (PO)",-1)),e("label",Te,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=a=>r(s).is_preorder=a),class:"sr-only peer"},null,512),[[Y,r(s).is_preorder]]),t[35]||(t[35]=e("div",{class:"w-11 h-6 bg-slate-200 peer-focus:outline-none dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-500"},null,-1))])]),u(M,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:$(()=>[r(s).is_preorder?(d(),n("div",Ue,[t[40]||(t[40]=e("div",{class:"p-3 bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20 rounded-xl mb-4"},[e("p",{class:"text-[10px] text-amber-700 dark:text-amber-300 leading-normal"},[e("span",{class:"font-bold"},"Info:"),_(" Transaksi PO tidak mengurangi stok saat ini. Stok akan direservasi (booked). ")])],-1)),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1 font-bold lowercase"},"Estimasi Tanggal Ready",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r(s).estimated_ready_date=a),type:"date",class:x(["w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm",{"border-danger-500":r(s).errors.estimated_ready_date}])},null,2),[[b,r(s).estimated_ready_date]]),r(s).errors.estimated_ready_date?(d(),n("p",Ie,i(r(s).errors.estimated_ready_date),1)):c("",!0)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1 font-bold lowercase"},"DP / Pembayaran Masuk",-1)),e("div",$e,[t[38]||(t[38]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"},"Rp",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r(s).paid_amount=a),type:"number",placeholder:"0",class:x(["w-full h-11 pl-9 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm",{"border-danger-500":r(s).errors.paid_amount}])},null,2),[[b,r(s).paid_amount,void 0,{number:!0}]])]),r(s).errors.paid_amount?(d(),n("p",De,i(r(s).errors.paid_amount),1)):c("",!0)])])):c("",!0)]),_:1})]),u(ie,{show:f.value,onClose:t[7]||(t[7]=a=>f.value=!1),title:"Daftar Alamat "+(((k=g.value)==null?void 0:k.name)||"")},{default:$(()=>{var a;return[e("div",qe,[e("div",Ae,[(d(!0),n(z,null,N((a=g.value)==null?void 0:a.addresses,m=>(d(),n("div",{key:m.id,onClick:y=>F(m),class:"p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-primary-500 dark:hover:border-primary-500 cursor-pointer transition-all group bg-slate-50 dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800"},[e("div",ze,[e("span",Be,i(m.label),1),m.is_default?(d(),n("span",Se,"Utama")):c("",!0)]),e("div",Ee,[e("div",Me,[u(r(ne),{size:14,class:"text-slate-400"}),_(" "+i(m.name),1)]),e("div",je,[u(r(le),{size:14,class:"text-slate-400"}),_(" "+i(m.phone),1)]),e("div",Oe,[u(r(j),{size:14,class:"text-slate-400 flex-shrink-0 mt-0.5"}),_(" "+i(m.address),1)])])],8,Ne))),128))]),e("div",Re,[u(D,{type:"button",label:"Tutup",class:"bg-slate-100 text-slate-600 hover:bg-slate-200",onClick:t[6]||(t[6]=m=>f.value=!1)})])])]}),_:1},8,["show","title"]),e("div",Fe,[t[41]||(t[41]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Jenis Pengiriman",-1)),e("div",Le,[e("button",{type:"button",onClick:t[8]||(t[8]=a=>r(s).shipping_type="pickup"),class:x(["px-2 py-2 rounded-xl text-[10px] font-bold transition-all border uppercase",r(s).shipping_type==="pickup"?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Ambil ",2),e("button",{type:"button",onClick:t[9]||(t[9]=a=>r(s).shipping_type="cod"),class:x(["px-2 py-2 rounded-xl text-[10px] font-bold transition-all border uppercase",r(s).shipping_type==="cod"?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," COD ",2),e("button",{type:"button",onClick:t[10]||(t[10]=a=>r(s).shipping_type="courier"),class:x(["px-2 py-2 rounded-xl text-[10px] font-bold transition-all border uppercase",r(s).shipping_type==="courier"?"bg-indigo-50 border-indigo-500 text-indigo-700 dark:bg-indigo-500/10 dark:text-indigo-400":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Kurir ",2)])]),u(M,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform -translate-y-2 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform -translate-y-2 opacity-0"},{default:$(()=>[r(s).shipping_type!=="pickup"?(d(),n("div",Qe,[t[47]||(t[47]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Detail Pengirim & Penerima",-1)),e("div",Je,[e("div",Ke,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"Nama Pengirim",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r(s).sender_name=a),type:"text",placeholder:"Nama pengirim...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[b,r(s).sender_name]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"No. Telp Pengirim",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>r(s).sender_phone=a),type:"text",placeholder:"No. Telp...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[b,r(s).sender_phone]])])]),e("div",We,[e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"Nama Penerima",-1)),p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>r(s).shipping_name=a),type:"text",placeholder:"Masukkan nama penerima...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[b,r(s).shipping_name]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"No. Telp Penerima",-1)),p(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>r(s).shipping_phone=a),type:"text",placeholder:"Masukkan nomor telepon...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[b,r(s).shipping_phone]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm text-slate-600 dark:text-slate-400 mb-1"},"Alamat Lengkap",-1)),p(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=a=>r(s).shipping_address=a),placeholder:"Masukkan alamat pengiriman...",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none resize-none text-sm",rows:"3"},null,512),[[b,r(s).shipping_address]])])])])])):c("",!0)]),_:1}),e("div",Ge,[t[48]||(t[48]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Catatan",-1)),p(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>r(s).notes=a),placeholder:"Catatan/keterangan (opsional)",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none resize-none",rows:"3"},null,512),[[b,r(s).notes]])])]),e("div",He,[e("div",Ze,[e("div",Xe,[e("div",Ye,[u(r(re),{size:20,class:"text-slate-400"}),t[49]||(t[49]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Gudang",-1))]),u(O,{label:"",data:V.warehouses,selected:B.value,"set-selected":L,placeholder:"Pilih Gudang...",searchable:!0,errors:r(s).errors.warehouse_id,disabled:!0},null,8,["data","selected","errors"])]),e("div",et,[e("div",tt,[u(r(oe),{size:20,class:"text-slate-400"}),t[50]||(t[50]=e("h3",{class:"font-semibold text-slate-900 dark:text-white"},"Cari Produk",-1))]),e("div",st,[p(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=a=>h.value=a),onInput:t[18]||(t[18]=(...a)=>r(E)&&r(E)(...a)),disabled:!r(s).warehouse_id,placeholder:r(s).warehouse_id?"Scan barcode atau ketik nama...":"Pilih gudang terlebih dahulu...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none disabled:opacity-50 disabled:cursor-not-allowed"},null,40,rt),[[b,h.value]]),v.value.length>0?(d(),n("div",at,[(d(!0),n(z,null,N(v.value,a=>(d(),n("div",{key:a.id,onClick:m=>Q(a),class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-700 last:border-0"},[e("div",ot,[e("div",dt,[a.image?(d(),n("img",{key:0,src:a.image,class:"w-full h-full object-cover rounded-lg"},null,8,nt)):c("",!0)]),e("div",null,[e("p",it,i(a.title),1),e("p",pt,i(a.barcode),1)]),e("div",ut,[e("p",{class:x(["text-xs font-semibold",a.type==="bundle"?"text-purple-600":"text-slate-700 dark:text-slate-300"])},i(a.type==="bundle"?"Bundling":"Stok: "+a.stock),3),a.type==="bundle"?(d(),n("p",bt,"Tersedia: "+i(a.stock),1)):c("",!0),e("p",mt,i(C(a.sell_price)),1)])])],8,lt))),128))])):c("",!0)])])]),e("div",ct,[t[53]||(t[53]=e("h3",{class:"font-semibold text-slate-900 dark:text-white mb-6"},"Daftar Item",-1)),e("div",xt,[e("table",gt,[t[52]||(t[52]=e("thead",null,[e("tr",{class:"border-b border-slate-100 dark:border-slate-700 text-left text-sm text-slate-500"},[e("th",{class:"pb-3 pl-2"},"Produk"),e("th",{class:"pb-3 text-right"},"Harga Jual"),e("th",{class:"pb-3 text-right w-28"},"Diskon"),e("th",{class:"pb-3 text-center w-24"},"Qty"),e("th",{class:"pb-3 text-right"},"Subtotal"),e("th",{class:"pb-3 w-10"})])],-1)),e("tbody",kt,[r(s).items.length===0?(d(),n("tr",yt,[...t[51]||(t[51]=[e("td",{colspan:"5",class:"py-8 text-center text-slate-500 italic text-sm"}," Belum ada item dipilih ",-1)])])):c("",!0),(d(!0),n(z,null,N(r(s).items,(a,m)=>(d(),n("tr",{key:m,class:"group"},[e("td",_t,[e("div",ft,[e("span",ht,[a.bundle_id?(d(),n("span",vt,"[B]")):c("",!0),_(" "+i(a.title),1)]),e("span",wt,i(a.barcode),1)])]),e("td",Ct,[p(e("input",{type:"number","onUpdate:modelValue":y=>a.sell_price=y,min:"0",class:"w-32 px-2 py-1 text-right text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,Pt),[[b,a.sell_price]])]),e("td",Vt,[p(e("input",{type:"number","onUpdate:modelValue":y=>a.discount=y,min:"0",placeholder:"0",class:"w-28 px-2 py-1 text-right text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,Tt),[[b,a.discount,void 0,{number:!0}]])]),e("td",Ut,[p(e("input",{type:"number","onUpdate:modelValue":y=>a.qty=y,onChange:y=>K(m),min:"1",class:"w-20 px-2 py-1 text-center text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,40,It),[[b,a.qty]])]),e("td",$t,i(C(a.sell_price*a.qty-(a.discount||0))),1),e("td",Dt,[e("button",{onClick:y=>J(m),class:"text-slate-400 hover:text-danger-500 transition-colors"},[u(r(de),{size:18})],8,qt)])]))),128))])])]),t[54]||(t[54]=e("div",{class:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-700"},null,-1))]),e("div",At,[e("div",Nt,[e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Diskon",-1)),e("div",zt,[e("button",{type:"button",onClick:t[19]||(t[19]=a=>r(s).discount_type="amount"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).discount_type==="amount"?"bg-primary-500 border-primary-500 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Nominal ",2),e("button",{type:"button",onClick:t[20]||(t[20]=a=>r(s).discount_type="percent"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).discount_type==="percent"?"bg-primary-500 border-primary-500 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Persentase ",2)]),e("div",Bt,[r(s).discount_type==="amount"?(d(),n("span",St,"Rp")):c("",!0),r(s).discount_type==="amount"?p((d(),n("input",{key:1,"onUpdate:modelValue":t[21]||(t[21]=a=>r(s).discount=a),type:"number",min:"0",placeholder:"0",class:"w-full h-11 pl-9 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512)),[[b,r(s).discount,void 0,{number:!0}]]):(d(),n("div",Et,[p(e("input",{"onUpdate:modelValue":t[22]||(t[22]=a=>r(s).discount_percent=a),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full h-11 pl-4 pr-9 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512),[[b,r(s).discount_percent,void 0,{number:!0}]]),t[55]||(t[55]=e("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"%",-1))]))]),w.value>0?(d(),n("p",Mt,"Potongan: "+i(C(w.value)),1)):c("",!0)]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Diskon Event",-1)),e("div",jt,[e("button",{type:"button",onClick:t[23]||(t[23]=a=>r(s).event_discount_type="amount"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).event_discount_type==="amount"?"bg-purple-600 border-purple-600 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Nominal ",2),e("button",{type:"button",onClick:t[24]||(t[24]=a=>r(s).event_discount_type="percent"),class:x(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors border",r(s).event_discount_type==="percent"?"bg-purple-600 border-purple-600 text-white shadow-sm":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400"])}," Persentase ",2)]),e("div",Ot,[r(s).event_discount_type==="amount"?(d(),n("span",Rt,"Rp")):c("",!0),r(s).event_discount_type==="amount"?p((d(),n("input",{key:1,"onUpdate:modelValue":t[25]||(t[25]=a=>r(s).event_discount=a),type:"number",min:"0",placeholder:"0",class:"w-full h-11 pl-9 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512)),[[b,r(s).event_discount,void 0,{number:!0}]]):(d(),n("div",Ft,[p(e("input",{"onUpdate:modelValue":t[26]||(t[26]=a=>r(s).event_discount_percent=a),type:"number",min:"0",max:"100",placeholder:"0",class:"w-full h-11 pl-4 pr-9 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none transition-all"},null,512),[[b,r(s).event_discount_percent,void 0,{number:!0}]]),t[57]||(t[57]=e("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"%",-1))]))]),T.value>0?(d(),n("p",Lt,"Potongan Event: "+i(C(T.value)),1)):c("",!0)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Ongkos Kirim",-1)),e("div",Qt,[t[59]||(t[59]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"Rp",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[27]||(t[27]=a=>r(s).shipping_cost=a),min:"0",placeholder:"0",class:"w-full pl-9 pr-4 h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[b,r(s).shipping_cost]])])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Biaya Lainnya",-1)),e("div",Jt,[t[61]||(t[61]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},"Rp",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[28]||(t[28]=a=>r(s).other_cost=a),min:"0",placeholder:"0",class:"w-full pl-9 pr-4 h-11 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all outline-none text-sm"},null,512),[[b,r(s).other_cost]])])])]),e("div",Kt,[e("div",null,[t[63]||(t[63]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 uppercase tracking-wider font-bold"},"Total Akhir",-1)),e("p",Wt,i(C(S.value)),1)]),e("div",Gt,[u(D,{type:"button",label:"Batal",class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",onClick:t[29]||(t[29]=a=>r(ee).visit(U("sales.index")))}),u(D,{type:"submit",label:"Update Transaksi",class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30 px-8",processing:r(s).processing,disabled:r(s).items.length===0||!r(s).customer_id||!r(s).warehouse_id,onClick:W},null,8,["processing","disabled"])])])])])])]}),_:1}))}};export{xs as default};
