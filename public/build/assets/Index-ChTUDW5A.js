import{r as T,A as V,a as o,g as m,t as b,h as x,d as s,b as i,u as t,w as $,f as A,F as P,p as I,n as z,c as y,s as G,e as S,D as B,Q as E,T as F,Z as M,O as w}from"./app-CIYeQ-4j.js";import{p as C,c as U,_ as N}from"./DashboardLayout-CDE7-Y8V.js";import{I as H}from"./IconDatabaseOff-MG7eloAg.js";import{c as R}from"./createVueComponent-Cyzcg1Tn.js";import{_}from"./Button-CxuUSqWK.js";import{_ as L}from"./Input-n-ox4s5-.js";import{I as q}from"./IconSun-B2kMHmLk.js";import{I as Q,a as Z}from"./IconCircleFilled-CJHeZp2T.js";import{_ as J}from"./Modal-BK6JeM5l.js";import{_ as K}from"./Search-NBeUwUBy.js";import{_ as W}from"./Pagination-DUsmzl5y.js";import{I as X}from"./IconPencilCog-CbLQ-16V.js";import{I as Y}from"./IconShield-BQMumdlJ.js";import{I as ee}from"./IconTrash-CUcDdroG.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconSearch-_c1o4uNe.js";import"./IconChevronRight-CKLwVeXD.js";/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var te=R("outline","pencil-check","PencilCheck",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]]);const se={class:"flex flex-col gap-2"},re={key:0,class:"text-gray-600 text-sm"},ae={class:"relative"},oe=["onClick"],le={key:1,class:"text-xs text-red-500"},ne={__name:"ListBox",props:{selected:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},setSelected:{type:Function,required:!0},label:String,errors:String},setup(a){const l=a,n=T(!1),p=V(()=>l.selected.length===0?"Pilih Hak Akses":l.selected.length>=4?`jumlah hak akses terpilih ${l.selected.length}`:l.selected.map(f=>f.name).join(", ")),e=f=>l.selected.some(c=>c.id===f.id),v=f=>{const c=[...l.selected],u=c.findIndex(k=>k.id===f.id);u>-1?c.splice(u,1):c.push(f),l.setSelected(c)};return(f,c)=>(o(),m("div",se,[a.label?(o(),m("label",re,b(a.label),1)):x("",!0),s("div",ae,[s("button",{type:"button",onClick:c[0]||(c[0]=u=>n.value=!n.value),class:"w-full px-3 py-1.5 border text-sm rounded-md focus:outline-none focus:ring-0 flex justify-between items-center gap-8 bg-white text-gray-700 focus:border-gray-200 border-gray-200 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-gray-700 dark:border-gray-800"},[s("span",null,b(p.value),1),i(t(q),{size:20,"stroke-width":1.5})]),i(B,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:$(()=>[n.value?(o(),m("div",{key:0,class:"absolute z-50 mt-1 w-full p-4 border rounded-lg flex flex-wrap gap-2 bg-gray-100 dark:border-gray-900 dark:bg-gray-950",onClick:c[1]||(c[1]=A(()=>{},["stop"]))},[(o(!0),m(P,null,I(a.data,u=>(o(),m("div",{key:u.id,onClick:k=>v(u),class:z(["text-sm cursor-pointer px-3 py-1.5 rounded-lg flex items-center gap-2 bg-white text-gray-700 hover:bg-gray-200 border dark:bg-gray-900 dark:border-gray-800 dark:text-gray-400 dark:hover:bg-gray-800",e(u)&&"bg-teal-50 dark:bg-teal-950/20"])},[(o(),y(G(e(u)?t(Q):t(Z)),{size:15,"stroke-width":1.5,class:z(e(u)?"text-teal-500":"")},null,8,["class"])),S(" "+b(u.name),1)],10,oe))),128))])):x("",!0)]),_:1})]),a.errors?(o(),m("small",le,b(a.errors),1)):x("",!0)]))}},ie={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-all"},de={class:"p-5 border-b border-slate-100 dark:border-slate-800"},ce={class:"flex items-center gap-3"},me={class:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white"},ue={class:"text-lg font-semibold text-slate-800 dark:text-slate-200 capitalize"},pe={class:"text-sm text-slate-500 dark:text-slate-400"},fe={class:"p-4 bg-slate-50 dark:bg-slate-800/50"},ge={class:"flex flex-wrap gap-1.5 max-h-24 overflow-y-auto scrollbar-thin"},be={key:0,class:"px-2 py-0.5 text-xs font-medium text-slate-500"},xe={class:"flex border-t border-slate-100 dark:border-slate-800"},ke={__name:"RoleCard",props:{role:Object,onEdit:Function,onDelete:Function},setup(a){return(l,n)=>(o(),m("div",ie,[s("div",de,[s("div",ce,[s("div",me,[i(t(C),{size:24})]),s("div",null,[s("h3",ue,b(a.role.name),1),s("p",pe,b(a.role.permissions.length)+" hak akses ",1)])])]),s("div",fe,[s("div",ge,[(o(!0),m(P,null,I(a.role.permissions.slice(0,8),(p,e)=>(o(),m("span",{key:e,class:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full bg-accent-100 dark:bg-accent-900/50 text-accent-700 dark:text-accent-400"},[i(t(Y),{size:10}),S(" "+b(p.name),1)]))),128)),a.role.permissions.length>8?(o(),m("span",be," +"+b(a.role.permissions.length-8)+" lainnya ",1)):x("",!0)])]),s("div",xe,[s("button",{onClick:n[0]||(n[0]=(...p)=>a.onEdit&&a.onEdit(...p)),class:"flex-1 flex items-center justify-center gap-1.5 py-3 text-warning-600 hover:bg-warning-50 dark:hover:bg-warning-950/50 text-sm font-medium transition-colors"},[i(t(X),{size:16}),n[2]||(n[2]=s("span",null,"Edit",-1))]),n[4]||(n[4]=s("div",{class:"w-px bg-slate-100 dark:bg-slate-800"},null,-1)),s("button",{onClick:n[1]||(n[1]=(...p)=>a.onDelete&&a.onDelete(...p)),class:"flex-1 flex items-center justify-center gap-1.5 py-3 text-danger-600 hover:bg-danger-50 dark:hover:bg-danger-950/50 text-sm font-medium transition-colors"},[i(t(ee),{size:16}),n[3]||(n[3]=s("span",null,"Hapus",-1))])])]))}},he={class:"mb-6"},ye={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ve={class:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2"},we={class:"text-sm text-slate-500 dark:text-slate-400"},_e={class:"mb-4 w-full sm:w-80"},$e={class:"mb-4"},Ce={class:"mb-4"},Pe={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Ie={key:1,class:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},Se={class:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4"},Je={__name:"Index",setup(a){const{roles:l,permissions:n,errors:p}=E().props,e=F({id:"",name:"",selectedPermission:[],isUpdate:!1,isOpen:!1}),v=d=>{e.selectedPermission=d},f=()=>{const d={...e.data(),selectedPermission:e.selectedPermission.map(r=>r.id)};w.post(h("roles.store"),d,{onSuccess:()=>{e.selectedPermission=[],e.name="",e.isOpen=!1}})},c=()=>{const d={...e.data(),selectedPermission:e.selectedPermission.map(r=>r.id),_method:"PUT"};w.post(h("roles.update",e.id),d,{onSuccess:()=>{e.id="",e.name="",e.selectedPermission=[],e.isUpdate=!1,e.isOpen=!1}})},u=d=>{e.id=d.id,e.selectedPermission=d.permissions,e.name=d.name,e.isUpdate=!0,e.isOpen=!0},k=d=>{confirm("Hapus role ini?")&&w.delete(h("roles.destroy",d))},D=()=>{e.isOpen=!1,e.id="",e.name="",e.selectedPermission=[],e.isUpdate=!1},h=(d,r)=>typeof window<"u"&&window.route?window.route(d,r):"#";return(d,r)=>(o(),y(N,null,{default:$(()=>{var O,j;return[i(t(M),{title:"Akses Group"}),s("div",he,[s("div",ye,[s("div",null,[s("h1",ve,[i(t(C),{size:28,class:"text-primary-500"}),r[4]||(r[4]=S(" Akses Group ",-1))]),s("p",we,b(t(l).total||((O=t(l).data)==null?void 0:O.length)||0)+" group terdaftar ",1)]),i(_,{type:"button",icon:t(U),class:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",label:"Tambah Group",onClick:r[0]||(r[0]=g=>t(e).isOpen=!0)},null,8,["icon"])])]),s("div",_e,[i(K,{url:h("roles.index"),placeholder:"Cari akses group..."},null,8,["url"])]),i(J,{show:t(e).isOpen,onClose:D,title:t(e).isUpdate?"Ubah Akses Group":"Tambah Akses Group",icon:t(C)},{default:$(()=>[s("form",{onSubmit:r[2]||(r[2]=A(g=>t(e).isUpdate?c():f(),["prevent"]))},[s("div",$e,[i(L,{label:"Nama group",type:"text",placeholder:"Masukan nama group",modelValue:t(e).name,"onUpdate:modelValue":r[1]||(r[1]=g=>t(e).name=g),errors:t(p).name},null,8,["modelValue","errors"])]),s("div",Ce,[i(ne,{label:"Pilih hak akses",data:t(n),selected:t(e).selectedPermission,"set-selected":v,errors:t(p).selectedPermission},null,8,["data","selected","errors"])]),i(_,{type:"submit",icon:t(te),class:"bg-primary-500 hover:bg-primary-600 text-white w-full justify-center",label:"Simpan"},null,8,["icon"])],32)]),_:1},8,["show","title","icon"]),t(l).data.length>0?(o(),m("div",Pe,[(o(!0),m(P,null,I(t(l).data,g=>(o(),y(ke,{key:g.id,role:g,"on-edit":()=>u(g),"on-delete":()=>k(g.id)},null,8,["role","on-edit","on-delete"]))),128))])):(o(),m("div",Ie,[s("div",Se,[i(t(H),{size:32,class:"text-slate-400","stroke-width":1.5})]),r[5]||(r[5]=s("h3",{class:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-1"},"Belum Ada Group",-1)),r[6]||(r[6]=s("p",{class:"text-sm text-slate-500 dark:text-slate-400 mb-4"}," Tambahkan group akses pertama. ",-1)),i(_,{type:"button",icon:t(U),class:"bg-primary-500 hover:bg-primary-600 text-white",label:"Tambah Group",onClick:r[3]||(r[3]=g=>t(e).isOpen=!0)},null,8,["icon"])])),(j=t(l))!=null&&j.links&&t(l).links.length>3?(o(),y(W,{key:2,links:t(l).links},null,8,["links"])):x("",!0)]}),_:1}))}};export{Je as default};
