import{r as T,A as k,a as n,c as I,w as F,b as x,u,Z as S,d as t,t as a,e as g,k as b,v as y,x as C,g as i,p as _,F as h,n as N,h as U,O as H}from"./app-DA0EYa_6.js";import{I as L}from"./IconFileSpreadsheet-DCPU1LFp.js";import{I as V}from"./IconFileTypePdf-d0RR0r4X.js";import{I as j}from"./IconFilter-f3eGT3XC.js";import{_ as A}from"./DashboardLayout-DqHF1oae.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";const O={class:"mb-6"},B={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},z={class:"text-sm text-slate-500 dark:text-slate-400"},E={class:"flex items-center gap-2"},M=["href"],Q=["href"],K={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 mb-6"},R={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},J=["value"],q={class:"flex items-end"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Z={class:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-800 p-5"},$={class:"text-2xl font-bold text-blue-700 dark:text-blue-300"},W={class:"bg-green-50 dark:bg-green-900/20 rounded-2xl border border-green-200 dark:border-green-800 p-5"},X={class:"text-2xl font-bold text-green-700 dark:text-green-300"},Y={class:"bg-purple-50 dark:bg-purple-900/20 rounded-2xl border border-purple-200 dark:border-purple-800 p-5"},tt={class:"text-2xl font-bold text-purple-700 dark:text-purple-300"},et={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},st={class:"overflow-x-auto"},at={class:"w-full"},rt={class:"divide-y divide-slate-100 dark:divide-slate-800"},lt={class:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400"},ot={class:"px-4 py-3 text-sm font-mono text-slate-600 dark:text-slate-400"},dt={class:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white"},nt={class:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400"},it={class:"px-4 py-3 text-sm font-mono text-right text-slate-900 dark:text-white"},xt={class:"px-4 py-3 text-sm font-mono text-right text-slate-900 dark:text-white"},ut={class:"px-4 py-3 text-sm font-mono text-right font-semibold text-blue-600 dark:text-blue-400"},pt={class:"px-4 py-3 text-sm font-mono text-right text-slate-900 dark:text-white"},mt={class:"px-4 py-3 text-sm font-mono text-right"},ct={key:0},gt={class:"bg-slate-100 dark:bg-slate-800"},bt={class:"font-bold"},ft={class:"px-4 py-3 text-sm font-mono text-right text-slate-900 dark:text-white"},kt={class:"px-4 py-3 text-sm font-mono text-right text-blue-600 dark:text-blue-400"},Ct={__name:"COGS",props:{cogsData:Array,summary:Object,filters:Object,categories:Array},setup(o){const p=o,r=T({start_date:p.filters.start_date,end_date:p.filters.end_date,category_id:p.filters.category_id||""}),v=k(()=>{const l=new URLSearchParams({start_date:r.value.start_date,end_date:r.value.end_date,...r.value.category_id&&{category_id:r.value.category_id}});return c("reports.cogs.export.excel")+"?"+l.toString()}),w=k(()=>{const l=new URLSearchParams({start_date:r.value.start_date,end_date:r.value.end_date,...r.value.category_id&&{category_id:r.value.category_id}});return c("reports.cogs.export.pdf")+"?"+l.toString()}),P=()=>{H.get(c("reports.cogs"),{start_date:r.value.start_date,end_date:r.value.end_date,category_id:r.value.category_id||null},{preserveState:!0})},f=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-",d=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0),m=l=>new Intl.NumberFormat("id-ID").format(l||0),c=(l,e)=>typeof window<"u"&&window.route?window.route(l,e):"#";return(l,e)=>(n(),I(A,null,{default:F(()=>[x(u(S),{title:"Laporan HPP"}),t("div",O,[t("div",B,[t("div",null,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Laporan Harga Pokok Penjualan (HPP)",-1)),t("p",z," Periode: "+a(f(o.filters.start_date))+" s/d "+a(f(o.filters.end_date)),1)]),t("div",E,[t("a",{href:v.value,target:"_blank",class:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl text-sm font-medium"},[x(u(L),{size:18}),e[4]||(e[4]=g(" Export Excel ",-1))],8,M),t("a",{href:w.value,target:"_blank",class:"inline-flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl text-sm font-medium"},[x(u(V),{size:18}),e[5]||(e[5]=g(" Print PDF ",-1))],8,Q)])])]),t("div",K,[t("div",R,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Tanggal Mulai",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>r.value.start_date=s),class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm"},null,512),[[y,r.value.start_date]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Tanggal Akhir",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>r.value.end_date=s),class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm"},null,512),[[y,r.value.end_date]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Kategori",-1)),b(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.category_id=s),class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm"},[e[8]||(e[8]=t("option",{value:""},"Semua Kategori",-1)),(n(!0),i(h,null,_(o.categories,s=>(n(),i("option",{key:s.id,value:s.id},a(s.name),9,J))),128))],512),[[C,r.value.category_id]])]),t("div",q,[t("button",{onClick:P,class:"h-10 px-6 bg-primary-500 hover:bg-primary-600 text-white rounded-xl text-sm font-medium flex items-center gap-2"},[x(u(j),{size:18}),e[10]||(e[10]=g(" Filter ",-1))])])])]),t("div",G,[t("div",Z,[e[11]||(e[11]=t("p",{class:"text-sm text-blue-600 dark:text-blue-400 mb-1"},"Total HPP",-1)),t("p",$,a(d(o.summary.totalCogs)),1)]),t("div",W,[e[12]||(e[12]=t("p",{class:"text-sm text-green-600 dark:text-green-400 mb-1"},"Total Qty Terjual",-1)),t("p",X,a(m(o.summary.totalQty)),1)]),t("div",Y,[e[13]||(e[13]=t("p",{class:"text-sm text-purple-600 dark:text-purple-400 mb-1"},"Jumlah Produk",-1)),t("p",tt,a(o.summary.productCount),1)])]),t("div",et,[t("div",st,[t("table",at,[e[17]||(e[17]=t("thead",{class:"bg-slate-50 dark:bg-slate-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"No"),t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Barcode"),t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Nama Produk"),t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Kategori"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"HPP/Unit"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Qty Terjual"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Total HPP"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Avg Jual"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase"},"Margin")])],-1)),t("tbody",rt,[(n(!0),i(h,null,_(o.cogsData,(s,D)=>(n(),i("tr",{key:s.product_id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50"},[t("td",lt,a(D+1),1),t("td",ot,a(s.barcode||"-"),1),t("td",dt,a(s.title),1),t("td",nt,a(s.category_name||"-"),1),t("td",it,a(d(s.current_buy_price)),1),t("td",xt,a(m(s.total_qty)),1),t("td",ut,a(d(s.total_cogs)),1),t("td",pt,a(d(s.avg_sell_price)),1),t("td",mt,[t("span",{class:N(s.margin>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},a(d(s.margin))+" ("+a(s.margin_percent)+"%) ",3)])]))),128)),o.cogsData.length===0?(n(),i("tr",ct,[...e[14]||(e[14]=[t("td",{colspan:"9",class:"px-4 py-8 text-center text-slate-500 dark:text-slate-400"}," Tidak ada data HPP untuk periode ini ",-1)])])):U("",!0)]),t("tfoot",gt,[t("tr",bt,[e[15]||(e[15]=t("td",{colspan:"5",class:"px-4 py-3 text-sm text-slate-900 dark:text-white"},"TOTAL",-1)),t("td",ft,a(m(o.summary.totalQty)),1),t("td",kt,a(d(o.summary.totalCogs)),1),e[16]||(e[16]=t("td",{colspan:"2"},null,-1))])])])])])]),_:1}))}};export{Ct as default};
