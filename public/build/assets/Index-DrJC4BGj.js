import{r as p,A as W,a as n,c as I,w as l,b as a,u as x,Z,d as t,e as i,k as j,v as $,g as b,h as T,p as L,t as o,O as V,F as z,J as N}from"./app-DA0EYa_6.js";import{I as R}from"./IconDatabaseOff-DfZH0otJ.js";import{I as K}from"./IconEye-Bk7XjJNy.js";import{I as A}from"./IconPrinter-DN1-CNQQ.js";import{I as Q}from"./IconUser-DDKj-MYF.js";import{_ as X}from"./DashboardLayout-DqHF1oae.js";import{_ as Y}from"./Search-efVWyAAU.js";import{_ as ee}from"./Table-CzIMA27R.js";import{_ as te}from"./TableCard-BYxyxo2i.js";import{_ as ae,a as se}from"./TableTbody-BBPwPiVX.js";import{_ as v,a as g}from"./TableTh-CVR3I-fd.js";import{_ as le}from"./Pagination-B8BHcZ6z.js";import{_ as re}from"./Modal-BevHxW0g.js";import{_ as E}from"./Checkbox-BX7fLvPL.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";import"./IconSearch-hVNvfgeb.js";import"./IconChevronRight-QKrPJlsB.js";const oe={class:"mb-6"},de={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ne={class:"mb-4"},ie={class:"flex flex-col sm:flex-row gap-4 items-center flex-wrap"},ue={class:"w-full sm:w-64"},ce={class:"flex items-center gap-2"},me={class:"font-bold text-slate-900 dark:text-white"},fe={class:"flex items-center gap-2"},xe={class:"text-slate-800 dark:text-slate-200"},be={class:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-semibold"},pe={class:"text-slate-600 dark:text-slate-400"},ve={class:"flex items-center justify-center gap-2"},ge=["onClick"],_e={key:1,class:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},ke={class:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4"},he={class:"p-6"},ye={class:"mb-6"},we={class:"flex gap-2"},Ce=["disabled"],Oe={key:0,class:"mt-6 border-t border-slate-100 dark:border-slate-800 pt-6"},De={class:"flex justify-between items-center mb-4"},Ie={class:"font-bold text-slate-900 dark:text-white text-sm"},je={class:"flex items-center gap-2"},$e={class:"max-h-60 overflow-y-auto space-y-2 pr-2 custom-scrollbar"},Te={class:"flex flex-col"},Ve={class:"font-bold text-sm text-slate-900 dark:text-white"},Be={class:"flex items-center gap-2"},Ue={class:"text-xs text-slate-500"},Fe={class:"text-xs font-bold text-primary-600 dark:text-primary-400"},Se={class:"mt-8 flex justify-end gap-3"},Pe=["disabled"],Le={key:1,class:"py-12 flex flex-col items-center justify-center text-center"},ze={class:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-3"},dt={__name:"Index",props:{orders:Object,filters:Object},setup(c){var S,P;const C=c,u=p({start_date:((S=C.filters)==null?void 0:S.start_date)||"",end_date:((P=C.filters)==null?void 0:P.end_date)||""}),B=()=>{var r;V.get(k("old-orders.index"),{q:(r=C.filters)==null?void 0:r.q,start_date:u.value.start_date,end_date:u.value.end_date},{preserveState:!0,preserveScroll:!0})},M=()=>{u.value.start_date="",u.value.end_date="",V.get(k("old-orders.index"),{},{preserveState:!0})},O=p(!1),_=p(""),m=p([]),h=p(!1),D=p(!1),d=p([]),U=()=>{O.value=!1,_.value="",m.value=[],d.value=[],D.value=!1},q=async()=>{if(_.value){h.value=!0,D.value=!0;try{const r=await N.get(k("old-orders.by-date"),{params:{date:_.value}});m.value=r.data,d.value=r.data.map(e=>e.id)}catch(r){console.error("Error fetching orders:",r)}finally{h.value=!1}}},G=W(()=>m.value.length>0&&d.value.length===m.value.length),H=r=>{r?d.value=m.value.map(e=>e.id):d.value=[]},J=async()=>{if(d.value.length!==0)try{const r=await N.post(k("old-orders.bulk-print"),{ids:d.value},{responseType:"blob"}),e=window.URL.createObjectURL(new Blob([r.data],{type:"application/pdf"})),f=document.createElement("a");f.href=e,f.target="_blank",document.body.appendChild(f),f.click(),document.body.removeChild(f),setTimeout(()=>window.URL.revokeObjectURL(e),100)}catch(r){console.error("Error generating PDF:",r),alert("Gagal membuat PDF. Silakan coba lagi.")}},F=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),k=(r,e)=>typeof window<"u"&&window.route?window.route(r,e):"#";return(r,e)=>(n(),I(X,null,{default:l(()=>{var f;return[a(x(Z),{title:"Old Order"}),t("div",oe,[t("div",de,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Old Order"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Data order dari sistem lama. ")],-1)),t("button",{onClick:e[0]||(e[0]=s=>O.value=!0),class:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-primary-500 text-white font-semibold hover:bg-primary-600 transition-all shadow-lg shadow-primary-500/25"},[a(x(A),{size:18}),e[5]||(e[5]=i(" Cetak Massal ",-1))])])]),t("div",ne,[t("div",ie,[t("div",ue,[a(Y,{url:k("old-orders.index"),placeholder:"Cari Code Order..."},null,8,["url"])]),t("div",ce,[j(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>u.value.start_date=s),onChange:B,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,544),[[$,u.value.start_date]]),e[7]||(e[7]=t("span",{class:"text-slate-400"},"-",-1)),j(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>u.value.end_date=s),onChange:B,class:"h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,544),[[$,u.value.end_date]])]),u.value.start_date||u.value.end_date?(n(),b("button",{key:0,onClick:M,class:"h-10 px-4 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-all"}," Reset ")):T("",!0)])]),c.orders.data.length>0?(n(),I(te,{key:0,title:"Daftar Old Order"},{default:l(()=>[a(ee,null,{default:l(()=>[a(ae,null,{default:l(()=>[t("tr",null,[a(v,{class:"w-10"},{default:l(()=>[...e[8]||(e[8]=[i("No",-1)])]),_:1}),a(v,null,{default:l(()=>[...e[9]||(e[9]=[i("Code Order",-1)])]),_:1}),a(v,null,{default:l(()=>[...e[10]||(e[10]=[i("Customer",-1)])]),_:1}),a(v,{class:"text-center"},{default:l(()=>[...e[11]||(e[11]=[i("Total Barang",-1)])]),_:1}),a(v,{class:"text-right"},{default:l(()=>[...e[12]||(e[12]=[i("Total Harga",-1)])]),_:1}),a(v,null,{default:l(()=>[...e[13]||(e[13]=[i("Tanggal",-1)])]),_:1}),a(v,{class:"text-center"},{default:l(()=>[...e[14]||(e[14]=[i("Aksi",-1)])]),_:1})])]),_:1}),a(se,null,{default:l(()=>[(n(!0),b(z,null,L(c.orders.data,(s,w)=>(n(),b("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[a(g,{class:"text-center"},{default:l(()=>[i(o(++w+(c.orders.current_page-1)*c.orders.per_page),1)]),_:2},1024),a(g,null,{default:l(()=>[t("span",me,o(s.id),1)]),_:2},1024),a(g,null,{default:l(()=>{var y;return[t("div",fe,[a(x(Q),{size:16,class:"text-slate-400"}),t("span",xe,o(((y=s.customer)==null?void 0:y.nama)||"-"),1)])]}),_:2},1024),a(g,{class:"text-center"},{default:l(()=>[t("span",be,o(s.total_barang),1)]),_:2},1024),a(g,{class:"text-right text-slate-900 dark:text-white font-bold"},{default:l(()=>[i(o(F(s.total_harga)),1)]),_:2},1024),a(g,null,{default:l(()=>[t("span",pe,o(s.created_at?new Date(s.created_at).toLocaleDateString("id-ID"):"-"),1)]),_:2},1024),a(g,null,{default:l(()=>[t("div",ve,[t("button",{onClick:y=>x(V).visit(k("old-orders.show",s.id)),class:"p-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 transition-colors",title:"Detail"},[a(x(K),{size:18})],8,ge)])]),_:2},1024)]))),128))]),_:1})]),_:1})]),_:1})):(n(),b("div",_e,[t("div",ke,[a(x(R),{size:32,class:"text-slate-400","stroke-width":1.5})]),e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-1"}," Tidak Ada Data ",-1)),e[16]||(e[16]=t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Tidak ditemukan data old order. ",-1))])),(f=c.orders)!=null&&f.links&&c.orders.links.length>3?(n(),I(le,{key:2,links:c.orders.links},null,8,["links"])):T("",!0),a(re,{show:O.value,onClose:U,title:"Cetak Massal Invoice",maxWidth:"2xl"},{default:l(()=>[t("div",he,[t("div",ye,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Pilih Tanggal Order ",-1)),t("div",we,[j(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>_.value=s),class:"flex-1 h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[$,_.value]]),t("button",{onClick:q,disabled:!_.value||h.value,class:"px-4 py-2 rounded-xl bg-slate-900 dark:bg-slate-800 text-white text-sm font-semibold hover:bg-slate-800 dark:hover:bg-slate-700 disabled:opacity-50 transition-all"},o(h.value?"Loading...":"Tampilkan Order"),9,Ce)])]),m.value.length>0?(n(),b("div",Oe,[t("div",De,[t("h3",Ie," Daftar Order ("+o(m.value.length)+" ditemukan) ",1),t("div",je,[a(E,{"model-value":G.value,"onUpdate:modelValue":H},null,8,["model-value"]),e[18]||(e[18]=t("span",{class:"text-xs text-slate-500"},"Pilih Semua",-1))])]),t("div",$e,[(n(!0),b(z,null,L(m.value,s=>{var w;return n(),b("div",{key:s.id,class:"flex items-center justify-between p-3 rounded-xl border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all"},[t("div",Te,[t("span",Ve,o(s.id),1),t("div",Be,[t("span",Ue,o(((w=s.customer)==null?void 0:w.nama)||"-"),1),t("span",Fe,o(F(s.total_harga)),1)])]),a(E,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=y=>d.value=y),value:s.id},null,8,["modelValue","value"])])}),128))]),t("div",Se,[t("button",{onClick:U,class:"px-5 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 font-semibold hover:bg-slate-50 dark:hover:bg-slate-800 transition-all"}," Batal "),t("button",{onClick:J,disabled:d.value.length===0,class:"px-5 py-2.5 rounded-xl bg-primary-500 text-white font-semibold hover:bg-primary-600 disabled:opacity-50 transition-all shadow-lg shadow-primary-500/25 flex items-center gap-2"},[a(x(A),{size:18}),i(" Cetak ("+o(d.value.length)+") ",1)],8,Pe)])])):D.value&&!h.value?(n(),b("div",Le,[t("div",ze,[a(x(R),{size:24,class:"text-slate-400"})]),e[19]||(e[19]=t("p",{class:"text-sm text-slate-500"},"Tidak ada order pada tanggal yang dipilih.",-1))])):T("",!0)])]),_:1},8,["show"])]}),_:1}))}};export{dt as default};
