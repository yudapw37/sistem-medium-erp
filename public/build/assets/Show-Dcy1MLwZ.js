import{A as k,a as n,c as m,w as u,b as o,u as l,Z as D,d as t,e as r,j as I,t as a,g as d,F as y,n as h,p as S,h as T,O as C}from"./app-CIYeQ-4j.js";import{I as F}from"./IconArrowLeft-D_cLVqwd.js";import{I as L}from"./IconBook-Coshvfeg.js";import{I as w}from"./IconCheck-WfpMGL5V.js";import{f as B,_ as P}from"./DashboardLayout-CDE7-Y8V.js";import{I as N}from"./IconClock-DN9tYPf9.js";import{I as O}from"./IconEdit-CjjI1lSj.js";import{_ as f}from"./TableCard-DWxSJUUQ.js";import{_ as j}from"./Button-CxuUSqWK.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";const K={class:"mb-6"},V={class:"flex justify-between items-center"},q={class:"text-sm text-slate-500"},A={class:"flex gap-2"},M={key:1,class:"px-4 py-2 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 rounded-xl font-bold flex items-center gap-2"},$={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},E={class:"lg:col-span-2 space-y-6"},R={class:"p-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={class:"space-y-4"},H={class:"text-slate-900 dark:text-white font-medium"},J={class:"text-slate-900 dark:text-white font-medium"},Z={class:"space-y-4"},U={class:"text-slate-900 dark:text-white font-medium"},W={class:"text-slate-900 dark:text-white font-medium"},X={class:"text-slate-900 dark:text-white font-medium"},Y={class:"overflow-x-auto"},tt={class:"w-full text-sm"},et={class:"divide-y divide-slate-100 dark:divide-slate-700"},st={class:"px-3 py-4"},at={class:"font-medium text-slate-900 dark:text-white"},nt={class:"text-xs text-slate-500"},it={class:"px-3 py-4 text-center"},ot={class:"px-3 py-4 text-right"},lt={class:"px-3 py-4 text-right"},rt={class:"bg-slate-50 dark:bg-slate-800/50 font-bold"},dt={class:"px-3 py-4 text-center"},ct={class:"px-3 py-4 text-right text-primary-600"},ut={class:"space-y-6"},xt={class:"font-bold text-sm uppercase tracking-wider"},pt={key:0,class:"text-xs opacity-80"},bt={key:1,class:"text-xs opacity-80"},mt={key:0,class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-900/30 p-4 rounded-2xl"},ft={class:"flex gap-3"},gt={class:"text-xs text-blue-800 dark:text-blue-400 space-y-2"},kt={key:0},yt={key:1},Ot={__name:"Show",props:{transaction:Object,reasonLabels:Object},setup(s){const x=s,v=k(()=>x.transaction.details.reduce((c,e)=>c+e.qty,0)),_=k(()=>x.transaction.details.reduce((c,e)=>c+e.qty*e.buy_price,0)),p=c=>new Intl.NumberFormat("id-ID").format(c),z=()=>{confirm("Finalkan transaksi ini? Stok akan diupdate dan data akan dikunci.")&&C.post(b("zero-value-transactions.finalize",x.transaction.id))},b=(c,e)=>typeof window<"u"&&window.route?window.route(c,e):"#";return(c,e)=>(n(),m(P,null,{default:u(()=>[o(l(D),{title:`Detail Transaksi - ${s.transaction.code}`},null,8,["title"]),t("div",K,[o(l(I),{href:b("zero-value-transactions.index"),class:"inline-flex items-center text-sm text-slate-500 hover:text-primary-600 transition-colors mb-2"},{default:u(()=>[o(l(F),{size:16,class:"mr-1"}),e[0]||(e[0]=r(" Kembali ke Daftar ",-1))]),_:1},8,["href"]),t("div",V,[t("div",null,[e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Detail Transaksi",-1)),t("p",q,a(s.transaction.code),1)]),t("div",A,[s.transaction.status==="draft"?(n(),d(y,{key:0},[o(j,{type:"link",class:"bg-amber-500 hover:bg-amber-600 text-white shadow-lg shadow-amber-500/30",label:"Edit Draft",href:b("zero-value-transactions.edit",s.transaction.id),icon:l(O)},null,8,["href","icon"]),t("button",{onClick:z,class:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-500/30 transition-all"},[o(l(w),{size:18}),e[2]||(e[2]=r(" Finalize ",-1))])],64)):(n(),d("span",M,[o(l(w),{size:18}),e[3]||(e[3]=r(" Finalized ",-1))]))])])]),t("div",$,[t("div",E,[o(f,{title:"Informasi Transaksi"},{default:u(()=>{var i,g;return[t("div",R,[t("div",Q,[t("div",G,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},"Tipe",-1)),t("span",{class:h(["px-2 py-1 rounded-full text-xs font-semibold",s.transaction.type==="in"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"])},a(s.transaction.type==="in"?"Stok Masuk":"Stok Keluar"),3)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},"Alasan",-1)),t("p",H,a(s.reasonLabels[s.transaction.reason]||s.transaction.reason),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},"Gudang",-1)),t("p",J,a((i=s.transaction.warehouse)==null?void 0:i.name),1)])]),t("div",Z,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},"Tanggal",-1)),t("p",U,a(new Date(s.transaction.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},"Dibuat Oleh",-1)),t("p",W,a((g=s.transaction.user)==null?void 0:g.name),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1"},"Catatan",-1)),t("p",X,a(s.transaction.notes||"-"),1)])])])])]}),_:1}),o(f,{title:"Daftar Produk"},{default:u(()=>[t("div",Y,[t("table",tt,[e[12]||(e[12]=t("thead",{class:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 font-semibold border-b border-slate-100 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-3 py-3 text-left"},"Produk"),t("th",{class:"px-3 py-3 text-center"},"Qty"),t("th",{class:"px-3 py-3 text-right"},"HPP (Satuan)"),t("th",{class:"px-3 py-3 text-right"},"Subtotal")])],-1)),t("tbody",et,[(n(!0),d(y,null,S(s.transaction.details,i=>(n(),d("tr",{key:i.id},[t("td",st,[t("div",at,a(i.product.title),1),t("div",nt,a(i.product.code),1)]),t("td",it,a(i.qty),1),t("td",ot,"Rp "+a(p(i.buy_price)),1),t("td",lt,"Rp "+a(p(i.qty*i.buy_price)),1)]))),128))]),t("tfoot",rt,[t("tr",null,[e[10]||(e[10]=t("td",{class:"px-3 py-4 text-slate-900 dark:text-white"},"TOTAL",-1)),t("td",dt,a(v.value),1),e[11]||(e[11]=t("td",{class:"px-3 py-4"},null,-1)),t("td",ct,"Rp "+a(p(_.value)),1)])])])])]),_:1})]),t("div",ut,[o(f,{title:"Status Transaksi"},{default:u(()=>[t("div",{class:h(["flex items-center gap-3 p-4 rounded-xl",s.transaction.status==="finalized"?"bg-green-50 dark:bg-green-900/20 text-green-700":"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700"])},[s.transaction.status==="finalized"?(n(),m(l(B),{key:0,size:24})):(n(),m(l(N),{key:1,size:24})),t("div",null,[t("p",xt,a(s.transaction.status==="finalized"?"Finalized":"Draft"),1),s.transaction.finalized_at?(n(),d("p",pt," Difinalkan pada "+a(new Date(s.transaction.finalized_at).toLocaleString("id-ID")),1)):(n(),d("p",bt," Masih dapat diubah atau dihapus "))])],2)]),_:1}),s.transaction.status==="finalized"?(n(),d("div",mt,[t("div",ft,[o(l(L),{class:"text-blue-600 shrink-0",size:20}),t("div",gt,[e[15]||(e[15]=t("p",{class:"font-bold"},"Info Jurnal",-1)),e[16]||(e[16]=t("p",null,"Transaksi ini telah mencatat jurnal akuntansi otomatis.",-1)),s.transaction.type==="out"?(n(),d("p",kt,[...e[13]||(e[13]=[r("Mencatat: ",-1),t("b",null,"Beban Kerugian Barang",-1),r(" (Debit) dan ",-1),t("b",null,"Persediaan",-1),r(" (Kredit).",-1)])])):(n(),d("p",yt,[...e[14]||(e[14]=[r("Mencatat: ",-1),t("b",null,"Persediaan",-1),r(" (Debit) dan ",-1),t("b",null,"Pendapatan Lain-lain",-1),r(" (Kredit).",-1)])]))])])])):T("",!0)])])]),_:1}))}};export{Ot as default};
