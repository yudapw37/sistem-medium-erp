import{T as j,r as g,J as H,A as C,a as d,c as N,w as $,b as u,u as l,Z as T,d as t,k as c,v as b,g as i,t as o,h as m,F as I,p as V,O as A}from"./app-DA0EYa_6.js";import{I as F}from"./IconArrowLeft-gRB0gwWT.js";import{I as z}from"./IconTrash-BZm3hFVP.js";import{_ as E}from"./DashboardLayout-DqHF1oae.js";import{_ as f}from"./Button-mcRGNCmf.js";import{_ as L}from"./InputSelect-BqzyB0VS.js";import{l as O}from"./lodash-De9ynbB3.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";import"./IconCircleFilled-C8aRf-1y.js";const R={class:"mb-6"},J={class:"flex items-center justify-between"},K={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Q={class:"lg:col-span-1 space-y-6"},M={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},W={class:"space-y-4"},Z={key:0,class:"text-sm text-red-500 mt-1"},G={key:0,class:"text-sm text-red-500 mt-1"},X={key:0,class:"text-sm text-red-500 mt-1"},Y={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},tt={class:"relative"},et={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-xl max-h-64 overflow-y-auto"},st=["onClick"],lt={class:"font-medium text-slate-900 dark:text-white text-sm"},rt={class:"text-xs text-slate-500"},at={class:"lg:col-span-2"},ot={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},dt={class:"w-full"},it={class:"divide-y divide-slate-100 dark:divide-slate-700"},nt={key:0},ut={class:"py-3"},ct={class:"font-medium text-slate-900 dark:text-white text-sm"},bt={class:"py-3 text-right text-sm"},mt={class:"py-3 text-center"},pt=["onUpdate:modelValue"],xt={class:"py-3 text-right font-medium text-slate-900 dark:text-white text-sm"},kt={class:"py-3 text-center"},_t=["onClick"],gt={class:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-700"},ft={class:"flex justify-between items-center mb-2"},ht={class:"text-lg text-slate-700 dark:text-slate-300"},vt={class:"flex justify-between items-center mb-2"},yt={class:"text-lg font-bold text-primary-600"},wt={class:"flex justify-between items-center mb-2"},Bt={class:"text-lg font-bold text-success-600"},Ct={class:"flex justify-between items-center mb-6"},It={class:"text-lg font-bold text-slate-700 dark:text-slate-300"},Vt={class:"flex justify-end gap-3"},St={key:0,class:"text-sm text-red-500 mr-auto"},Rt={__name:"Create",props:{products:Array},setup(qt){const s=j({code:"",name:"",description:"",sell_price:0,is_active:!0,items:[]}),h=[{id:1,name:"Aktif",value:!0},{id:0,name:"Nonaktif",value:!1}],v=g(h[0]),S=a=>{v.value=a,s.is_active=a.value},p=g(""),x=g([]),y=O.debounce(async()=>{if(!p.value){x.value=[];return}try{const a=await H.post(k("product-bundles.searchProduct"),{q:p.value});x.value=a.data}catch(a){console.error(a)}},300),q=a=>{const e=s.items.find(r=>r.product_id===a.id);e?e.qty++:s.items.push({product_id:a.id,title:a.title,sell_price:a.sell_price,weight:a.weight??0,qty:1}),p.value="",x.value=[]},D=a=>{s.items.splice(a,1)},w=C(()=>s.items.reduce((a,e)=>a+e.sell_price*e.qty,0)),P=C(()=>s.items.reduce((a,e)=>a+(e.weight??0)*e.qty,0)),U=()=>{s.post(k("product-bundles.store"))},n=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a||0),k=(a,e)=>typeof window<"u"&&window.route?window.route(a,e):"#";return(a,e)=>(d(),N(E,null,{default:$(()=>[u(l(T),{title:"Buat Bundle Baru"}),t("div",R,[t("div",J,[e[7]||(e[7]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Buat Bundle Baru"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"Buat paket bundling produk baru")],-1)),u(f,{type:"link",icon:l(F),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300",label:"Kembali",href:k("product-bundles.index")},null,8,["icon","href"])])]),t("div",K,[t("div",Q,[t("div",M,[e[12]||(e[12]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Informasi Bundle",-1)),t("div",W,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Kode Bundle",-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>l(s).code=r),type:"text",placeholder:"BDL-001",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200"},null,512),[[b,l(s).code]]),l(s).errors.code?(d(),i("p",Z,o(l(s).errors.code),1)):m("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Nama Bundle",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>l(s).name=r),type:"text",placeholder:"Paket Hemat",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200"},null,512),[[b,l(s).name]]),l(s).errors.name?(d(),i("p",G,o(l(s).errors.name),1)):m("",!0)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Harga Jual Bundle",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>l(s).sell_price=r),type:"number",min:"0",placeholder:"0",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200"},null,512),[[b,l(s).sell_price]]),l(s).errors.sell_price?(d(),i("p",X,o(l(s).errors.sell_price),1)):m("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Deskripsi",-1)),c(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>l(s).description=r),rows:"3",placeholder:"Deskripsi bundle...",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 resize-none"},null,512),[[b,l(s).description]])]),t("div",null,[u(L,{label:"Status",data:h,selected:v.value,"set-selected":S,placeholder:"Pilih status",errors:l(s).errors.is_active},null,8,["selected","errors"])])])]),t("div",Y,[e[13]||(e[13]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Cari Produk",-1)),t("div",tt,[c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>p.value=r),onInput:e[5]||(e[5]=(...r)=>l(y)&&l(y)(...r)),type:"text",placeholder:"Cari produk...",class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200"},null,544),[[b,p.value]]),x.value.length>0?(d(),i("div",et,[(d(!0),i(I,null,V(x.value,r=>(d(),i("div",{key:r.id,onClick:_=>q(r),class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b last:border-0"},[t("p",lt,o(r.title),1),t("p",rt,o(r.barcode)+" - "+o(n(r.sell_price)),1)],8,st))),128))])):m("",!0)])])]),t("div",at,[t("div",ot,[e[20]||(e[20]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Item dalam Bundle",-1)),t("table",dt,[e[15]||(e[15]=t("thead",null,[t("tr",{class:"border-b border-slate-100 dark:border-slate-700 text-left text-sm text-slate-500"},[t("th",{class:"pb-3"},"Produk"),t("th",{class:"pb-3 text-right"},"Harga Satuan"),t("th",{class:"pb-3 text-center w-24"},"Qty"),t("th",{class:"pb-3 text-right"},"Subtotal"),t("th",{class:"pb-3 w-10"})])],-1)),t("tbody",it,[l(s).items.length===0?(d(),i("tr",nt,[...e[14]||(e[14]=[t("td",{colspan:"5",class:"py-8 text-center text-slate-500 italic text-sm"},"Belum ada item",-1)])])):m("",!0),(d(!0),i(I,null,V(l(s).items,(r,_)=>(d(),i("tr",{key:_},[t("td",ut,[t("span",ct,o(r.title),1)]),t("td",bt,o(n(r.sell_price)),1),t("td",mt,[c(t("input",{type:"number","onUpdate:modelValue":B=>r.qty=B,min:"1",class:"w-16 px-2 py-1 text-center text-sm rounded-lg border border-slate-200 bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,pt),[[b,r.qty]])]),t("td",xt,o(n(r.sell_price*r.qty)),1),t("td",kt,[t("button",{onClick:B=>D(_),class:"text-slate-400 hover:text-danger-500"},[u(l(z),{size:18})],8,_t)])]))),128))])]),t("div",gt,[t("div",ft,[e[16]||(e[16]=t("span",{class:"text-slate-600 dark:text-slate-400"},"Total Harga Ecer",-1)),t("span",ht,o(n(w.value)),1)]),t("div",vt,[e[17]||(e[17]=t("span",{class:"text-slate-600 dark:text-slate-400"},"Harga Bundle",-1)),t("span",yt,o(n(l(s).sell_price)),1)]),t("div",wt,[e[18]||(e[18]=t("span",{class:"text-slate-600 dark:text-slate-400"},"Hemat",-1)),t("span",Bt,o(n(w.value-l(s).sell_price)),1)]),t("div",Ct,[e[19]||(e[19]=t("span",{class:"text-slate-600 dark:text-slate-400"},"Total Berat",-1)),t("span",It,o(P.value)+" gram",1)]),t("div",Vt,[l(s).errors.items?(d(),i("p",St,o(l(s).errors.items),1)):m("",!0),u(f,{type:"button",label:"Batal",class:"bg-white border border-slate-200 text-slate-700",onClick:e[6]||(e[6]=r=>l(A).visit(k("product-bundles.index")))}),u(f,{type:"submit",label:"Simpan Bundle",class:"bg-primary-500 hover:bg-primary-600 text-white",processing:l(s).processing,onClick:U},null,8,["processing"])])])])])])]),_:1}))}};export{Rt as default};
