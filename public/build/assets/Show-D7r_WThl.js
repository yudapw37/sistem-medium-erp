import{T as j,a as u,c as M,w as n,b as a,u as l,Z as N,d as e,t as i,n as V,g as b,e as d,k as y,v as c,x as $,F as _,p as h,h as B,f as T}from"./app-CIYeQ-4j.js";import{I as A}from"./IconArrowLeft-D_cLVqwd.js";import{c as R}from"./IconSun-B2kMHmLk.js";import{f as U,_ as F}from"./DashboardLayout-CDE7-Y8V.js";import{_ as I}from"./Button-CxuUSqWK.js";import{_ as L}from"./Table-W38pwiux.js";import{_ as O}from"./TableCard-DWxSJUUQ.js";import{_ as q,a as z}from"./TableTbody-B6-z0LtQ.js";import{_ as x,a as f}from"./TableTh-C_S67pHj.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";const J={class:"mb-6"},E={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},K={class:"text-sm text-slate-500 dark:text-slate-400"},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},G={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},H={class:"p-6 space-y-3"},Q={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},W={class:"font-semibold text-slate-900 dark:text-white"},X={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},Y={class:"text-slate-900 dark:text-white"},tt={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},et={class:"font-mono font-bold text-slate-900 dark:text-white"},st={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},at={class:"font-mono text-green-600"},lt={class:"flex justify-between py-2"},nt={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},ot={class:"p-6"},rt={class:"space-y-4"},dt={class:"grid grid-cols-2 gap-4"},it=["value"],mt={class:"relative"},ut=["value"],bt={class:"text-xs text-slate-500 mt-1"},ft={key:0,class:"grid grid-cols-2 gap-4"},xt={key:1,class:"text-center py-8"},pt={class:"mt-6"},gt={key:1},Nt={__name:"Show",props:{sale:Object,payments:Array,paidAmount:Number,remaining:Number,paymentMethods:Object},setup(r){const D=r,o=j({payment_date:new Date().toISOString().slice(0,10),amount:"",payment_method:"",bank_name:"",bank_account:"",notes:""}),C=m=>m?m.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"",P=m=>m.replace(/\./g,"").replace(/[^0-9]/g,""),S=()=>{o.post(w("receivables.payment",D.sale.id))},k=m=>m?new Date(m).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",p=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m||0),w=(m,t)=>typeof window<"u"&&window.route?window.route(m,t):"#";return(m,t)=>(u(),M(F,null,{default:n(()=>{var v;return[a(l(N),{title:`Piutang - ${r.sale.invoice}`},null,8,["title"]),e("div",J,[e("div",E,[e("div",null,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Detail Piutang",-1)),e("p",K," Invoice: "+i(r.sale.invoice),1)]),a(I,{type:"link",icon:l(A),class:"bg-white border border-slate-200 text-slate-700",label:"Kembali",href:w("receivables.index")},null,8,["icon","href"])])]),e("div",Z,[e("div",G,[t[12]||(t[12]=e("div",{class:"bg-primary-500 px-6 py-4"},[e("h3",{class:"text-lg font-bold text-white"},"Informasi Penjualan")],-1)),e("div",H,[e("div",Q,[t[7]||(t[7]=e("span",{class:"text-slate-500"},"Pelanggan",-1)),e("span",W,i((v=r.sale.customer)==null?void 0:v.name),1)]),e("div",X,[t[8]||(t[8]=e("span",{class:"text-slate-500"},"Tanggal",-1)),e("span",Y,i(k(r.sale.created_at)),1)]),e("div",tt,[t[9]||(t[9]=e("span",{class:"text-slate-500"},"Total",-1)),e("span",et,i(p(r.sale.grand_total)),1)]),e("div",st,[t[10]||(t[10]=e("span",{class:"text-slate-500"},"Dibayar",-1)),e("span",at,i(p(r.paidAmount)),1)]),e("div",lt,[t[11]||(t[11]=e("span",{class:"text-slate-500 font-bold"},"Sisa",-1)),e("span",{class:V(["font-mono text-xl font-bold",r.remaining>0?"text-red-600":"text-green-600"])},i(p(r.remaining)),3)])])]),e("div",nt,[t[22]||(t[22]=e("div",{class:"bg-green-500 px-6 py-4"},[e("h3",{class:"text-lg font-bold text-white"},"Catat Pembayaran")],-1)),e("div",ot,[r.remaining>0?(u(),b("form",{key:0,onSubmit:T(S,["prevent"])},[e("div",rt,[e("div",dt,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Tanggal "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>l(o).payment_date=s),required:"",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(o).payment_date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Metode "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).payment_method=s),required:"",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},[t[14]||(t[14]=e("option",{value:""},"-- Pilih --",-1)),(u(!0),b(_,null,h(r.paymentMethods,(s,g)=>(u(),b("option",{key:g,value:g},i(s),9,it))),128))],512),[[$,l(o).payment_method]])])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Jumlah Bayar "),e("span",{class:"text-red-500"},"*")],-1)),e("div",mt,[t[16]||(t[16]=e("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"},"Rp",-1)),e("input",{type:"text",value:C(l(o).amount),onInput:t[2]||(t[2]=s=>l(o).amount=P(s.target.value)),required:"",class:"w-full pl-12 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-right font-mono text-lg",placeholder:"0"},null,40,ut)]),e("p",bt,"Maksimal: "+i(p(r.remaining)),1)]),l(o).payment_method==="transfer"||l(o).payment_method==="giro"?(u(),b("div",ft,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Nama Bank",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>l(o).bank_name=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(o).bank_name]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"No. Rekening",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>l(o).bank_account=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(o).bank_account]])])])):B("",!0),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Catatan",-1)),y(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(o).notes=s),rows:"2",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(o).notes]])])]),a(I,{type:"submit",icon:l(R),label:"Simpan Pembayaran",class:"bg-green-500 text-white mt-4 w-full",disabled:l(o).processing},null,8,["icon","disabled"])],32)):(u(),b("div",xt,[a(l(U),{size:48,class:"mx-auto text-green-500 mb-4"}),t[21]||(t[21]=e("p",{class:"text-lg font-bold text-green-600"},"Piutang Lunas",-1))]))])])]),e("div",pt,[a(O,{title:"Riwayat Pembayaran"},{default:n(()=>[a(L,null,{default:n(()=>[a(q,null,{default:n(()=>[e("tr",null,[a(x,null,{default:n(()=>[...t[23]||(t[23]=[d("Referensi",-1)])]),_:1}),a(x,null,{default:n(()=>[...t[24]||(t[24]=[d("Tanggal",-1)])]),_:1}),a(x,null,{default:n(()=>[...t[25]||(t[25]=[d("Metode",-1)])]),_:1}),a(x,{class:"text-right"},{default:n(()=>[...t[26]||(t[26]=[d("Jumlah",-1)])]),_:1}),a(x,null,{default:n(()=>[...t[27]||(t[27]=[d("Catatan",-1)])]),_:1}),a(x,null,{default:n(()=>[...t[28]||(t[28]=[d("Oleh",-1)])]),_:1})])]),_:1}),a(z,null,{default:n(()=>[r.payments.length>0?(u(!0),b(_,{key:0},h(r.payments,s=>(u(),b("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50"},[a(f,{class:"font-mono text-primary-600"},{default:n(()=>[d(i(s.reference),1)]),_:2},1024),a(f,null,{default:n(()=>[d(i(k(s.payment_date)),1)]),_:2},1024),a(f,null,{default:n(()=>[d(i(r.paymentMethods[s.payment_method]||s.payment_method),1)]),_:2},1024),a(f,{class:"text-right font-mono text-green-600 font-bold"},{default:n(()=>[d("+"+i(p(s.amount)),1)]),_:2},1024),a(f,{class:"text-slate-500 max-w-[200px] truncate"},{default:n(()=>[d(i(s.notes||"-"),1)]),_:2},1024),a(f,null,{default:n(()=>{var g;return[d(i((g=s.user)==null?void 0:g.name),1)]}),_:2},1024)]))),128)):(u(),b("tr",gt,[a(f,{colspan:"6",class:"text-center py-8"},{default:n(()=>[...t[29]||(t[29]=[e("p",{class:"text-slate-500"},"Belum ada pembayaran",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1})])]}),_:1}))}};export{Nt as default};
