import{r as y,T as j,a as p,c as A,w as a,b as s,u as o,Z as R,d as t,e as r,g as b,p as G,t as d,h as T,O as P,F as U,k as D,v as N}from"./app-CIYeQ-4j.js";import{a as W}from"./IconSun-B2kMHmLk.js";import{I as C}from"./IconCheck-WfpMGL5V.js";import{I as E}from"./IconEye-0DdC_4Hy.js";import{I as L}from"./IconUser-CjGQ9nH3.js";import{I as V}from"./IconX-DHFi-BKV.js";import{_ as q}from"./DashboardLayout-CDE7-Y8V.js";import{_ as h}from"./Button-CxuUSqWK.js";import{_ as X}from"./Search-NBeUwUBy.js";import{_ as Z}from"./Table-W38pwiux.js";import{_ as H}from"./TableCard-DWxSJUUQ.js";import{_ as J,a as K}from"./TableTbody-B6-z0LtQ.js";import{_ as m,a as u}from"./TableTh-C_S67pHj.js";import{_ as Q}from"./Pagination-DUsmzl5y.js";import{_ as B}from"./Modal-BK6JeM5l.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconSearch-_c1o4uNe.js";import"./IconChevronRight-CKLwVeXD.js";const Y={class:"mb-4"},ee={class:"w-full sm:w-80"},te={class:"flex flex-col"},se={class:"font-bold text-slate-900 dark:text-white"},ae={key:0,class:"text-[10px] font-black text-amber-600 dark:text-amber-400 uppercase tracking-tight"},le={class:"text-slate-600 dark:text-slate-400"},oe={class:"flex items-center gap-2"},re={class:"flex items-center gap-2"},ne={key:0,class:"text-sm"},ie={class:"text-green-600 font-medium"},de={class:"text-xs text-slate-400"},ue={key:1,class:"text-slate-400"},pe={class:"flex items-center justify-center gap-1"},me=["onClick"],ce=["onClick"],fe=["onClick"],ge={key:1},ke={class:"flex flex-col items-center"},be={class:"w-14 h-14 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-3"},xe={class:"p-6"},ve={class:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl"},_e={class:"text-sm text-green-700 dark:text-green-300"},we={class:"mb-4"},he={class:"flex justify-end gap-3"},ye={class:"p-6"},Ce={class:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl"},$e={class:"text-sm text-red-700 dark:text-red-300"},Ie={class:"mb-4"},je={class:"flex justify-end gap-3"},Je={__name:"Warehouse",props:{sales:Object,filters:Object},setup(c){const x=y(!1),v=y(!1),g=y(null),_=j({notes:""}),k=j({notes:""}),F=i=>{g.value=i,_.notes="",x.value=!0},S=i=>{g.value=i,k.notes="",v.value=!0},z=()=>{_.post(w("approvals.warehouse.approve",g.value.id),{onSuccess:()=>{x.value=!1}})},M=()=>{k.post(w("approvals.warehouse.reject",g.value.id),{onSuccess:()=>{v.value=!1}})},O=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i||0),$=i=>new Date(i).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),w=(i,e)=>typeof window<"u"&&window.route?window.route(i,e):"#";return(i,e)=>(p(),A(q,null,{default:a(()=>{var I;return[s(o(R),{title:"Verifikasi Gudang"}),e[23]||(e[23]=t("div",{class:"mb-6"},[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Verifikasi Gudang"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Daftar transaksi menunggu approval dari Gudang ")])])],-1)),t("div",Y,[t("div",ee,[s(X,{url:w("approvals.warehouse.index"),placeholder:"Cari No. Invoice..."},null,8,["url"])])]),s(H,{title:"Pending Warehouse Approval"},{default:a(()=>[s(Z,null,{default:a(()=>[s(J,null,{default:a(()=>[t("tr",null,[s(m,{class:"w-10"},{default:a(()=>[...e[6]||(e[6]=[r("No",-1)])]),_:1}),s(m,null,{default:a(()=>[...e[7]||(e[7]=[r("No. Invoice",-1)])]),_:1}),s(m,null,{default:a(()=>[...e[8]||(e[8]=[r("Tanggal",-1)])]),_:1}),s(m,null,{default:a(()=>[...e[9]||(e[9]=[r("Customer",-1)])]),_:1}),s(m,null,{default:a(()=>[...e[10]||(e[10]=[r("Gudang",-1)])]),_:1}),s(m,null,{default:a(()=>[...e[11]||(e[11]=[r("Approved by Finance",-1)])]),_:1}),s(m,{class:"text-right"},{default:a(()=>[...e[12]||(e[12]=[r("Total",-1)])]),_:1}),s(m,{class:"text-center"},{default:a(()=>[...e[13]||(e[13]=[r("Aksi",-1)])]),_:1})])]),_:1}),s(K,null,{default:a(()=>[c.sales.data.length>0?(p(!0),b(U,{key:0},G(c.sales.data,(l,f)=>(p(),b("tr",{key:l.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[s(u,{class:"text-center"},{default:a(()=>[r(d(++f+(c.sales.current_page-1)*c.sales.per_page),1)]),_:2},1024),s(u,null,{default:a(()=>[t("div",te,[t("span",se,d(l.invoice),1),l.is_preorder?(p(),b("span",ae," Pre-Order ")):T("",!0)])]),_:2},1024),s(u,null,{default:a(()=>[t("span",le,d($(l.created_at)),1)]),_:2},1024),s(u,null,{default:a(()=>{var n;return[t("div",oe,[s(o(L),{size:16,class:"text-slate-400"}),t("span",null,d(((n=l.customer)==null?void 0:n.name)||"-"),1)])]}),_:2},1024),s(u,null,{default:a(()=>{var n;return[t("div",re,[s(o(W),{size:16,class:"text-slate-400"}),t("span",null,d(((n=l.warehouse)==null?void 0:n.name)||"-"),1)])]}),_:2},1024),s(u,null,{default:a(()=>{var n;return[l.finance_approval?(p(),b("div",ne,[t("span",ie,d((n=l.finance_approval.user)==null?void 0:n.name),1),t("p",de,d($(l.finance_approval.approved_at)),1)])):(p(),b("span",ue,"-"))]}),_:2},1024),s(u,{class:"text-right font-bold text-slate-900 dark:text-white"},{default:a(()=>[r(d(O(l.grand_total)),1)]),_:2},1024),s(u,{class:"text-center"},{default:a(()=>[t("div",pe,[t("button",{onClick:n=>F(l),class:"p-1.5 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/30 text-green-600 dark:text-green-400 transition-colors",title:"Approve"},[s(o(C),{size:18})],8,me),t("button",{onClick:n=>S(l),class:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors",title:"Reject"},[s(o(V),{size:18})],8,ce),t("button",{onClick:n=>o(P).visit(w("approvals.show",l.id)),class:"p-1.5 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 transition-colors",title:"Detail"},[s(o(E),{size:18})],8,fe)])]),_:2},1024)]))),128)):(p(),b("tr",ge,[s(u,{colspan:"8",class:"text-center py-12"},{default:a(()=>[t("div",ke,[t("div",be,[s(o(C),{size:28,class:"text-green-500"})]),e[14]||(e[14]=t("p",{class:"text-slate-500 dark:text-slate-400"},"Tidak ada transaksi yang menunggu approval",-1))])]),_:1})]))]),_:1})]),_:1})]),_:1}),(I=c.sales)!=null&&I.links&&c.sales.links.length>3?(p(),A(Q,{key:0,links:c.sales.links},null,8,["links"])):T("",!0),s(B,{show:x.value,onClose:e[2]||(e[2]=l=>x.value=!1),title:"Approve Transaksi"},{default:a(()=>{var l;return[t("div",xe,[t("div",ve,[t("p",_e,[e[15]||(e[15]=r(" Anda akan meng-approve transaksi ",-1)),t("strong",null,d((l=g.value)==null?void 0:l.invoice),1),e[16]||(e[16]=r(". Transaksi akan selesai dan berstatus ",-1)),e[17]||(e[17]=t("strong",null,"Completed",-1)),e[18]||(e[18]=r(". ",-1))])]),t("div",we,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Catatan (Opsional) ",-1)),D(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=f=>o(_).notes=f),rows:"3",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-green-500/20 focus:border-green-500",placeholder:"Catatan approval..."},null,512),[[N,o(_).notes]])]),t("div",he,[s(h,{type:"button",label:"Batal",class:"bg-slate-100 text-slate-600 hover:bg-slate-200",onClick:e[1]||(e[1]=f=>x.value=!1)}),s(h,{type:"button",icon:o(C),label:"Approve",class:"bg-green-500 hover:bg-green-600 text-white",onClick:z,disabled:o(_).processing},null,8,["icon","disabled"])])])]}),_:1},8,["show"]),s(B,{show:v.value,onClose:e[5]||(e[5]=l=>v.value=!1),title:"Tolak Transaksi"},{default:a(()=>{var l;return[t("div",ye,[t("div",Ce,[t("p",$e,[e[20]||(e[20]=r(" Anda akan menolak transaksi ",-1)),t("strong",null,d((l=g.value)==null?void 0:l.invoice),1),e[21]||(e[21]=r(". Stok akan dikembalikan dan transaksi akan dikembalikan ke Sales untuk diperbaiki. ",-1))])]),t("div",Ie,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[r(" Alasan Penolakan "),t("span",{class:"text-red-500"},"*")],-1)),D(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=f=>o(k).notes=f),rows:"3",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-red-500/20 focus:border-red-500",placeholder:"Masukkan alasan penolakan...",required:""},null,512),[[N,o(k).notes]])]),t("div",je,[s(h,{type:"button",label:"Batal",class:"bg-slate-100 text-slate-600 hover:bg-slate-200",onClick:e[4]||(e[4]=f=>v.value=!1)}),s(h,{type:"button",icon:o(V),label:"Tolak",class:"bg-red-500 hover:bg-red-600 text-white",onClick:M,disabled:!o(k).notes||o(k).processing},null,8,["icon","disabled"])])])]}),_:1},8,["show"])]}),_:1}))}};export{Je as default};
