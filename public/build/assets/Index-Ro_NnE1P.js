import{Q as Pe,i as ie,G as Oe,A as S,E as J,r as k,C as ee,o as te,a as t,g as l,d as e,c as T,u as n,b as v,w as G,j as U,t as m,f as Le,h as _,q as Fe,n as j,F as L,p as E,e as K,k as q,v as O,N as Z,J as Qe,O as H,Z as We}from"./app-DA0EYa_6.js";import{I as Je}from"./IconArrowRight-CpS1oDHc.js";import{f as Xe,g as Ze,h as Ye,e as ze,I as Me,d as et,a as Te,c as tt,b as st}from"./IconSun-9pmbsCzq.js";import{c as de}from"./createVueComponent-CUBUAVU4.js";import{I as xe}from"./IconReceipt-DjQT6mN-.js";import{I as ne}from"./IconShoppingCart-qle56F5S.js";import{I as Ae}from"./IconTrash-BZm3hFVP.js";import{I as Y}from"./IconHistory-Dellx8F8.js";import{I as pe}from"./IconUser-DDKj-MYF.js";import{I as se}from"./IconX-JXYWA-GE.js";import{I as ge}from"./IconShoppingBag-lYyQ_J6S.js";import{I as at}from"./IconPhoto-Bdg2Wu1E.js";import{g as Ne}from"./imageUrl-DBqZIQ1M.js";import{I as fe}from"./IconCheck--wdzxov0.js";import{I as lt}from"./IconSearch-hVNvfgeb.js";import{I as Ee}from"./IconUserPlus-C6sudAv8.js";import{I as Be}from"./IconLoader2-De_aCAbr.js";import{I as rt}from"./IconCalendar-B7TcRpGX.js";import{I as ot}from"./IconCoin-qlLQaaAp.js";import{I as nt}from"./IconClock-DpLzPaIL.js";/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var it=de("outline","backspace","Backspace",[["path",{d:"M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z",key:"svg-0"}],["path",{d:"M12 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var De=de("outline","home","Home",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dt=de("outline","keyboard","Keyboard",[["path",{d:"M2 6m0 2a2 2 0 0 1 2 -2h16a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M6 10l0 .01",key:"svg-1"}],["path",{d:"M10 10l0 .01",key:"svg-2"}],["path",{d:"M14 10l0 .01",key:"svg-3"}],["path",{d:"M18 10l0 .01",key:"svg-4"}],["path",{d:"M6 14l0 .01",key:"svg-5"}],["path",{d:"M18 14l0 .01",key:"svg-6"}],["path",{d:"M10 14l4 .01",key:"svg-7"}]]);/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut=de("outline","player-play","PlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);const ct={class:"min-h-screen flex flex-col bg-slate-50 dark:bg-slate-950"},mt={class:"sticky top-0 z-50 h-16 flex items-center justify-between px-4 lg:px-6 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shadow-sm"},bt={class:"flex items-center gap-4 lg:gap-6"},vt={class:"hidden md:flex items-center gap-3"},xt={class:"text-2xl font-semibold text-slate-800 dark:text-white tabular-nums"},pt={class:"text-sm text-slate-500 dark:text-slate-400"},gt={class:"flex items-center gap-2 lg:gap-3"},ft={class:"hidden lg:flex items-center gap-1"},ht=["title"],yt={class:"flex items-center gap-3 pl-2 lg:pl-3 border-l border-slate-200 dark:border-slate-700"},kt={class:"hidden sm:block text-right"},wt={class:"text-sm font-medium text-slate-700 dark:text-slate-200"},_t=["src","alt"],$t={class:"p-4 space-y-2"},Ct={class:"flex-1 overflow-hidden"},It={__name:"POSLayout",setup(a){const x=Pe(),f=ie(),{auth:o}=x.props,{darkMode:i,themeSwitcher:y}=Oe(),p=S(()=>x.props.flash);J(p,c=>{c!=null&&c.success&&f.success(c.success),c!=null&&c.error&&f.error(c.error)},{deep:!0,immediate:!0});const u=k(new Date),h=k(!1),$=c=>c.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),w=c=>c.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"short",year:"numeric"});let I=null;return ee(()=>{I=setInterval(()=>{u.value=new Date},6e4)}),te(()=>{I&&clearInterval(I)}),(c,r)=>(t(),l("div",ct,[e("header",mt,[e("div",bt,[e("button",{onClick:r[0]||(r[0]=b=>h.value=!h.value),class:"lg:hidden p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"},[h.value?(t(),T(n(se),{key:0,size:22,class:"text-slate-600 dark:text-slate-400"})):(t(),T(n(Xe),{key:1,size:22,class:"text-slate-600 dark:text-slate-400"}))]),v(n(U),{href:c.route("dashboard"),class:"flex items-center gap-2"},{default:G(()=>[...r[4]||(r[4]=[e("div",{class:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center"},[e("span",{class:"text-white font-bold text-sm"},"K")],-1),e("span",{class:"hidden sm:block text-lg font-bold text-slate-800 dark:text-white"}," KASIR ",-1)])]),_:1},8,["href"]),r[5]||(r[5]=e("div",{class:"hidden md:block w-px h-8 bg-slate-200 dark:bg-slate-700"},null,-1)),e("div",vt,[e("div",xt,m($(u.value)),1),e("div",pt,m(w(u.value)),1)])]),e("div",gt,[e("nav",ft,[v(n(U),{href:c.route("dashboard"),class:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-colors"},{default:G(()=>[v(n(De),{size:18}),r[6]||(r[6]=e("span",null,"Dashboard",-1))]),_:1},8,["href"]),v(n(U),{href:c.route("transactions.history"),class:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 dark:text-slate-400 dark:hover:text-white dark:hover:bg-slate-800 transition-colors"},{default:G(()=>[v(n(Y),{size:18}),r[7]||(r[7]=e("span",null,"Riwayat",-1))]),_:1},8,["href"])]),r[9]||(r[9]=e("div",{class:"hidden lg:block w-px h-8 bg-slate-200 dark:bg-slate-700"},null,-1)),e("button",{onClick:r[1]||(r[1]=(...b)=>n(y)&&n(y)(...b)),class:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors min-w-touch min-h-touch flex items-center justify-center",title:n(i)?"Light Mode":"Dark Mode"},[n(i)?(t(),T(n(Ze),{key:0,size:20,class:"text-amber-500"})):(t(),T(n(Ye),{key:1,size:20,class:"text-slate-500"}))],8,ht),e("div",yt,[e("div",kt,[e("p",wt,m(n(o).user.name),1),r[8]||(r[8]=e("p",{class:"text-xs text-slate-500 dark:text-slate-400"},"Kasir",-1))]),e("img",{src:n(o).user.avatar||`https://ui-avatars.com/api/?name=${n(o).user.name}&background=6366f1&color=fff`,alt:n(o).user.name,class:"w-9 h-9 rounded-full ring-2 ring-slate-200 dark:ring-slate-700"},null,8,_t)]),v(n(U),{href:c.route("logout"),method:"post",as:"button",class:"hidden lg:flex p-2.5 rounded-lg text-slate-500 hover:text-danger-600 hover:bg-danger-50 dark:hover:bg-danger-950/50 transition-colors min-w-touch min-h-touch items-center justify-center",title:"Logout"},{default:G(()=>[v(n(ze),{size:20})]),_:1},8,["href"])])]),h.value?(t(),l("div",{key:0,class:"lg:hidden fixed inset-0 z-40 bg-black/50",onClick:r[3]||(r[3]=b=>h.value=!1)},[e("div",{class:"absolute top-16 left-0 right-0 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 shadow-lg animate-slide-up",onClick:r[2]||(r[2]=Le(()=>{},["stop"]))},[e("nav",$t,[v(n(U),{href:c.route("dashboard"),class:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition-colors"},{default:G(()=>[v(n(De),{size:20}),r[10]||(r[10]=e("span",{class:"font-medium"},"Dashboard",-1))]),_:1},8,["href"]),v(n(U),{href:c.route("transactions.history"),class:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition-colors"},{default:G(()=>[v(n(Y),{size:20}),r[11]||(r[11]=e("span",{class:"font-medium"},"Riwayat Transaksi",-1))]),_:1},8,["href"]),v(n(U),{href:c.route("profile.edit"),class:"flex items-center gap-3 px-4 py-3 rounded-xl text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 transition-colors"},{default:G(()=>[v(n(pe),{size:20}),r[12]||(r[12]=e("span",{class:"font-medium"},"Profil",-1))]),_:1},8,["href"]),r[14]||(r[14]=e("hr",{class:"border-slate-200 dark:border-slate-700"},null,-1)),v(n(U),{href:c.route("logout"),method:"post",as:"button",class:"flex items-center gap-3 px-4 py-3 rounded-xl text-danger-600 hover:bg-danger-50 dark:hover:bg-danger-950/50 transition-colors w-full"},{default:G(()=>[v(n(ze),{size:20}),r[13]||(r[13]=e("span",{class:"font-medium"},"Keluar",-1))]),_:1},8,["href"])])])])):_("",!0),e("main",Ct,[Fe(c.$slots,"default")])]))}},jt=["disabled"],St={class:"relative aspect-square bg-slate-100 dark:bg-slate-800 overflow-hidden"},zt=["src","alt"],Tt={key:1,class:"w-full h-full flex items-center justify-center"},Dt={key:2,class:"absolute top-2 right-2 px-2 py-0.5 text-xs font-medium bg-warning-100 text-warning-700 dark:bg-warning-900/50 dark:text-warning-400 rounded-full"},Pt={key:3,class:"absolute top-2 left-2 px-2 py-0.5 text-xs font-bold bg-primary-500 text-white rounded-full uppercase shadow-sm"},Lt={key:4,class:"absolute inset-0 bg-slate-900/60 flex items-center justify-center"},Mt={class:"flex-1 p-3 flex flex-col justify-between min-h-[80px]"},At={class:"text-sm font-medium text-slate-800 dark:text-slate-200 line-clamp-2 leading-tight"},Nt={class:"mt-2 text-base font-bold text-primary-600 dark:text-primary-400"},Et={key:0,class:"absolute inset-0 bg-primary-500/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none flex items-center justify-center"},Bt={__name:"ProductCard",props:{product:Object,isAdding:Boolean},emits:["addToCart"],setup(a){const x=a,f=(y=0)=>y.toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),o=S(()=>x.product.stock>0),i=S(()=>x.product.stock>0&&x.product.stock<=5);return(y,p)=>(t(),l("button",{onClick:p[0]||(p[0]=u=>o.value&&y.$emit("addToCart",a.product)),disabled:!o.value||a.isAdding,class:j(["group relative flex flex-col bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden transition-all duration-200",o.value?"hover:border-primary-300 dark:hover:border-primary-700 hover:shadow-lg hover:-translate-y-0.5 active:scale-[0.98] cursor-pointer":"opacity-60 cursor-not-allowed"])},[e("div",St,[a.product.image?(t(),l("img",{key:0,src:n(Ne)(a.product.image),alt:a.product.title,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"},null,8,zt)):(t(),l("div",Tt,[v(n(at),{size:32,class:"text-slate-300 dark:text-slate-600"})])),i.value?(t(),l("span",Dt," Sisa "+m(a.product.stock),1)):_("",!0),a.product.type==="bundle"?(t(),l("span",Pt," Bundle ")):_("",!0),o.value?_("",!0):(t(),l("div",Lt,[...p[1]||(p[1]=[e("span",{class:"px-3 py-1 bg-danger-500 text-white text-xs font-semibold rounded-full"}," Habis ",-1)])]))]),e("div",Mt,[e("h3",At,m(a.product.title),1),e("p",Nt,m(f(a.product.sell_price)),1)]),o.value?(t(),l("div",Et,[...p[2]||(p[2]=[e("div",{class:"bg-primary-500 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform"}," + Tambah ",-1)])])):_("",!0)],10,jt))}},Vt={class:"h-full flex flex-col"},Kt={class:"p-4 border-b border-slate-200 dark:border-slate-800"},Rt={class:"flex flex-col sm:flex-row gap-3"},Gt={class:"w-full sm:w-40 flex-shrink-0"},Ht=["value"],Ut={class:"relative flex-1"},qt=["value","placeholder","disabled"],Ot={class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"},Ft={key:0,class:"w-5 h-5 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"},Qt={key:0,class:"px-4 py-3 border-b border-slate-200 dark:border-slate-800 overflow-x-auto scrollbar-hide"},Wt={class:"flex gap-2"},Jt=["onClick"],Xt={class:"flex-1 overflow-y-auto p-4 scrollbar-thin"},Zt={key:0,class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3"},Yt={key:1,class:"h-full flex flex-col items-center justify-center text-slate-400 dark:text-slate-600"},es={class:"text-sm"},ts={__name:"ProductGrid",props:{products:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},selectedCategory:[Number,String,null],searchQuery:{type:String,default:""},isSearching:{type:Boolean,default:!1},addingProductId:[Number,String,null],searchInputRef:Object,saleType:{type:String,default:"all"}},emits:["update:selectedCategory","update:searchQuery","update:saleType","search","addToCart"],setup(a,{emit:x}){const f=a,o=S(()=>f.products.filter(i=>{var u;const y=!f.selectedCategory||i.category_id===f.selectedCategory,p=!f.searchQuery||i.title.toLowerCase().includes(f.searchQuery.toLowerCase())||((u=i.barcode)==null?void 0:u.toLowerCase().includes(f.searchQuery.toLowerCase()));return y&&p}));return(i,y)=>(t(),l("div",Vt,[e("div",Kt,[e("div",Rt,[e("div",Gt,[e("select",{value:a.saleType,onChange:y[0]||(y[0]=p=>i.$emit("update:saleType",p.target.value)),class:"w-full h-12 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all text-sm font-medium"},[...y[4]||(y[4]=[e("option",{value:"all"},"Semua",-1),e("option",{value:"product"},"Eceran",-1),e("option",{value:"bundle"},"Bundling",-1)])],40,Ht)]),e("div",Ut,[e("input",{ref:"searchInputRef",type:"text",value:a.searchQuery,onInput:y[1]||(y[1]=p=>i.$emit("update:searchQuery",p.target.value)),onKeydown:y[2]||(y[2]=p=>p.key==="Enter"&&i.$emit("search")),placeholder:"Cari "+(a.saleType==="bundle"?"bundling":"produk")+"...",class:"w-full h-12 pl-4 pr-12 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 dark:focus:border-primary-500 transition-all text-base",disabled:a.isSearching},null,40,qt),e("div",Ot,[a.isSearching?(t(),l("div",Ft)):(t(),T(n(ge),{key:1,size:20}))])])])]),a.saleType!=="bundle"?(t(),l("div",Qt,[e("div",Wt,[e("button",{onClick:y[3]||(y[3]=p=>i.$emit("update:selectedCategory",null)),class:j(["px-4 py-2.5 rounded-xl text-sm font-medium whitespace-nowrap transition-all duration-200 min-h-touch",a.selectedCategory?"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 border border-slate-200 dark:border-slate-700":"bg-primary-500 text-white shadow-md shadow-primary-500/30"])}," Semua ",2),(t(!0),l(L,null,E(a.categories,p=>(t(),l("button",{key:p.id,onClick:u=>i.$emit("update:selectedCategory",p.id),class:j(["px-4 py-2.5 rounded-xl text-sm font-medium whitespace-nowrap transition-all duration-200 min-h-touch",a.selectedCategory===p.id?"bg-primary-500 text-white shadow-md shadow-primary-500/30":"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 border border-slate-200 dark:border-slate-700"])},m(p.name),11,Jt))),128))])])):_("",!0),e("div",Xt,[o.value.length>0?(t(),l("div",Zt,[(t(!0),l(L,null,E(o.value,p=>(t(),T(Bt,{key:p.id,product:p,"is-adding":a.addingProductId===p.id,onAddToCart:u=>i.$emit("addToCart",p)},null,8,["product","is-adding","onAddToCart"]))),128))])):(t(),l("div",Yt,[v(n(ge),{size:48,"stroke-width":1.5,class:"mb-3"}),e("p",es,m(a.searchQuery?"Produk tidak ditemukan":"Tidak ada produk"),1)]))])]))}},ss={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"},as={class:"w-full max-w-md bg-white dark:bg-slate-900 rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200"},ls={class:"bg-gradient-to-r from-primary-500 to-primary-600 px-6 py-4 flex items-center justify-between"},rs={class:"flex items-center gap-3 text-white"},os={class:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center"},ns={key:0,class:"mt-1 text-xs text-danger-500"},is={key:0,class:"mt-1 text-xs text-danger-500"},ds={key:0,class:"mt-1 text-xs text-danger-500"},us={class:"flex gap-3 pt-2"},cs=["disabled"],ms={__name:"AddCustomerModal",props:{isOpen:Boolean,onClose:Function,onSuccess:Function},setup(a){const x=a,f=ie(),o=k({name:"",no_telp:"",address:""}),i=k({}),y=k(!1),p=async()=>{var $,w,I,c,r;const h={};if(o.value.name.trim()||(h.name="Nama wajib diisi"),o.value.no_telp.trim()||(h.no_telp="No. telepon wajib diisi"),o.value.address.trim()||(h.address="Alamat wajib diisi"),Object.keys(h).length>0){i.value=h;return}y.value=!0;try{const b=await Qe.post(route("customers.storeAjax"),o.value);b.data.success?(f.success("Pelanggan berhasil ditambahkan"),o.value={name:"",no_telp:"",address:""},y.value=!1,($=x.onSuccess)==null||$.call(x,b.data.customer),x.onClose()):(i.value=b.data.errors||{},f.error(b.data.message||"Gagal menambahkan pelanggan"),y.value=!1)}catch(b){console.error("Add customer error:",b),(I=(w=b.response)==null?void 0:w.data)!=null&&I.errors&&(i.value=b.response.data.errors),f.error(((r=(c=b.response)==null?void 0:c.data)==null?void 0:r.message)||"Gagal menambahkan pelanggan"),y.value=!1}},u=()=>{o.value={name:"",no_telp:"",address:""},i.value={},x.onClose()};return(h,$)=>(t(),T(Z,{to:"body"},[a.isOpen?(t(),l("div",ss,[e("div",as,[e("div",ls,[e("div",rs,[e("div",os,[v(n(Ee),{size:20})]),$[3]||($[3]=e("div",null,[e("h3",{class:"font-semibold text-lg"},"Tambah Pelanggan"),e("p",{class:"text-sm text-white/80"},"Daftarkan pelanggan baru")],-1))]),e("button",{onClick:u,class:"w-8 h-8 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-colors"},[v(n(se),{size:18})])]),e("form",{onSubmit:Le(p,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[$[4]||($[4]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5"},[K(" Nama Pelanggan "),e("span",{class:"text-danger-500"},"*")],-1)),q(e("input",{type:"text",name:"name","onUpdate:modelValue":$[0]||($[0]=w=>o.value.name=w),placeholder:"Masukkan nama lengkap",class:j(["w-full h-11 px-4 rounded-xl border bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-4 transition-all",i.value.name?"border-danger-500 focus:ring-danger-500/20":"border-slate-200 dark:border-slate-700 focus:ring-primary-500/20 focus:border-primary-500"]),autofocus:""},null,2),[[O,o.value.name]]),i.value.name?(t(),l("p",ns,m(i.value.name),1)):_("",!0)]),e("div",null,[$[5]||($[5]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5"},[K(" No. Telepon "),e("span",{class:"text-danger-500"},"*")],-1)),q(e("input",{type:"tel",name:"no_telp","onUpdate:modelValue":$[1]||($[1]=w=>o.value.no_telp=w),placeholder:"Contoh: 08123456789",class:j(["w-full h-11 px-4 rounded-xl border bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-4 transition-all",i.value.no_telp?"border-danger-500 focus:ring-danger-500/20":"border-slate-200 dark:border-slate-700 focus:ring-primary-500/20 focus:border-primary-500"])},null,2),[[O,o.value.no_telp]]),i.value.no_telp?(t(),l("p",is,m(i.value.no_telp),1)):_("",!0)]),e("div",null,[$[6]||($[6]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5"},[K(" Alamat "),e("span",{class:"text-danger-500"},"*")],-1)),q(e("textarea",{name:"address","onUpdate:modelValue":$[2]||($[2]=w=>o.value.address=w),placeholder:"Masukkan alamat lengkap",rows:"3",class:j(["w-full px-4 py-3 rounded-xl border bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-4 transition-all resize-none",i.value.address?"border-danger-500 focus:ring-danger-500/20":"border-slate-200 dark:border-slate-700 focus:ring-primary-500/20 focus:border-primary-500"])},null,2),[[O,o.value.address]]),i.value.address?(t(),l("p",ds,m(i.value.address),1)):_("",!0)]),e("div",us,[e("button",{type:"button",onClick:u,class:"flex-1 h-11 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors"}," Batal "),e("button",{type:"submit",disabled:y.value,class:"flex-1 h-11 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-semibold flex items-center justify-center gap-2 disabled:opacity-50 transition-colors"},[y.value?(t(),T(n(Be),{key:0,size:18,class:"animate-spin"})):(t(),T(n(fe),{key:1,size:18})),K(" "+m(y.value?"Menyimpan...":"Simpan"),1)],8,cs)])],32)])])):_("",!0)]))}},bs={class:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-xl overflow-hidden"},vs={class:"bg-gradient-to-r from-primary-500 to-primary-600 px-4 py-3 flex items-center justify-between"},xs={class:"flex items-center gap-2 text-white"},ps={class:"px-4 py-3 border-b border-slate-100 dark:border-slate-800"},gs={class:"text-base font-semibold text-slate-900 dark:text-white"},fs={key:0,class:"p-6 flex items-center justify-center"},hs={class:"grid grid-cols-3 gap-px bg-slate-100 dark:bg-slate-800"},ys={class:"bg-white dark:bg-slate-900 p-3 text-center"},ks={class:"flex items-center justify-center mb-1"},ws={class:"text-lg font-bold text-slate-900 dark:text-white"},_s={class:"bg-white dark:bg-slate-900 p-3 text-center"},$s={class:"flex items-center justify-center mb-1"},Cs={class:"text-sm font-bold text-success-600 dark:text-success-400"},Is={class:"bg-white dark:bg-slate-900 p-3 text-center"},js={class:"flex items-center justify-center mb-1"},Ss={class:"text-sm font-medium text-slate-700 dark:text-slate-300"},zs={key:0,class:"px-4 py-3 border-t border-slate-100 dark:border-slate-800"},Ts={class:"text-xs font-semibold text-slate-500 uppercase mb-2 flex items-center gap-1"},Ds={class:"flex flex-wrap gap-2"},Ps={class:"text-primary-500"},Ls={key:1,class:"px-4 py-3 border-t border-slate-100 dark:border-slate-800"},Ms={class:"space-y-2 max-h-[150px] overflow-y-auto"},As={class:"text-xs font-medium text-slate-700 dark:text-slate-300"},Ns={class:"text-xs text-slate-400"},Es={class:"text-sm font-semibold text-slate-900 dark:text-white"},Bs={key:2,class:"px-4 py-6 text-center"},Vs={key:2,class:"p-6 text-center"},Ks={class:"text-sm text-danger-500"},Rs={__name:"CustomerHistoryPanel",props:{customerId:[Number,String],customerName:String,onClose:Function},setup(a){const x=a,f=k(!0),o=k(null),i=k(null),y=(p=0)=>p.toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0});return J(()=>x.customerId,async p=>{if(p){f.value=!0,i.value=null;try{const u=await fetch(route("customers.history",p),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!u.ok)throw new Error(`HTTP ${u.status}`);const h=await u.json();h.success?o.value=h:i.value=h.message||"Gagal memuat data"}catch(u){console.error("Customer history error:",u),i.value="Gagal memuat data pelanggan"}finally{f.value=!1}}},{immediate:!0}),(p,u)=>(t(),l("div",bs,[e("div",vs,[e("div",xs,[v(n(Y),{size:18}),u[1]||(u[1]=e("span",{class:"font-semibold text-sm"},"Riwayat Pelanggan",-1))]),a.onClose?(t(),l("button",{key:0,onClick:u[0]||(u[0]=(...h)=>a.onClose&&a.onClose(...h)),class:"text-white/80 hover:text-white"},[v(n(se),{size:18})])):_("",!0)]),e("div",ps,[e("p",gs,m(a.customerName),1)]),f.value?(t(),l("div",fs,[v(n(Be),{size:24,class:"animate-spin text-primary-500"})])):!i.value&&o.value?(t(),l(L,{key:1},[e("div",hs,[e("div",ys,[e("div",ks,[v(n(xe),{size:16,class:"text-primary-500"})]),e("p",ws,m(o.value.stats.total_transactions),1),u[2]||(u[2]=e("p",{class:"text-xs text-slate-500"},"Transaksi",-1))]),e("div",_s,[e("div",$s,[v(n(ot),{size:16,class:"text-success-500"})]),e("p",Cs,m(y(o.value.stats.total_spent)),1),u[3]||(u[3]=e("p",{class:"text-xs text-slate-500"},"Total Belanja",-1))]),e("div",Is,[e("div",js,[v(n(rt),{size:16,class:"text-slate-500"})]),e("p",Ss,m(o.value.stats.last_visit||"-"),1),u[4]||(u[4]=e("p",{class:"text-xs text-slate-500"},"Kunjungan Terakhir",-1))])]),o.value.frequent_products&&o.value.frequent_products.length>0?(t(),l("div",zs,[e("p",Ts,[v(n(ge),{size:12}),u[5]||(u[5]=K(" Produk Favorit ",-1))]),e("div",Ds,[(t(!0),l(L,null,E(o.value.frequent_products,h=>(t(),l("span",{key:h.id,class:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-primary-50 dark:bg-primary-950/50 text-xs font-medium text-primary-700 dark:text-primary-300"},[K(m(h.title)+" ",1),e("span",Ps,"×"+m(h.total_qty),1)]))),128))])])):_("",!0),o.value.recent_transactions&&o.value.recent_transactions.length>0?(t(),l("div",Ls,[u[6]||(u[6]=e("p",{class:"text-xs font-semibold text-slate-500 uppercase mb-2"}," Transaksi Terakhir ",-1)),e("div",Ms,[(t(!0),l(L,null,E(o.value.recent_transactions,h=>(t(),l("div",{key:h.id,class:"flex items-center justify-between py-1.5 border-b border-slate-50 dark:border-slate-800/50 last:border-0"},[e("div",null,[e("p",As,m(h.invoice),1),e("p",Ns,m(h.date),1)]),e("p",Es,m(y(h.total)),1)]))),128))])])):_("",!0),o.value.stats.total_transactions===0?(t(),l("div",Bs,[v(n(Y),{size:32,class:"mx-auto text-slate-300 mb-2"}),u[7]||(u[7]=e("p",{class:"text-sm text-slate-500"},"Belum ada transaksi",-1))])):_("",!0)],64)):_("",!0),i.value?(t(),l("div",Vs,[e("p",Ks,m(i.value),1)])):_("",!0)]))}},Gs={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"},Hs={class:"w-full max-w-sm animate-in zoom-in-95 duration-200"},Us={__name:"CustomerHistoryButton",props:{customerId:[Number,String],customerName:String},setup(a){const x=k(!1);return(f,o)=>(t(),l("div",null,[e("button",{onClick:o[0]||(o[0]=i=>x.value=!0),class:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 hover:text-primary-500 transition-colors",title:"Lihat riwayat"},[v(n(Y),{size:16})]),(t(),T(Z,{to:"body"},[x.value?(t(),l("div",Gs,[e("div",Hs,[v(Rs,{"customer-id":a.customerId,"customer-name":a.customerName,onClose:o[1]||(o[1]=i=>x.value=!1)},null,8,["customer-id","customer-name"])])])):_("",!0)]))]))}},qs={key:0,class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},Os={class:"flex items-center gap-2"},Fs={class:"flex-1 min-w-0"},Qs={class:"text-sm font-medium text-slate-800 dark:text-slate-200 truncate"},Ws={key:0,class:"text-xs text-slate-500 dark:text-slate-400 truncate"},Js={key:1,class:"text-sm text-slate-400 dark:text-slate-500"},Xs={key:1,class:"mt-1 text-xs text-danger-500"},Zs={key:2,class:"absolute top-full left-0 right-0 mt-2 rounded-xl bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 shadow-xl z-50 animate-slide-up overflow-hidden"},Ys={class:"p-3 border-b border-slate-100 dark:border-slate-800"},ea={class:"relative"},ta={class:"max-h-60 overflow-y-auto scrollbar-thin"},sa={key:0},aa=["onClick"],la={key:1,class:"text-sm font-medium"},ra={class:"flex-1 min-w-0"},oa={class:"text-sm font-medium text-slate-800 dark:text-slate-200 truncate"},na={class:"text-xs text-slate-500 dark:text-slate-400 truncate"},ia={key:1,class:"py-8 text-center text-slate-400 dark:text-slate-500"},da={__name:"CustomerSelect",props:{customers:{type:Array,default:()=>[]},selected:Object,placeholder:{type:String,default:"Pilih pelanggan..."},error:String,label:String,onCustomerAdded:Function},emits:["update:selected"],setup(a,{emit:x}){const f=a,o=x,i=k(!1),y=k(""),p=k(!1),u=k(null),h=k(null),$=S(()=>f.customers.filter(r=>{var b;return r.name.toLowerCase().includes(y.value.toLowerCase())||((b=r.phone)==null?void 0:b.toLowerCase().includes(y.value.toLowerCase()))})),w=r=>{u.value&&!u.value.contains(r.target)&&(i.value=!1)};ee(()=>{document.addEventListener("mousedown",w)}),te(()=>{document.removeEventListener("mousedown",w)}),J(i,r=>{r&&h.value&&h.value.focus()});const I=r=>{o("update:selected",r),i.value=!1,y.value=""},c=r=>{var b;p.value=!1,H.reload({only:["customers"]}),(b=f.onCustomerAdded)==null||b.call(f,r)};return(r,b)=>(t(),l("div",{ref_key:"containerRef",ref:u,class:"relative"},[a.label?(t(),l("label",qs,m(a.label),1)):_("",!0),e("div",Os,[e("button",{type:"button",onClick:b[0]||(b[0]=C=>i.value=!i.value),class:j(["flex-1 h-12 px-4 rounded-xl text-left flex items-center gap-3 border-2 transition-all duration-200 bg-white dark:bg-slate-900",i.value?"border-primary-500 ring-4 ring-primary-500/20":a.error?"border-danger-500":"border-slate-200 dark:border-slate-700"])},[e("div",{class:j(["w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",a.selected?"bg-primary-100 dark:bg-primary-900/50":"bg-slate-100 dark:bg-slate-800"])},[v(n(pe),{size:18,class:j(a.selected?"text-primary-600 dark:text-primary-400":"text-slate-400")},null,8,["class"])],2),e("div",Fs,[a.selected?(t(),l(L,{key:0},[e("p",Qs,m(a.selected.name),1),a.selected.phone?(t(),l("p",Ws,m(a.selected.phone),1)):_("",!0)],64)):(t(),l("p",Js,m(a.placeholder),1))]),v(n(Me),{size:18,class:j(["text-slate-400 transition-transform",i.value?"rotate-180":""])},null,8,["class"])],2),a.selected?(t(),T(Us,{key:0,"customer-id":a.selected.id,"customer-name":a.selected.name},null,8,["customer-id","customer-name"])):_("",!0),e("button",{type:"button",onClick:b[1]||(b[1]=C=>p.value=!0),class:"h-12 w-12 rounded-xl border-2 border-dashed border-primary-300 dark:border-primary-700 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-950/30 flex items-center justify-center transition-colors",title:"Tambah pelanggan baru"},[v(n(Ee),{size:20})])]),a.error?(t(),l("p",Xs,m(a.error),1)):_("",!0),i.value?(t(),l("div",Zs,[e("div",Ys,[e("div",ea,[v(n(lt),{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),q(e("input",{ref_key:"inputRef",ref:h,type:"text","onUpdate:modelValue":b[2]||(b[2]=C=>y.value=C),placeholder:"Cari nama/telepon...",class:"w-full h-10 pl-10 pr-4 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-sm text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[O,y.value]])])]),e("div",ta,[$.value.length>0?(t(),l("ul",sa,[(t(!0),l(L,null,E($.value,C=>{var M,z,A;return t(),l("li",{key:C.id},[e("button",{type:"button",onClick:B=>I(C),class:j(["w-full flex items-center gap-3 px-4 py-3 text-left transition-colors",((M=a.selected)==null?void 0:M.id)===C.id?"bg-primary-50 dark:bg-primary-950/30":"hover:bg-slate-50 dark:hover:bg-slate-800"])},[e("div",{class:j(["w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0",((z=a.selected)==null?void 0:z.id)===C.id?"bg-primary-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-500"])},[((A=a.selected)==null?void 0:A.id)===C.id?(t(),T(n(fe),{key:0,size:16})):(t(),l("span",la,m(C.name.charAt(0).toUpperCase()),1))],2),e("div",ra,[e("p",oa,m(C.name),1),e("p",na,m(C.phone||C.email||"-"),1)])],10,aa)])}),128))])):(t(),l("div",ia,[v(n(pe),{size:24,class:"mx-auto mb-2 opacity-50"}),b[5]||(b[5]=e("p",{class:"text-sm"},"Pelanggan tidak ditemukan",-1)),e("button",{type:"button",onClick:b[3]||(b[3]=C=>{i.value=!1,p.value=!0}),class:"mt-2 text-sm text-primary-500 hover:text-primary-600 font-medium"}," + Tambah pelanggan baru ")]))])])):_("",!0),v(ms,{"is-open":p.value,onClose:b[4]||(b[4]=C=>p.value=!1),onSuccess:c},null,8,["is-open"])],512))}},ua={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ca={class:"relative bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden animate-slide-up"},ma={class:"flex items-center justify-between px-5 py-4 border-b border-slate-100 dark:border-slate-800"},ba={class:"text-lg font-semibold text-slate-800 dark:text-white"},va={class:"px-5 py-6 bg-slate-50 dark:bg-slate-800/50"},xa={class:"text-right"},pa={class:"text-3xl font-bold text-slate-900 dark:text-white font-mono"},ga={key:0,class:"grid grid-cols-4 gap-2 px-5 py-3 border-b border-slate-100 dark:border-slate-800"},fa=["onClick"],ha={class:"p-5 grid grid-cols-3 gap-3"},ya=["onClick"],ka={class:"p-5 pt-0"},wa=["disabled"],_a={__name:"NumpadModal",props:{isOpen:Boolean,onClose:Function,onConfirm:Function,title:{type:String,default:"Masukkan Angka"},initialValue:{type:Number,default:0},minValue:{type:Number,default:0},maxValue:{type:Number,default:999999999},isCurrency:{type:Boolean,default:!1}},setup(a){const x=a,f=k(String(x.initialValue||""));J(()=>x.isOpen,c=>{c&&(f.value=String(x.initialValue||""))});const o=S(()=>parseInt(f.value,10)||0),i=S(()=>o.value>=x.minValue&&o.value<=x.maxValue),y=c=>{const r=parseInt(c,10)||0;return x.isCurrency?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r):r.toLocaleString("id-ID")},p=c=>{const r=f.value==="0"?c:f.value+c;parseInt(r,10)>x.maxValue||(f.value=r)},u=()=>{f.value=f.value.length>1?f.value.slice(0,-1):"0"},h=()=>{f.value="0"},$=c=>{const b=(parseInt(f.value,10)||0)+c;b<=x.maxValue&&(f.value=String(b))},w=()=>{i.value&&(x.onConfirm(o.value),x.onClose())},I=c=>{x.isOpen&&(c.key>="0"&&c.key<="9"?p(c.key):c.key==="Backspace"?u():c.key==="Enter"?w():c.key==="Escape"?x.onClose():(c.key==="c"||c.key==="C")&&h())};return ee(()=>{window.addEventListener("keydown",I)}),te(()=>{window.removeEventListener("keydown",I)}),(c,r)=>(t(),T(Z,{to:"body"},[a.isOpen?(t(),l("div",ua,[e("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:r[0]||(r[0]=(...b)=>a.onClose&&a.onClose(...b))}),e("div",ca,[e("div",ma,[e("h3",ba,m(a.title),1),e("button",{onClick:r[1]||(r[1]=(...b)=>a.onClose&&a.onClose(...b)),class:"p-2 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"},[v(n(se),{size:20})])]),e("div",va,[e("div",xa,[e("p",pa,m(y(f.value)),1)])]),a.isCurrency?(t(),l("div",ga,[(t(),l(L,null,E([1e4,2e4,5e4,1e5],b=>e("button",{key:b,onClick:C=>$(b),class:"py-2 px-2 text-xs font-medium rounded-xl bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 hover:bg-primary-100 dark:hover:bg-primary-900/50 transition-colors"}," +"+m(b/1e3)+"rb ",9,fa)),64))])):_("",!0),e("div",ha,[(t(),l(L,null,E([1,2,3,4,5,6,7,8,9],b=>e("button",{key:b,onClick:C=>p(String(b)),class:"h-14 text-2xl font-semibold rounded-2xl bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 active:scale-95 transition-all"},m(b),9,ya)),64)),e("button",{onClick:h,class:"h-14 text-sm font-semibold rounded-2xl bg-warning-100 dark:bg-warning-900/50 text-warning-700 dark:text-warning-400 hover:bg-warning-200 dark:hover:bg-warning-900 active:scale-95 transition-all"}," C "),e("button",{onClick:r[2]||(r[2]=b=>p("0")),class:"h-14 text-2xl font-semibold rounded-2xl bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 active:scale-95 transition-all"}," 0 "),e("button",{onClick:u,class:"h-14 flex items-center justify-center rounded-2xl bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 active:scale-95 transition-all"},[v(n(it),{size:24})])]),e("div",ka,[e("button",{onClick:w,disabled:!i.value,class:j(["w-full h-14 flex items-center justify-center gap-2 text-lg font-semibold rounded-2xl transition-all",i.value?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg shadow-primary-500/30 hover:shadow-xl active:scale-[0.98]":"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed"])},[v(n(fe),{size:22}),r[3]||(r[3]=K(" Konfirmasi ",-1))],10,wa)])])])):_("",!0)]))}},$a={key:0},Ca={class:"flex items-center gap-2"},Ia={class:"w-6 h-6 rounded-md bg-amber-500 flex items-center justify-center text-white text-xs font-bold"},ja={class:"text-xs text-amber-600 dark:text-amber-400"},Sa={key:1,class:"border-b border-amber-200 dark:border-amber-800/50 bg-amber-50 dark:bg-amber-950/30"},za={class:"flex items-center justify-between px-3 py-2 border-b border-amber-200/50 dark:border-amber-800/30"},Ta={class:"flex items-center gap-2"},Da={class:"w-6 h-6 rounded-md bg-amber-500 flex items-center justify-center text-white text-xs font-bold"},Pa={class:"max-h-[140px] overflow-y-auto"},La={class:"flex-1 min-w-0"},Ma={class:"text-xs font-medium text-amber-800 dark:text-amber-200 truncate"},Aa={class:"text-xs text-amber-600 dark:text-amber-400"},Na={class:"flex items-center gap-1"},Ea=["onClick","disabled","title"],Ba={key:0,class:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"},Va=["onClick","disabled"],Ka={__name:"HeldTransactions",props:{heldCarts:{type:Array,default:()=>[]},hasActiveCart:{type:Boolean,default:!1}},setup(a){const x=a,f=ie(),o=k(!1),i=k(null),y=k(null),p=(w=0)=>w.toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),u=S(()=>x.heldCarts.reduce((w,I)=>w+I.total,0)),h=w=>{if(x.hasActiveCart){f.error("Selesaikan atau tahan transaksi aktif terlebih dahulu");return}i.value=w,H.post(route("transactions.resume",w),{},{preserveScroll:!0,onSuccess:()=>{f.success("Transaksi dilanjutkan"),i.value=null,o.value=!1},onError:I=>{f.error(I.message||"Gagal melanjutkan transaksi"),i.value=null}})},$=w=>{confirm("Hapus transaksi yang ditahan ini?")&&(y.value=w,H.delete(route("transactions.clearHold",w),{preserveScroll:!0,onSuccess:()=>{f.success("Transaksi dihapus"),y.value=null},onError:()=>{f.error("Gagal menghapus transaksi"),y.value=null}}))};return(w,I)=>a.heldCarts&&a.heldCarts.length>0?(t(),l("div",$a,[o.value?(t(),l("div",Sa,[e("div",za,[e("div",Ta,[e("div",Da,m(a.heldCarts.length),1),I[3]||(I[3]=e("span",{class:"text-sm font-medium text-amber-700 dark:text-amber-300"}," Transaksi Ditahan ",-1))]),e("button",{onClick:I[1]||(I[1]=c=>o.value=!1),class:"w-6 h-6 rounded flex items-center justify-center hover:bg-amber-200 dark:hover:bg-amber-900/50"},[v(n(et),{size:16,class:"text-amber-600"})])]),e("div",Pa,[(t(!0),l(L,null,E(a.heldCarts,c=>(t(),l("div",{key:c.hold_id,class:"px-3 py-2 border-b border-amber-100/50 dark:border-amber-900/30 last:border-0 flex items-center justify-between gap-2"},[e("div",La,[e("p",Ma,m(c.label),1),e("p",Aa,m(c.items_count)+" item • "+m(p(c.total)),1)]),e("div",Na,[e("button",{onClick:r=>h(c.hold_id),disabled:i.value===c.hold_id||a.hasActiveCart,class:"px-2 py-1 rounded bg-amber-500 hover:bg-amber-600 text-white text-xs font-medium disabled:opacity-50 flex items-center gap-1",title:a.hasActiveCart?"Kosongkan keranjang dulu":"Lanjutkan"},[i.value===c.hold_id?(t(),l("div",Ba)):(t(),T(n(ut),{key:1,size:12}))],8,Ea),e("button",{onClick:r=>$(c.hold_id),disabled:y.value===c.hold_id,class:"p-1 rounded hover:bg-amber-200 dark:hover:bg-amber-900/50 text-amber-600 disabled:opacity-50"},[v(n(Ae),{size:12})],8,Va)])]))),128))])])):(t(),l("button",{key:0,onClick:I[0]||(I[0]=c=>o.value=!0),class:"w-full px-3 py-2 flex items-center justify-between bg-amber-50 dark:bg-amber-950/30 border-b border-amber-200 dark:border-amber-800/50 hover:bg-amber-100 dark:hover:bg-amber-900/40 transition-colors"},[e("div",Ca,[e("div",Ia,m(a.heldCarts.length),1),I[2]||(I[2]=e("span",{class:"text-sm font-medium text-amber-700 dark:text-amber-300"}," Transaksi Ditahan ",-1)),e("span",ja," • "+m(p(u.value)),1)]),v(n(Me),{size:16,class:"text-amber-600"})]))])):_("",!0)}},Ra={key:0},Ga={key:0,class:"flex gap-2"},Ha=["disabled"],Ua={__name:"HoldButton",props:{hasItems:{type:Boolean,default:!1},onHold:{type:Function,required:!0},isHolding:{type:Boolean,default:!1}},setup(a){const x=a,f=k(!1),o=k(""),i=()=>{x.onHold(o.value||null),o.value="",f.value=!1},y=p=>{p.key==="Enter"&&i(),p.key==="Escape"&&(f.value=!1)};return(p,u)=>a.hasItems?(t(),l("div",Ra,[f.value?(t(),l("div",Ga,[q(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=h=>o.value=h),onKeydown:y,placeholder:"Label (opsional)",class:"flex-1 h-8 px-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm",autofocus:""},null,544),[[O,o.value]]),e("button",{onClick:i,disabled:a.isHolding,class:"px-3 py-1.5 rounded-lg bg-amber-500 hover:bg-amber-600 text-white text-xs font-semibold disabled:opacity-50"},m(a.isHolding?"...":"OK"),9,Ha),e("button",{onClick:u[1]||(u[1]=h=>f.value=!1),class:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800"},[v(n(se),{size:14,class:"text-slate-500"})])])):(t(),l("button",{key:1,onClick:u[2]||(u[2]=h=>f.value=!0),class:"flex items-center justify-center gap-1.5 w-full py-2 px-3 rounded-lg border border-dashed border-amber-400 dark:border-amber-700 text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-950/30 text-xs font-medium transition-colors"},[v(n(nt),{size:14}),u[3]||(u[3]=K(" Tahan ",-1))]))])):_("",!0)}};function qa(a,x={}){const{minLength:f=3,maxDelay:o=50,enabled:i=!0,ignoreInputs:y=["text","number","search","password"]}=x,p=k(""),u=k(!1),h=k(""),$=k(0);let w=null;const I=()=>{h.value="",u.value=!1},c=r=>{var z;if(!i)return;const b=document.activeElement;if(b){const A=b.tagName.toLowerCase(),B=(z=b.getAttribute("type"))==null?void 0:z.toLowerCase();if(A==="textarea"||A==="input"&&y.includes(B||"text"))return}const C=Date.now();if(C-$.value>o&&h.value.length>0&&(h.value=""),$.value=C,r.key==="Enter"){if(h.value.length>=f){const A=h.value;p.value=A,u.value=!1,a==null||a(A)}h.value="";return}r.key.length===1&&/^[a-zA-Z0-9\-_.]$/.test(r.key)&&(h.value+=r.key,u.value=!0,w&&clearTimeout(w),w=setTimeout(()=>{h.value="",u.value=!1},o*3))};return ee(()=>{i&&window.addEventListener("keydown",c)}),te(()=>{window.removeEventListener("keydown",c),w&&clearTimeout(w)}),{lastBarcode:p,isScanning:u,reset:I}}const Oa={class:"h-[calc(100vh-4rem)] flex flex-col lg:flex-row"},Fa={class:"lg:hidden flex border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900"},Qa={key:0,class:"absolute top-2 right-1/4 w-5 h-5 flex items-center justify-center text-xs font-bold bg-primary-500 text-white rounded-full"},Wa={key:0,class:"hidden lg:flex absolute top-4 right-4 z-50"},Ja={class:"relative"},Xa={class:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm cursor-default"},Za={class:"text-sm font-bold text-slate-700 dark:text-slate-200"},Ya={class:"p-3 border-b border-slate-200 dark:border-slate-800 flex-shrink-0"},el={class:"flex-1 overflow-y-auto min-h-0"},tl={key:0,class:"p-3 border-b border-slate-200 dark:border-slate-800"},sl={class:"p-3 border-b border-slate-200 dark:border-slate-800"},al={class:"flex items-center justify-between mb-3"},ll={class:"text-sm font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2"},rl={key:0,class:"px-2 py-0.5 text-xs font-bold bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300 rounded-full"},ol={key:0,class:"space-y-2 max-h-[200px] overflow-y-auto pr-1"},nl={class:"w-10 h-10 rounded-lg bg-slate-200 dark:bg-slate-700 overflow-hidden flex-shrink-0"},il=["src","alt"],dl={key:1,class:"w-full h-full flex items-center justify-center"},ul={class:"flex-1 min-w-0"},cl={class:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate"},ml={class:"text-xs text-slate-500"},bl={class:"flex items-center gap-1"},vl=["onClick","disabled"],xl={class:"w-6 text-center text-xs font-medium"},pl=["onClick"],gl=["onClick"],fl={class:"text-xs font-semibold text-primary-600 dark:text-primary-400 w-16 text-right"},hl={key:1,class:"py-6 text-center"},yl={class:"p-3 space-y-4"},kl={class:"grid grid-cols-2 gap-2"},wl=["onClick"],_l={class:"text-left"},$l={key:0},Cl={class:"grid grid-cols-4 gap-2"},Il=["onClick"],jl={class:"flex gap-2 mb-2"},Sl={class:"relative"},zl={key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},Tl={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},Dl=["placeholder"],Pl={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Ll={class:"flex gap-2 mb-2"},Ml={class:"relative"},Al={key:0,class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},Nl={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"},El=["placeholder"],Bl={key:0,class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},Vl={key:1},Kl={class:"relative"},Rl={class:"flex-shrink-0 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/80 p-3"},Gl={class:"flex justify-between items-center mb-2 text-sm"},Hl={class:"font-medium"},Ul={key:0,class:"flex justify-between items-center mb-2 text-sm"},ql={class:"text-danger-500"},Ol={key:1,class:"flex justify-between items-center mb-2 text-sm"},Fl={class:"text-purple-500"},Ql={class:"flex justify-between items-center mb-3"},Wl={class:"text-xl font-bold text-primary-600 dark:text-primary-400"},Jl={key:2,class:"flex justify-between items-center mb-3 p-2 rounded-lg bg-success-50 dark:bg-success-950/30"},Xl={class:"font-bold text-success-600"},Zl=["disabled"],Yl={key:0,class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"},er={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},tr={class:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-xl p-6 max-w-sm w-full"},sr={class:"text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2"},ar={class:"space-y-3"},lr={class:"text-slate-600 dark:text-slate-400"},rr={class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-sm font-mono font-bold text-slate-700 dark:text-slate-300"},or={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm"},nr={class:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl w-full max-w-md overflow-hidden"},ir={class:"p-6 border-b border-slate-200 dark:border-slate-800 text-center"},dr={class:"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mx-auto mb-4"},ur={class:"p-6 space-y-3"},cr=["onClick"],mr={class:"font-semibold text-slate-700 dark:text-slate-200 group-hover:text-primary-700 dark:group-hover:text-primary-300"},Mr={__name:"Index",props:{carts:{type:Array,default:()=>[]},carts_total:{type:Number,default:0},heldCarts:{type:Array,default:()=>[]},customers:{type:Array,default:()=>[]},products:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},paymentGateways:{type:Array,default:()=>[]},defaultPaymentGateway:{type:String,default:"cash"},warehouses:{type:Array,default:()=>[]},selected_warehouse_id:{type:Number,default:null}},setup(a){const x=a,{errors:f}=Pe().props,o=ie(),i=k(""),y=k(null),p=k(!1),u=k(null),h=k(null),$=k(null),w=k(""),I=k(x.selected_warehouse_id),c=k(!x.selected_warehouse_id);k(!1);const r=k("amount"),b=k(""),C=k("amount"),M=k(""),z=k(x.defaultPaymentGateway??"cash"),A=k(!1),B=k("products"),ae=k(!1),W=k(!1),ue=k(null),X=k("all");J(()=>x.defaultPaymentGateway,g=>{z.value=g??"cash"}),qa(g=>{const s=x.products.find(D=>{var N;return((N=D.barcode)==null?void 0:N.toLowerCase())===g.toLowerCase()});s?s.stock>0?(we(s),o.success(`${s.title} ditambahkan (barcode)`)):o.error(`${s.title} stok habis`):o.error(`Barcode / Kode Bundle tidak ditemukan: ${g}`)},{enabled:!0,minLength:3});const Ve=g=>{const s=g.target.value;if(r.value==="amount")w.value=s.replace(/[^\d]/g,"");else{const D=s.replace(/[^\d.]/g,""),N=D.split(".");N.length>2?w.value=N[0]+"."+N.slice(1).join(""):w.value=D,Number(w.value)>100&&(w.value="100")}},he=S(()=>r.value==="percent"?Math.max(0,Math.min(100,Number(w.value)||0)):null),ce=S(()=>{if(r.value==="amount")return Math.max(0,Number(w.value)||0);{const g=he.value,s=x.carts_total??0;return Math.round(s*g/100)}}),ye=S(()=>C.value==="percent"?Math.max(0,Math.min(100,Number(b.value)||0)):null),me=S(()=>{if(C.value==="amount")return Math.max(0,Number(b.value)||0);{const g=ye.value,s=x.carts_total??0;return Math.round(s*g/100)}}),le=S(()=>ce.value),re=S(()=>me.value),ke=S(()=>x.carts_total??0),P=S(()=>Math.max(ke.value-le.value-re.value,0)),F=S(()=>z.value==="cash"),R=S(()=>F.value?Math.max(0,Number(M.value)||0):P.value),be=S(()=>x.carts.reduce((g,s)=>g+Number(s.qty),0)),Ke=S(()=>{const g=Array.isArray(x.paymentGateways)?x.paymentGateways.filter(s=>(s==null?void 0:s.value)&&s.value.toLowerCase()!=="cash"):[];return[{value:"cash",label:"Tunai",description:"Pembayaran tunai langsung di kasir."},...g]});J([F,P],()=>{!F.value&&P.value>=0&&(M.value=String(P.value))});const Re=S(()=>x.products.filter(g=>{var d;const s=X.value==="all"||g.type===X.value,D=X.value==="bundle"||!y.value||g.category_id===y.value,N=!i.value||g.title.toLowerCase().includes(i.value.toLowerCase())||((d=g.barcode)==null?void 0:d.toLowerCase().includes(i.value.toLowerCase()));return s&&D&&N})),we=async g=>{g!=null&&g.id&&(u.value=g.id,H.post(route("transactions.addToCart"),{product_id:g.id,sell_price:g.sell_price,qty:1,warehouse_id:I.value,type:g.type||"product"},{preserveScroll:!0,onSuccess:s=>{var D;(D=s.props.flash)!=null&&D.error?o.error(s.props.flash.error):o.success(`${g.title} ditambahkan`),u.value=null},onError:()=>{o.error("Gagal menambahkan produk"),u.value=null}}))},ve=k(null),_e=(g,s)=>{s<1||(ve.value=g,H.patch(route("transactions.updateCart",g),{qty:s,warehouse_id:I.value},{preserveScroll:!0,onSuccess:D=>{var N;(N=D.props.flash)!=null&&N.error&&o.error(D.props.flash.error),ve.value=null},onError:D=>{o.error((D==null?void 0:D.message)||"Gagal update quantity"),ve.value=null}}))},Ge=g=>{M.value=String(g)},oe=k(!1),He=async(g=null)=>{if(x.carts.length===0){o.error("Keranjang kosong");return}oe.value=!0,H.post(route("transactions.hold"),{label:g},{preserveScroll:!0,onSuccess:()=>{o.success("Transaksi ditahan"),oe.value=!1},onError:s=>{o.error((s==null?void 0:s.message)||"Gagal menahan transaksi"),oe.value=!1}})},Ue=g=>{h.value=g,H.delete(route("transactions.destroyCart",g),{preserveScroll:!0,onSuccess:()=>{o.success("Item dihapus dari keranjang"),h.value=null},onError:()=>{o.error("Gagal menghapus item"),h.value=null}})},$e=()=>{var g;if(x.carts.length===0){o.error("Keranjang masih kosong");return}if(!((g=$.value)!=null&&g.id)){o.error("Pilih pelanggan terlebih dahulu");return}if(F.value&&R.value<P.value){o.error("Jumlah pembayaran kurang dari total");return}A.value=!0,H.post(route("transactions.store"),{customer_id:$.value.id,discount:le.value,discount_type:r.value,discount_percent:r.value==="percent"?he.value:null,event_discount:re.value,event_discount_type:C.value,event_discount_percent:C.value==="percent"?ye.value:null,grand_total:P.value,cash:F.value?R.value:P.value,change:F.value?Math.max(R.value-P.value,0):0,payment_gateway:F.value?null:z.value,warehouse_id:I.value},{onSuccess:()=>{w.value="",r.value="amount",b.value="",C.value="amount",M.value="",$.value=null,z.value=x.defaultPaymentGateway??"cash",A.value=!1,o.success("Transaksi berhasil!")},onError:()=>{A.value=!1,o.error("Gagal menyimpan transaksi")}})},Ce=g=>{if(!(g.target.tagName==="INPUT"||g.target.tagName==="TEXTAREA"))switch(g.key){case"/":case"F5":g.preventDefault(),ue.value&&ue.value.focus();break;case"F1":g.preventDefault(),ae.value=!0;break;case"F2":g.preventDefault(),x.carts.length>0&&$.value&&$e();break;case"F3":g.preventDefault(),B.value=B.value==="products"?"cart":"products";break;case"F4":g.preventDefault(),W.value=!W.value;break;case"Escape":ae.value=!1,W.value=!1,i.value="";break}};ee(()=>{window.addEventListener("keydown",Ce)}),te(()=>{window.removeEventListener("keydown",Ce)});const V=(g=0)=>g.toLocaleString("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}),qe=g=>{H.visit(route("transactions.index",{warehouse_id:g}))};return(g,s)=>(t(),T(It,null,{default:G(()=>{var D,N;return[v(n(We),{title:"Transaksi"}),e("div",Oa,[e("div",Fa,[e("button",{onClick:s[0]||(s[0]=d=>B.value="products"),class:j(["flex-1 flex items-center justify-center gap-2 py-3 text-sm font-medium transition-colors",B.value==="products"?"text-primary-600 border-b-2 border-primary-500":"text-slate-500"])},[v(n(ne),{size:18}),s[18]||(s[18]=e("span",null,"Produk",-1))],2),e("button",{onClick:s[1]||(s[1]=d=>B.value="cart"),class:j(["flex-1 flex items-center justify-center gap-2 py-3 text-sm font-medium transition-colors relative",B.value==="cart"?"text-primary-600 border-b-2 border-primary-500":"text-slate-500"])},[v(n(xe),{size:18}),s[19]||(s[19]=e("span",null,"Keranjang",-1)),be.value>0?(t(),l("span",Qa,m(be.value),1)):_("",!0)],2)]),I.value?(t(),l("div",Wa,[e("div",Ja,[e("button",Xa,[v(n(Te),{size:18,class:"text-primary-500"}),e("span",Za,m(((D=a.warehouses.find(d=>d.id===I.value))==null?void 0:D.name)||"Gudang"),1)])])])):_("",!0),e("div",{class:j(["flex-1 bg-slate-100 dark:bg-slate-950 overflow-hidden",B.value!=="products"?"hidden lg:flex lg:flex-col":"flex flex-col"])},[v(ts,{products:Re.value,categories:a.categories,"selected-category":y.value,"onUpdate:selectedCategory":s[2]||(s[2]=d=>y.value=d),"sale-type":X.value,"onUpdate:saleType":s[3]||(s[3]=d=>X.value=d),"search-query":i.value,"onUpdate:searchQuery":s[4]||(s[4]=d=>i.value=d),"is-searching":p.value,onAddToCart:we,"adding-product-id":u.value,"search-input-ref":ue.value},null,8,["products","categories","selected-category","sale-type","search-query","is-searching","adding-product-id","search-input-ref"])],2),e("div",{class:j(["w-full lg:w-[420px] xl:w-[480px] flex flex-col bg-white dark:bg-slate-900 border-l border-slate-200 dark:border-slate-800",B.value!=="cart"?"hidden lg:flex":"flex"]),style:{height:"calc(100vh - 4rem)"}},[e("div",Ya,[v(da,{customers:a.customers,selected:$.value,"onUpdate:selected":s[5]||(s[5]=d=>$.value=d),placeholder:"Pilih pelanggan...",error:(N=n(f))==null?void 0:N.customer_id,label:"Pelanggan"},null,8,["customers","selected","error"])]),a.heldCarts.length>0?(t(),T(Ka,{key:0,"held-carts":a.heldCarts,"has-active-cart":a.carts.length>0},null,8,["held-carts","has-active-cart"])):_("",!0),e("div",el,[a.carts.length>0?(t(),l("div",tl,[v(Ua,{"has-items":a.carts.length>0,"on-hold":He,"is-holding":oe.value},null,8,["has-items","is-holding"])])):_("",!0),e("div",sl,[e("div",al,[e("h3",ll,[v(n(ne),{size:16}),s[20]||(s[20]=K(" Keranjang ",-1))]),a.carts.length>0?(t(),l("span",rl,m(be.value)+" item ",1)):_("",!0)]),a.carts.length>0?(t(),l("div",ol,[(t(!0),l(L,null,E(a.carts,d=>{var Q,Ie,je;return t(),l("div",{key:d.id,class:"flex items-center gap-2 p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50 group"},[e("div",nl,[(Q=d.product)!=null&&Q.image?(t(),l("img",{key:0,src:n(Ne)(d.product.image),alt:d.product.title,class:"w-full h-full object-cover"},null,8,il)):(t(),l("div",dl,[v(n(ne),{size:14,class:"text-slate-400"})]))]),e("div",ul,[e("p",cl,m(d.bundle?"[BUNDLE] "+d.bundle.name:((Ie=d.product)==null?void 0:Ie.title)||"Produk"),1),e("p",ml,m(V(d.bundle?d.bundle.sell_price:((je=d.product)==null?void 0:je.sell_price)||0))+" × "+m(d.qty),1)]),e("div",bl,[e("button",{onClick:Se=>_e(d.id,Math.max(1,d.qty-1)),disabled:d.qty<=1,class:"w-6 h-6 rounded flex items-center justify-center bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 disabled:opacity-50 text-xs"}," - ",8,vl),e("span",xl,m(d.qty),1),e("button",{onClick:Se=>_e(d.id,d.qty+1),class:"w-6 h-6 rounded flex items-center justify-center bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-300 text-xs"}," + ",8,pl),e("button",{onClick:Se=>Ue(d.id),class:"w-6 h-6 rounded flex items-center justify-center text-slate-400 hover:text-danger-500 hover:bg-danger-50 dark:hover:bg-danger-950/50 ml-1"},[v(n(Ae),{size:12})],8,gl)]),e("p",fl,m(V(d.price)),1)])}),128))])):(t(),l("div",hl,[v(n(ne),{size:32,class:"mx-auto text-slate-300 dark:text-slate-600 mb-2"}),s[21]||(s[21]=e("p",{class:"text-sm text-slate-400"},"Keranjang kosong",-1))]))]),e("div",yl,[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2"}," Metode Pembayaran ",-1)),e("div",kl,[(t(!0),l(L,null,E(Ke.value,d=>(t(),l("button",{key:d.value,onClick:Q=>z.value=d.value,class:j(["p-3 rounded-xl border-2 transition-all flex items-center gap-2",z.value===d.value?"border-primary-500 bg-primary-50 dark:bg-primary-950/30":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"])},[e("div",{class:j(["w-8 h-8 rounded-lg flex items-center justify-center",z.value===d.value?"bg-primary-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-500"])},[d.value==="cash"?(t(),T(n(tt),{key:0,size:16})):(t(),T(n(st),{key:1,size:16}))],2),e("div",_l,[e("p",{class:j(["text-sm font-semibold",z.value===d.value?"text-primary-700 dark:text-primary-300":"text-slate-700 dark:text-slate-300"])},m(d.label),3)])],10,wl))),128))])]),z.value==="cash"?(t(),l("div",$l,[s[23]||(s[23]=e("label",{class:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2"}," Nominal Cepat ",-1)),e("div",Cl,[(t(),l(L,null,E([1e4,2e4,5e4,1e5],d=>e("button",{key:d,onClick:Q=>M.value=String(d),class:j(["py-2 px-1 rounded-lg text-xs font-semibold transition-all",Number(M.value)===d?"bg-primary-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200"])},m(V(d)),11,Il)),64))])])):_("",!0),e("div",null,[s[24]||(s[24]=e("label",{class:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2"}," Diskon ",-1)),e("div",jl,[e("button",{onClick:s[6]||(s[6]=d=>r.value="amount"),class:j(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors",r.value==="amount"?"bg-primary-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Nominal ",2),e("button",{onClick:s[7]||(s[7]=d=>r.value="percent"),class:j(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors",r.value==="percent"?"bg-primary-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Persentase ",2)]),e("div",Sl,[r.value==="amount"?(t(),l("span",zl," Rp ")):(t(),l("span",Tl," % ")),q(e("input",{type:"text",inputmode:"numeric","onUpdate:modelValue":s[8]||(s[8]=d=>w.value=d),onInput:Ve,placeholder:(r.value==="amount","0"),class:j(["w-full h-10 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500",r.value==="amount"?"pl-10 pr-4":"pl-4 pr-10"])},null,42,Dl),[[O,w.value]])]),r.value==="percent"&&ce.value>0?(t(),l("p",Pl," = "+m(V(ce.value)),1)):_("",!0)]),e("div",null,[s[25]||(s[25]=e("label",{class:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2"}," Diskon Event ",-1)),e("div",Ll,[e("button",{onClick:s[9]||(s[9]=d=>C.value="amount"),class:j(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors",C.value==="amount"?"bg-purple-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Nominal ",2),e("button",{onClick:s[10]||(s[10]=d=>C.value="percent"),class:j(["flex-1 py-2 px-3 rounded-lg text-xs font-medium transition-colors",C.value==="percent"?"bg-purple-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Persentase ",2)]),e("div",Ml,[C.value==="amount"?(t(),l("span",Al," Rp ")):(t(),l("span",Nl," % ")),q(e("input",{type:"text",inputmode:"numeric","onUpdate:modelValue":s[11]||(s[11]=d=>b.value=d),onInput:s[12]||(s[12]=(...d)=>g.handleEventDiscountInput&&g.handleEventDiscountInput(...d)),placeholder:(C.value==="amount","0"),class:j(["w-full h-10 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-sm focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",C.value==="amount"?"pl-10 pr-4":"pl-4 pr-10"])},null,42,El),[[O,b.value]])]),C.value==="percent"&&me.value>0?(t(),l("p",Bl," = "+m(V(me.value)),1)):_("",!0)]),z.value==="cash"?(t(),l("div",Vl,[s[27]||(s[27]=e("label",{class:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2"}," Jumlah Bayar (Rp) ",-1)),e("div",Kl,[s[26]||(s[26]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"}," Rp ",-1)),q(e("input",{type:"text",inputmode:"numeric","onUpdate:modelValue":s[13]||(s[13]=d=>M.value=d),onInput:s[14]||(s[14]=d=>M.value=M.value.replace(/[^\d]/g,"")),placeholder:"0",class:"w-full h-10 pl-10 pr-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-base font-semibold focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"},null,544),[[O,M.value]])])])):_("",!0)])]),e("div",Rl,[e("div",Gl,[s[28]||(s[28]=e("span",{class:"text-slate-500"},"Subtotal",-1)),e("span",Hl,m(V(ke.value)),1)]),le.value>0?(t(),l("div",Ul,[s[29]||(s[29]=e("span",{class:"text-slate-500"},"Diskon",-1)),e("span",ql,"-"+m(V(le.value)),1)])):_("",!0),re.value>0?(t(),l("div",Ol,[s[30]||(s[30]=e("span",{class:"text-slate-500"},"Diskon Event",-1)),e("span",Fl,"-"+m(V(re.value)),1)])):_("",!0),e("div",Ql,[s[31]||(s[31]=e("span",{class:"font-semibold text-slate-800 dark:text-white"},"Total",-1)),e("span",Wl,m(V(P.value)),1)]),z.value==="cash"&&R.value>=P.value&&P.value>0?(t(),l("div",Jl,[s[32]||(s[32]=e("span",{class:"text-sm text-success-700 dark:text-success-400"},"Kembalian",-1)),e("span",Xl,m(V(R.value-P.value)),1)])):_("",!0),e("button",{onClick:$e,disabled:!a.carts.length||!$.value||z.value==="cash"&&R.value<P.value||A.value,class:j(["w-full h-12 rounded-xl text-sm font-semibold flex items-center justify-center gap-2 transition-all",a.carts.length&&$.value&&(z.value!=="cash"||R.value>=P.value)?"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white shadow-lg shadow-primary-500/30":"bg-slate-200 dark:bg-slate-800 text-slate-400 cursor-not-allowed"])},[A.value?(t(),l("div",Yl)):(t(),l(L,{key:1},[v(n(xe),{size:18}),e("span",null,m(a.carts.length?$.value?z.value==="cash"&&R.value<P.value?`Kurang ${V(P.value-R.value)}`:"Selesaikan Transaksi":"Pilih Pelanggan":"Keranjang Kosong"),1)],64))],10,Zl)])],2)]),v(_a,{"is-open":ae.value,onClose:s[15]||(s[15]=d=>ae.value=!1),onConfirm:Ge,title:"Jumlah Bayar","initial-value":Number(M.value)||0,"is-currency":!0},null,8,["is-open","initial-value"]),(t(),T(Z,{to:"body"},[W.value?(t(),l("div",er,[e("div",{class:"absolute inset-0 bg-slate-900/60",onClick:s[16]||(s[16]=d=>W.value=!1)}),e("div",tr,[e("h3",sr,[v(n(dt),{size:24}),s[33]||(s[33]=K(" Keyboard Shortcuts ",-1))]),e("div",ar,[(t(),l(L,null,E([["F1","Buka Numpad"],["F2","Selesaikan Transaksi"],["F3","Toggle Produk/Keranjang"],["F4","Tampilkan Bantuan"],["Esc","Tutup Modal"]],([d,Q])=>e("div",{key:d,class:"flex items-center justify-between"},[e("span",lr,m(Q),1),e("kbd",rr,m(d),1)])),64))]),e("button",{onClick:s[17]||(s[17]=d=>W.value=!1),class:"mt-6 w-full py-2.5 bg-primary-500 hover:bg-primary-600 text-white rounded-xl font-medium"}," Tutup ")])])):_("",!0)])),(t(),T(Z,{to:"body"},[c.value?(t(),l("div",or,[e("div",nr,[e("div",ir,[e("div",dr,[v(n(Te),{size:32,class:"text-primary-600 dark:text-primary-400"})]),s[34]||(s[34]=e("h2",{class:"text-xl font-bold text-slate-900 dark:text-white"},"Pilih Gudang",-1)),s[35]||(s[35]=e("p",{class:"text-sm text-slate-500 dark:text-slate-400 mt-1"}," Pilih gudang aktif untuk memulai transaksi. ",-1))]),e("div",ur,[(t(!0),l(L,null,E(a.warehouses,d=>(t(),l("button",{key:d.id,onClick:Q=>qe(d.id),class:"w-full flex items-center justify-between p-4 rounded-xl border-2 border-slate-100 dark:border-slate-800 hover:border-primary-500 hover:bg-primary-50 dark:hover:bg-primary-950/30 transition-all group"},[e("span",mr,m(d.name),1),v(n(Je),{size:20,class:"text-slate-400 group-hover:text-primary-500"})],8,cr))),128))])])])):_("",!0)]))]}),_:1}))}};export{Mr as default};
