import{r as x,K as R,A as D,a as l,c as V,w as O,b as p,u as m,Z as J,d as t,f as L,k as f,x as j,g as o,p as k,t as a,L as z,F as h,h as F,D as Q,J as U,O as Y}from"./app-DA0EYa_6.js";import{I as E}from"./IconDatabaseOff-DfZH0otJ.js";import{I as H}from"./IconFilter-f3eGT3XC.js";import{I as K}from"./IconX-JXYWA-GE.js";import{_ as $}from"./DashboardLayout-DqHF1oae.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";const P={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 mb-6"},X=["value"],Z=["value"],q={class:"flex items-end"},G=["disabled"],W={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},tt={class:"overflow-x-auto"},et={class:"w-full text-sm"},st={class:"py-4 px-5 text-slate-500"},at={class:"py-4 px-5 font-semibold text-slate-900 dark:text-white"},rt=["onClick"],lt={class:"py-4 px-5 text-center"},ot={class:"inline-flex items-center justify-center min-w-[32px] px-2 py-1 rounded-lg bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-bold"},nt={class:"py-4 px-5 text-right font-bold text-slate-900 dark:text-white text-lg"},it={key:0},dt={colspan:"4",class:"py-12 text-center text-slate-400"},ut={class:"flex flex-col items-center gap-2"},ct={key:0},xt={class:"bg-slate-50 dark:bg-slate-800/50 font-bold border-t-2 border-slate-200 dark:border-slate-700"},pt={class:"py-4 px-5 text-center text-primary-600 dark:text-primary-400"},bt={class:"py-4 px-5 text-right text-emerald-600 dark:text-emerald-400 text-xl"},mt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6"},ft={class:"relative w-full max-w-4xl bg-white dark:bg-slate-900 rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]"},kt={class:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50"},ht={class:"text-sm text-primary-500 font-medium mt-1"},gt={class:"p-6 overflow-y-auto flex-1 custom-scrollbar"},yt={key:0,class:"flex flex-col items-center justify-center py-12"},vt={key:1},_t={class:"overflow-x-auto"},wt={class:"w-full text-sm"},Dt={class:"divide-y divide-slate-100 dark:divide-slate-800"},jt={class:"py-4 px-2 font-bold text-slate-900 dark:text-white"},Ft={class:"py-4 px-2 text-slate-600 dark:text-slate-400 whitespace-nowrap"},It={class:"py-4 px-2 text-slate-700 dark:text-slate-300"},Nt={class:"py-4 px-2 text-center"},Ot={class:"font-bold text-slate-900 dark:text-white"},St={class:"py-4 px-2 text-right text-slate-600 dark:text-slate-400"},Bt={class:"py-4 px-2 text-right font-bold text-primary-600 dark:text-primary-400"},Tt={class:"p-6 border-t border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex justify-between items-center"},Ct={class:"flex gap-6"},Mt={class:"text-lg font-bold text-slate-900 dark:text-white"},At={class:"text-lg font-bold text-emerald-600 dark:text-emerald-400"},Pt={__name:"ResumeReport",props:{items:Array,filters:Object},setup(b){const d=b,g=x(!1),n=R({month:d.filters.month||new Date().getMonth()+1,year:d.filters.year||new Date().getFullYear(),resume_status:d.filters.resume_status!==void 0?d.filters.resume_status:!0}),y=x(!1),v=x(!1),I=x(""),u=x([]),S=async r=>{I.value=r,y.value=!0,v.value=!0,u.value=[];try{const e=await U.get(N("old-orders.resume-report-detail"),{params:{nama_buku:r,month:n.month,year:n.year,resume_status:n.resume_status}});u.value=e.data}catch(e){console.error("Error fetching book details:",e)}finally{v.value=!1}},_=()=>{y.value=!1},B=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],T=D(()=>{const r=new Date().getFullYear(),e=[];for(let s=r;s>=r-5;s--)e.push(s);return e}),C=D(()=>d.items.reduce((r,e)=>r+parseInt(e.jumlah_buku||0),0)),M=D(()=>d.items.reduce((r,e)=>r+parseFloat(e.total_harga_buku||0),0)),A=()=>{g.value=!0,Y.get(N("old-orders.resume-report"),n,{preserveState:!0,onFinish:()=>g.value=!1})},c=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r||0),w=r=>new Intl.NumberFormat("id-ID").format(r||0),N=(r,e)=>typeof window<"u"&&window.route?window.route(r,e):"#";return(r,e)=>(l(),V($,null,{default:O(()=>[p(m(J),{title:"Laporan Resume Old Order"}),e[16]||(e[16]=t("div",{class:"mb-6"},[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Laporan Resume Old Order"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Rekapitulasi penjualan buku berdasarkan resume status. ")])])],-1)),t("div",P,[t("form",{onSubmit:L(A,["prevent"]),class:"grid grid-cols-1 md:grid-cols-4 gap-4"},[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-xs font-semibold text-slate-500 uppercase mb-2"},"Bulan",-1)),f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.month=s),class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all cursor-pointer"},[(l(),o(h,null,k(B,(s,i)=>f(t("option",{key:i,value:i+1},a(s),9,X),[[z,s]])),64))],512),[[j,n.month]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-xs font-semibold text-slate-500 uppercase mb-2"},"Tahun",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.year=s),class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all cursor-pointer"},[(l(!0),o(h,null,k(T.value,s=>(l(),o("option",{key:s,value:s},a(s),9,Z))),128))],512),[[j,n.year]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-xs font-semibold text-slate-500 uppercase mb-2"},"Resume Status",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.resume_status=s),class:"w-full h-10 px-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all cursor-pointer"},[...e[5]||(e[5]=[t("option",{value:!0},"Aktif (Status âœ“)",-1),t("option",{value:!1},"Tidak Aktif",-1)])],512),[[j,n.resume_status]])]),t("div",q,[t("button",{type:"submit",class:"w-full h-10 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-semibold transition-all flex items-center justify-center gap-2",disabled:g.value},[p(m(H),{size:18}),e[7]||(e[7]=t("span",null,"Filter",-1))],8,G)])],32)]),t("div",W,[t("div",tt,[t("table",et,[e[10]||(e[10]=t("thead",null,[t("tr",{class:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700"},[t("th",{class:"text-left py-4 px-5 text-xs font-bold text-slate-500 uppercase tracking-wider"},"No"),t("th",{class:"text-left py-4 px-5 text-xs font-bold text-slate-500 uppercase tracking-wider"},"Nama Buku"),t("th",{class:"text-center py-4 px-5 text-xs font-bold text-slate-500 uppercase tracking-wider"},"Jumlah Buku"),t("th",{class:"text-right py-4 px-5 text-xs font-bold text-slate-500 uppercase tracking-wider"},"Total Harga Buku")])],-1)),t("tbody",null,[(l(!0),o(h,null,k(b.items,(s,i)=>(l(),o("tr",{key:i,class:"border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[t("td",st,a(i+1),1),t("td",at,[t("button",{onClick:Rt=>S(s.nama_buku),class:"hover:text-primary-500 transition-colors text-left"},a(s.nama_buku),9,rt)]),t("td",lt,[t("span",ot,a(w(s.jumlah_buku)),1)]),t("td",nt,a(c(s.total_harga_buku)),1)]))),128)),b.items.length===0?(l(),o("tr",it,[t("td",dt,[t("div",ut,[p(m(E),{size:48,class:"opacity-20"}),e[8]||(e[8]=t("span",null,"Tidak ada data untuk periode ini.",-1))])])])):F("",!0)]),b.items.length>0?(l(),o("tfoot",ct,[t("tr",xt,[e[9]||(e[9]=t("td",{colspan:"2",class:"py-4 px-5 text-right uppercase text-slate-500"},"Total Keseluruhan",-1)),t("td",pt,a(w(C.value)),1),t("td",bt,a(c(M.value)),1)])])):F("",!0)])])]),p(Q,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:O(()=>[y.value?(l(),o("div",mt,[t("div",{class:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:_}),t("div",ft,[t("div",kt,[t("div",null,[e[11]||(e[11]=t("h3",{class:"text-xl font-bold text-slate-900 dark:text-white leading-tight"},"Detail Penjualan Buku",-1)),t("p",ht,a(I.value),1)]),t("button",{onClick:_,class:"p-2 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-500 transition-colors"},[p(m(K),{size:20})])]),t("div",gt,[v.value?(l(),o("div",yt,[...e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-10 w-10 border-4 border-primary-500 border-t-transparent shadow-sm"},null,-1),t("span",{class:"mt-4 text-sm font-medium text-slate-500"},"Memuat data transaksi...",-1)])])):(l(),o("div",vt,[t("div",_t,[t("table",wt,[e[13]||(e[13]=t("thead",null,[t("tr",{class:"text-slate-500 border-b border-slate-200 dark:border-slate-800"},[t("th",{class:"text-left pb-4 px-2 font-bold uppercase tracking-wider text-xs"},"No Order"),t("th",{class:"text-left pb-4 px-2 font-bold uppercase tracking-wider text-xs"},"Tanggal"),t("th",{class:"text-left pb-4 px-2 font-bold uppercase tracking-wider text-xs"},"Customer"),t("th",{class:"text-center pb-4 px-2 font-bold uppercase tracking-wider text-xs"},"Qty"),t("th",{class:"text-right pb-4 px-2 font-bold uppercase tracking-wider text-xs"},"Harga Satuan"),t("th",{class:"text-right pb-4 px-2 font-bold uppercase tracking-wider text-xs"},"Subtotal")])],-1)),t("tbody",Dt,[(l(!0),o(h,null,k(u.value,s=>(l(),o("tr",{key:s.order_id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors"},[t("td",jt,a(s.order_id),1),t("td",Ft,a(new Date(s.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})),1),t("td",It,a(s.nama_customer||"-"),1),t("td",Nt,[t("span",Ot,a(s.jumlah),1)]),t("td",St,a(c(s.harga_satuan)),1),t("td",Bt,a(c(s.subtotal)),1)]))),128))])])])]))]),t("div",Tt,[t("div",Ct,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Total Qty",-1)),t("p",Mt,a(w(u.value.reduce((s,i)=>s+parseInt(i.jumlah),0))),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},"Total Nominal",-1)),t("p",At,a(c(u.value.reduce((s,i)=>s+parseFloat(i.subtotal),0))),1)])]),t("button",{onClick:_,class:"px-6 h-11 rounded-xl bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold transition-all"}," Tutup ")])])])):F("",!0)]),_:1})]),_:1}))}};export{Pt as default};
