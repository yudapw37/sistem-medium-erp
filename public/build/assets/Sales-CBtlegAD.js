import{r as T,A as v,E as $,a as u,c as A,w as l,b as r,u as k,Z as st,d as a,e as o,n as rt,g as m,h as y,p as q,F as G,f as lt,k as D,v as B,x as ot,t as c,O as H}from"./app-DA0EYa_6.js";import{I as it}from"./IconCoin-qlLQaaAp.js";import{I as dt}from"./IconDatabaseOff-DfZH0otJ.js";import{I as nt}from"./IconFilter-f3eGT3XC.js";import{_ as ut,m as mt}from"./DashboardLayout-DqHF1oae.js";import{c as ct}from"./createVueComponent-CUBUAVU4.js";import{I as pt}from"./IconSearch-hVNvfgeb.js";import{I as ft}from"./IconShoppingBag-lYyQ_J6S.js";import{I as vt}from"./IconTrendingUp-D79oSU31.js";import{I as gt}from"./IconX-JXYWA-GE.js";import{_ as J}from"./InputSelect-BqzyB0VS.js";import{_ as p,a as f}from"./TableTh-CVR3I-fd.js";import{_ as bt}from"./Pagination-B8BHcZ6z.js";import{_ as xt}from"./SummaryCard-BPONpo-Z.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";import"./IconCircleFilled-C8aRf-1y.js";import"./IconChevronRight-QKrPJlsB.js";/**
 * @license @tabler/icons-vue v3.36.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kt=ct("outline","rosette-discount","RosetteDiscount",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["circle",{cx:"9.5",cy:"9.5",r:".5",fill:"currentColor",key:"svg-1"}],["circle",{cx:"14.5",cy:"14.5",r:".5",fill:"currentColor",key:"svg-2"}],["path",{d:"M5 7.2a2.2 2.2 0 0 1 2.2 -2.2h1a2.2 2.2 0 0 0 1.55 -.64l.7 -.7a2.2 2.2 0 0 1 3.12 0l.7 .7a2.2 2.2 0 0 0 1.55 .64h1a2.2 2.2 0 0 1 2.2 2.2v1a2.2 2.2 0 0 0 .64 1.55l.7 .7a2.2 2.2 0 0 1 0 3.12l-.7 .7a2.2 2.2 0 0 0 -.64 1.55v1a2.2 2.2 0 0 1 -2.2 2.2h-1a2.2 2.2 0 0 0 -1.55 .64l-.7 .7a2.2 2.2 0 0 1 -3.12 0l-.7 -.7a2.2 2.2 0 0 0 -1.55 -.64h-1a2.2 2.2 0 0 1 -2.2 -2.2v-1a2.2 2.2 0 0 0 -.64 -1.55l-.7 -.7a2.2 2.2 0 0 1 0 -3.12l.7 -.7a2.2 2.2 0 0 0 .64 -1.55v-1",key:"svg-3"}]]);const _t={class:"space-y-6"},yt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ht={class:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2"},It={key:0,class:"w-2 h-2 rounded-full bg-primary-500"},St={class:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4"},Ct={key:0,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-5 animate-slide-up"},Tt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},Dt={class:"flex justify-end gap-2 mt-4"},Nt={type:"submit",class:"inline-flex items-center gap-2 px-6 py-2.5 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-medium transition-colors"},jt={key:1,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},Pt={class:"overflow-x-auto"},Vt={class:"w-full"},$t={class:"border-b border-slate-100 dark:border-slate-800"},At={class:"divide-y divide-slate-100 dark:divide-slate-800"},Bt={class:"px-2 py-0.5 text-xs font-medium bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-400 rounded-full"},wt={key:0},zt={key:0,class:"text-xs ml-1"},Mt={key:1,class:"text-slate-400"},Ot={key:2,class:"flex flex-col items-center justify-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800"},Rt={class:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-4"},ie={__name:"Sales",props:{transactions:Object,summary:Object,filters:Object,cashiers:Array,customers:Array},setup(N){var R,L,U,E,K,X;const i=N,h={start_date:"",end_date:"",invoice:"",cashier_id:"",customer_id:"",type:""},n=e=>typeof e=="number"?String(e):e??"",_=T(!1),d=T({...h,start_date:n((R=i.filters)==null?void 0:R.start_date),end_date:n((L=i.filters)==null?void 0:L.end_date),invoice:n((U=i.filters)==null?void 0:U.invoice),cashier_id:n((E=i.filters)==null?void 0:E.cashier_id),customer_id:n((K=i.filters)==null?void 0:K.customer_id),type:n((X=i.filters)==null?void 0:X.type)}),w=v(()=>i.cashiers.find(e=>n(e.id)===d.value.cashier_id)??null),z=v(()=>i.customers.find(e=>n(e.id)===d.value.customer_id)??null),I=T(w.value),S=T(z.value);$(w,e=>{I.value=e}),$(z,e=>{S.value=e}),$(()=>i.filters,e=>{d.value={...h,start_date:n(e==null?void 0:e.start_date),end_date:n(e==null?void 0:e.end_date),invoice:n(e==null?void 0:e.invoice),cashier_id:n(e==null?void 0:e.cashier_id),customer_id:n(e==null?void 0:e.customer_id),type:n(e==null?void 0:e.type)}});const M=(e,t)=>{d.value[e]=t},Q=e=>{I.value=e,M("cashier_id",e?String(e.id):"")},W=e=>{S.value=e,M("customer_id",e?String(e.id):"")},Y=()=>{H.get(O("reports.sales.index"),d.value,{preserveScroll:!0,preserveState:!0}),_.value=!1},F=()=>{d.value=h,I.value=null,S.value=null,H.get(O("reports.sales.index"),h,{preserveScroll:!0,preserveState:!0,replace:!0})},j=v(()=>{var e;return((e=i.transactions)==null?void 0:e.data)??[]}),P=v(()=>{var e;return((e=i.transactions)==null?void 0:e.links)??[]}),tt=v(()=>{var e;return((e=i.transactions)==null?void 0:e.current_page)??1}),et=v(()=>{var e,t;return(e=i.transactions)!=null&&e.per_page?Number((t=i.transactions)==null?void 0:t.per_page):j.value.length||1}),V=v(()=>d.value.invoice||d.value.start_date||d.value.end_date||d.value.cashier_id||d.value.customer_id||d.value.type),x=v(()=>{var e,t,s,C,b,Z;return{orders_count:((e=i.summary)==null?void 0:e.orders_count)??0,revenue_total:((t=i.summary)==null?void 0:t.revenue_total)??0,discount_total:((s=i.summary)==null?void 0:s.discount_total)??0,items_sold:((C=i.summary)==null?void 0:C.items_sold)??0,profit_total:((b=i.summary)==null?void 0:b.profit_total)??0,average_order:((Z=i.summary)==null?void 0:Z.average_order)??0}}),g=(e=0)=>{const t=Number(e)||0;return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)},at=v(()=>[{title:"Pendapatan Bersih",value:g(x.value.revenue_total),description:"Total setelah diskon",icon:mt,gradient:"from-primary-500 to-primary-700"},{title:"Total Profit",value:g(x.value.profit_total),description:`Rata-rata ${g(x.value.average_order)}`,icon:it,gradient:"from-success-500 to-success-700"},{title:"Item Terjual",value:x.value.items_sold.toLocaleString("id-ID"),description:`${x.value.orders_count} transaksi`,icon:ft,gradient:"from-accent-500 to-accent-700"},{title:"Diskon Diberikan",value:g(x.value.discount_total),description:"Akumulasi promo",icon:kt,gradient:"from-warning-500 to-warning-600"}]),O=(e,t)=>typeof window<"u"&&window.route?window.route(e,t):"#";return(e,t)=>(u(),A(ut,null,{default:l(()=>[r(k(st),{title:"Laporan Penjualan"}),a("div",_t,[a("div",yt,[a("div",null,[a("h1",ht,[r(k(vt),{size:28,class:"text-primary-500"}),t[5]||(t[5]=o(" Laporan Penjualan ",-1))]),t[6]||(t[6]=a("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Analisis dan ringkasan penjualan ",-1))]),a("button",{onClick:t[0]||(t[0]=s=>_.value=!_.value),class:rt(["inline-flex items-center gap-2 px-4 py-2.5 rounded-xl border text-sm font-medium transition-colors",_.value||V.value?"bg-primary-50 border-primary-200 text-primary-700 dark:bg-primary-950/50 dark:border-primary-800 dark:text-primary-400":"bg-white border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"])},[r(k(nt),{size:18}),t[7]||(t[7]=a("span",null,"Filter",-1)),V.value?(u(),m("span",It)):y("",!0)],2)]),a("div",St,[(u(!0),m(G,null,q(at.value,s=>(u(),A(xt,{key:s.title,title:s.title,value:s.value,description:s.description,icon:s.icon,gradient:s.gradient},null,8,["title","value","description","icon","gradient"]))),128))]),_.value?(u(),m("div",Ct,[a("form",{onSubmit:lt(Y,["prevent"])},[a("div",Tt,[a("div",null,[t[8]||(t[8]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Tanggal Mulai ",-1)),D(a("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>d.value.start_date=s),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[B,d.value.start_date]])]),a("div",null,[t[9]||(t[9]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Tanggal Akhir ",-1)),D(a("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>d.value.end_date=s),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[B,d.value.end_date]])]),a("div",null,[t[10]||(t[10]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Invoice ",-1)),D(a("input",{type:"text",placeholder:"TRX-...","onUpdate:modelValue":t[3]||(t[3]=s=>d.value.invoice=s),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 placeholder-slate-400 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all"},null,512),[[B,d.value.invoice]])]),r(J,{label:"Kasir",data:N.cashiers,selected:I.value,"set-selected":Q,placeholder:"Semua kasir",searchable:!0},null,8,["data","selected"]),r(J,{label:"Pelanggan",data:N.customers,selected:S.value,"set-selected":W,placeholder:"Semua pelanggan",searchable:!0},null,8,["data","selected"]),a("div",null,[t[12]||(t[12]=a("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Tipe Produk ",-1)),D(a("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>d.value.type=s),class:"w-full h-11 px-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all text-sm font-medium"},[...t[11]||(t[11]=[a("option",{value:""},"Semua",-1),a("option",{value:"product"},"Eceran",-1),a("option",{value:"bundle"},"Bundling",-1)])],512),[[ot,d.value.type]])])]),a("div",Dt,[V.value?(u(),m("button",{key:0,type:"button",onClick:F,class:"px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"},[r(k(gt),{size:18})])):y("",!0),a("button",Nt,[r(k(pt),{size:18}),t[13]||(t[13]=o(" Terapkan ",-1))])])],32)])):y("",!0),j.value.length>0?(u(),m("div",jt,[a("div",Pt,[a("table",Vt,[a("thead",null,[a("tr",$t,[r(p,null,{default:l(()=>[...t[14]||(t[14]=[o("No",-1)])]),_:1}),r(p,null,{default:l(()=>[...t[15]||(t[15]=[o("Invoice",-1)])]),_:1}),r(p,null,{default:l(()=>[...t[16]||(t[16]=[o("Tanggal",-1)])]),_:1}),r(p,null,{default:l(()=>[...t[17]||(t[17]=[o("Pelanggan",-1)])]),_:1}),r(p,null,{default:l(()=>[...t[18]||(t[18]=[o("Kasir",-1)])]),_:1}),r(p,{class:"text-center"},{default:l(()=>[...t[19]||(t[19]=[o("Item",-1)])]),_:1}),r(p,{class:"text-right"},{default:l(()=>[...t[20]||(t[20]=[o("Subtotal",-1)])]),_:1}),r(p,{class:"text-right"},{default:l(()=>[...t[21]||(t[21]=[o("Diskon",-1)])]),_:1}),r(p,{class:"text-right"},{default:l(()=>[...t[22]||(t[22]=[o("Total",-1)])]),_:1}),r(p,{class:"text-right"},{default:l(()=>[...t[23]||(t[23]=[o("Profit",-1)])]),_:1})])]),a("tbody",At,[(u(!0),m(G,null,q(j.value,(s,C)=>(u(),m("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[r(f,{class:"text-sm text-slate-600 dark:text-slate-400"},{default:l(()=>[o(c(C+1+(tt.value-1)*et.value),1)]),_:2},1024),r(f,{class:"text-sm font-semibold text-slate-900 dark:text-white"},{default:l(()=>[o(c(s.invoice),1)]),_:2},1024),r(f,{class:"text-sm text-slate-600 dark:text-slate-400"},{default:l(()=>[o(c(s.created_at),1)]),_:2},1024),r(f,{class:"text-sm text-slate-600 dark:text-slate-400"},{default:l(()=>{var b;return[o(c(((b=s.customer)==null?void 0:b.name)??"-"),1)]}),_:2},1024),r(f,{class:"text-sm text-slate-600 dark:text-slate-400"},{default:l(()=>{var b;return[o(c(((b=s.cashier)==null?void 0:b.name)??"-"),1)]}),_:2},1024),r(f,{class:"text-center"},{default:l(()=>[a("span",Bt,c(s.total_items??0),1)]),_:2},1024),r(f,{class:"text-right text-sm text-slate-600 dark:text-slate-400"},{default:l(()=>[o(c(g(Number(s.grand_total||0)+Number(s.discount||0))),1)]),_:2},1024),r(f,{class:"text-right text-sm text-danger-600 dark:text-danger-400"},{default:l(()=>[Number(s.discount||0)>0?(u(),m("span",wt,[o(" -"+c(g(Number(s.discount||0)))+" ",1),s.discount_type==="percent"&&s.discount_percent?(u(),m("span",zt," ("+c(s.discount_percent)+"%) ",1)):y("",!0)])):(u(),m("span",Mt,"-"))]),_:2},1024),r(f,{class:"text-right text-sm font-semibold text-slate-900 dark:text-white"},{default:l(()=>[o(c(g(Number(s.grand_total||0))),1)]),_:2},1024),r(f,{class:"text-right text-sm font-semibold text-success-600 dark:text-success-400"},{default:l(()=>[o(c(g(Number(s.total_profit||0))),1)]),_:2},1024)]))),128))])])])])):(u(),m("div",Ot,[a("div",Rt,[r(k(dt),{size:32,class:"text-slate-400"})]),t[24]||(t[24]=a("h3",{class:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-1"}," Tidak Ada Data ",-1)),t[25]||(t[25]=a("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Tidak ada transaksi sesuai filter. ",-1))])),P.value&&P.value.length>3?(u(),A(bt,{key:3,links:P.value},null,8,["links"])):y("",!0)])]),_:1}))}};export{ie as default};
