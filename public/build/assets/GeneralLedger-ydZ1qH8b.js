import{r as N,A as c,a as o,c as O,w as V,b as u,u as m,Z as C,d as t,k as p,x as P,g as r,p as _,t as l,F as v,v as w,h as B,O as K}from"./app-CIYeQ-4j.js";import{I as L}from"./IconBook-Coshvfeg.js";import{I as R}from"./IconSearch-_c1o4uNe.js";import{_ as U}from"./DashboardLayout-CDE7-Y8V.js";import{_ as E}from"./Button-CxuUSqWK.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";const M={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4 mb-6"},$={class:"flex flex-col sm:flex-row gap-4 items-end"},q={class:"flex-1"},z=["value"],G={key:0,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},Z={class:"bg-primary-500 px-6 py-4"},H={class:"text-lg font-bold text-white"},J={class:"text-sm text-primary-100"},Q={class:"overflow-x-auto"},W={class:"w-full"},X={class:"bg-slate-100 dark:bg-slate-800/50"},Y={class:"px-4 py-3 text-right font-mono font-semibold text-slate-900 dark:text-white"},tt={class:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400"},et={class:"px-4 py-3 text-sm font-mono text-primary-600"},st={class:"px-4 py-3 text-sm text-slate-700 dark:text-slate-300"},at={class:"px-4 py-3 text-right font-mono text-sm"},lt={key:0,class:"text-green-600"},ot={key:1,class:"text-slate-400"},rt={class:"px-4 py-3 text-right font-mono text-sm"},dt={key:0,class:"text-red-600"},nt={key:1,class:"text-slate-400"},it={class:"px-4 py-3 text-right font-mono text-sm font-semibold text-slate-900 dark:text-white"},xt={key:0},ct={key:0,class:"bg-slate-100 dark:bg-slate-800"},ut={class:"px-4 py-3 text-right font-mono font-bold text-green-700"},mt={class:"px-4 py-3 text-right font-mono font-bold text-red-700"},pt={class:"px-4 py-3 text-right font-mono font-bold text-slate-900 dark:text-white"},bt={key:1,class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-12 text-center"},St={__name:"GeneralLedger",props:{accounts:Array,selectedAccount:Object,entries:Array,openingBalance:Number,filters:Object},setup(d){var b,k,f;const n=d,i=N({account_id:((b=n.filters)==null?void 0:b.account_id)||"",start_date:((k=n.filters)==null?void 0:k.start_date)||new Date().toISOString().slice(0,7)+"-01",end_date:((f=n.filters)==null?void 0:f.end_date)||new Date().toISOString().slice(0,10)}),D=()=>{K.get(T("reports.general-ledger"),i.value,{preserveState:!0})},A=c(()=>{var a;return((a=n.entries)==null?void 0:a.reduce((e,s)=>e+parseFloat(s.debit||0),0))||0}),S=c(()=>{var a;return((a=n.entries)==null?void 0:a.reduce((e,s)=>e+parseFloat(s.credit||0),0))||0}),I=c(()=>{var a;return((a=n.entries)==null?void 0:a.length)>0?n.entries[n.entries.length-1].balance:n.openingBalance}),F=a=>a?new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",x=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a||0),j=a=>({asset:"Aset",liability:"Kewajiban",equity:"Ekuitas",revenue:"Pendapatan",expense:"Beban"})[a]||a,T=(a,e)=>typeof window<"u"&&window.route?window.route(a,e):"#";return(a,e)=>(o(),O(U,null,{default:V(()=>[u(m(C),{title:"Buku Besar"}),e[12]||(e[12]=t("div",{class:"mb-6"},[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Buku Besar"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Riwayat transaksi per akun ")])])],-1)),t("div",M,[t("div",$,[t("div",q,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Pilih Akun",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.account_id=s),class:"w-full px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200"},[e[3]||(e[3]=t("option",{value:""},"-- Pilih Akun --",-1)),(o(!0),r(v,null,_(d.accounts,s=>(o(),r("option",{key:s.id,value:s.id},l(s.code)+" - "+l(s.name),9,z))),128))],512),[[P,i.value.account_id]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Dari Tanggal",-1)),p(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>i.value.start_date=s),class:"px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200"},null,512),[[w,i.value.start_date]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Sampai Tanggal",-1)),p(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>i.value.end_date=s),class:"px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200"},null,512),[[w,i.value.end_date]])]),u(E,{type:"button",onClick:D,icon:m(R),label:"Tampilkan",class:"bg-primary-500 hover:bg-primary-600 text-white"},null,8,["icon"])])]),d.selectedAccount?(o(),r("div",G,[t("div",Z,[t("h3",H,l(d.selectedAccount.code)+" - "+l(d.selectedAccount.name),1),t("p",J,l(j(d.selectedAccount.type)),1)]),t("div",Q,[t("table",W,[e[10]||(e[10]=t("thead",{class:"bg-slate-50 dark:bg-slate-800"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-300"},"Tanggal"),t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-300"},"Referensi"),t("th",{class:"px-4 py-3 text-left text-xs font-semibold text-slate-600 dark:text-slate-300"},"Keterangan"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-300"},"Debit"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-300"},"Kredit"),t("th",{class:"px-4 py-3 text-right text-xs font-semibold text-slate-600 dark:text-slate-300"},"Saldo")])],-1)),t("tbody",null,[t("tr",X,[e[7]||(e[7]=t("td",{colspan:"5",class:"px-4 py-3 text-sm font-semibold text-slate-700 dark:text-slate-300"}," Saldo Awal ",-1)),t("td",Y,l(x(d.openingBalance)),1)]),(o(!0),r(v,null,_(d.entries,s=>{var g,h,y;return o(),r("tr",{key:s.id,class:"border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/30"},[t("td",tt,l(F((g=s.journal)==null?void 0:g.date)),1),t("td",et,l((h=s.journal)==null?void 0:h.reference),1),t("td",st,l(s.description||((y=s.journal)==null?void 0:y.description)||"-"),1),t("td",at,[s.debit>0?(o(),r("span",lt,l(x(s.debit)),1)):(o(),r("span",ot,"-"))]),t("td",rt,[s.credit>0?(o(),r("span",dt,l(x(s.credit)),1)):(o(),r("span",nt,"-"))]),t("td",it,l(x(s.balance)),1)])}),128)),d.entries.length===0?(o(),r("tr",xt,[...e[8]||(e[8]=[t("td",{colspan:"6",class:"px-4 py-8 text-center text-slate-500"}," Tidak ada transaksi pada periode ini ",-1)])])):B("",!0)]),d.entries.length>0?(o(),r("tfoot",ct,[t("tr",null,[e[9]||(e[9]=t("td",{colspan:"3",class:"px-4 py-3 text-sm font-bold text-slate-700 dark:text-slate-300"}," Saldo Akhir ",-1)),t("td",ut,l(x(A.value)),1),t("td",mt,l(x(S.value)),1),t("td",pt,l(x(I.value)),1)])])):B("",!0)])])])):(o(),r("div",bt,[u(m(L),{size:48,class:"mx-auto text-slate-300 dark:text-slate-600 mb-4"}),e[11]||(e[11]=t("p",{class:"text-slate-500"},"Pilih akun untuk melihat buku besar",-1))]))]),_:1}))}};export{St as default};
