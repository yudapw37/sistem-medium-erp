import{T as q,r as k,a as l,c as N,w as U,b as i,u as a,Z as z,d as t,k as x,v as m,n as h,e as y,t as d,g as n,F as _,p as C,h as P,O as A,J as K}from"./app-CIYeQ-4j.js";import{I as D}from"./IconArrowLeft-D_cLVqwd.js";import{I as G}from"./IconTrash-CUcDdroG.js";import{_ as M}from"./DashboardLayout-CDE7-Y8V.js";import{_ as g}from"./Button-CxuUSqWK.js";import{_ as O}from"./InputSelect-CCGvz5pc.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconSun-B2kMHmLk.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";import"./IconCircleFilled-CJHeZp2T.js";const F={class:"mb-6"},L={class:"flex items-center justify-between"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},W={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},j={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},E={class:"flex gap-2"},J={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},R={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-4"},Z={class:"text-sm space-y-1"},H={class:"text-slate-600 dark:text-slate-400"},X={class:"text-slate-600 dark:text-slate-400"},Y={class:"font-bold text-slate-900 dark:text-white"},tt={class:"flex flex-row gap-6"},et={style:{width:"75%"}},st={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6"},at={class:"mb-4"},rt={class:"relative"},ot={key:0,class:"absolute w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto"},lt=["onClick"],dt={class:"font-medium text-slate-900 dark:text-white"},it={class:"text-xs text-slate-500"},nt={class:"overflow-x-auto"},bt={class:"w-full"},ut={class:"divide-y divide-slate-100 dark:divide-slate-700"},ct={key:0},pt={class:"py-3 pl-2 text-slate-600 dark:text-slate-400"},xt={class:"py-3"},mt={class:"flex flex-col"},kt={class:"font-medium text-slate-900 dark:text-white text-sm"},ht={class:"text-xs text-slate-500"},gt={class:"py-3 text-center"},ft=["onUpdate:modelValue"],wt={class:"py-3 text-center"},vt=["onClick"],yt={style:{width:"25%"}},_t={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 h-full flex flex-col"},Ct={class:"flex-1 mb-4"},Pt={class:"space-y-3"},Gt={__name:"Create",props:{warehouses:Array},setup(T){const s=q({type:"in",warehouse_id:"",date:new Date().toISOString().split("T")[0],notes:"",items:[]}),f=k(null),b=k(""),u=k([]);let w=null;const B=o=>{f.value=o,s.warehouse_id=o?o.id:""},S=()=>{if(clearTimeout(w),b.value.length<2){u.value=[];return}w=setTimeout(async()=>{try{const o=await K.post(c("stock-penyesuaian.searchProduct"),{q:b.value});u.value=o.data}catch(o){console.error(o)}},300)},V=o=>{const e=s.items.find(r=>r.product_id===o.id);e?e.qty+=1:s.items.push({product_id:o.id,title:o.title,barcode:o.barcode,qty:1}),b.value="",u.value=[]},I=o=>{s.items.splice(o,1)},$=()=>{s.post(c("stock-penyesuaian.store"))},c=(o,e)=>typeof window<"u"&&window.route?window.route(o,e):"#";return(o,e)=>(l(),N(M,null,{default:U(()=>[i(a(z),{title:"Stock Penyesuaian Baru"}),t("div",F,[t("div",L,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Stock Penyesuaian Baru"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Buat penyesuaian stok (stok awal, koreksi selisih) ")],-1)),i(g,{type:"link",icon:a(D),class:"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",label:"Kembali",href:c("stock-penyesuaian.index")},null,8,["icon","href"])])]),t("div",Q,[t("div",W,[e[7]||(e[7]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Tanggal",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=r=>a(s).date=r),class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[m,a(s).date]])]),t("div",j,[e[8]||(e[8]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Tipe Penyesuaian",-1)),t("div",E,[t("button",{onClick:e[1]||(e[1]=r=>a(s).type="in"),class:h(["flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-colors",a(s).type==="in"?"bg-green-500 text-white":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Masuk ",2),t("button",{onClick:e[2]||(e[2]=r=>a(s).type="out"),class:h(["flex-1 px-4 py-2 rounded-lg font-medium text-sm transition-colors",a(s).type==="out"?"bg-red-500 text-white":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"])}," Keluar ",2)])]),t("div",J,[e[9]||(e[9]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Gudang",-1)),i(O,{label:"Pilih Gudang",data:T.warehouses,selected:f.value,"set-selected":B,placeholder:"Pilih Gudang...",searchable:!0,errors:a(s).errors.warehouse_id},null,8,["data","selected","errors"])]),t("div",R,[e[12]||(e[12]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3 text-sm"},"Informasi",-1)),t("div",Z,[t("p",H,[e[10]||(e[10]=y(" Tipe: ",-1)),t("span",{class:h(a(s).type==="in"?"text-green-600 font-bold":"text-red-600 font-bold")},d(a(s).type==="in"?"Stok Masuk":"Stok Keluar"),3)]),t("p",X,[e[11]||(e[11]=y(" Total Item: ",-1)),t("span",Y,d(a(s).items.length),1)])])])]),t("div",tt,[t("div",et,[t("div",st,[t("div",at,[e[13]||(e[13]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-3"},"Cari Produk",-1)),t("div",rt,[x(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=r=>b.value=r),onInput:S,placeholder:"Ketik nama atau barcode produk...",class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,544),[[m,b.value]]),u.value.length>0?(l(),n("div",ot,[(l(!0),n(_,null,C(u.value,r=>(l(),n("div",{key:r.id,onClick:p=>V(r),class:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-100 dark:border-slate-700 last:border-b-0"},[t("div",dt,d(r.title),1),t("div",it,d(r.barcode),1)],8,lt))),128))])):P("",!0)])]),t("div",nt,[t("table",bt,[e[15]||(e[15]=t("thead",null,[t("tr",{class:"border-b border-slate-100 dark:border-slate-700 text-left text-sm text-slate-500"},[t("th",{class:"pb-3 pl-2 w-12"},"No"),t("th",{class:"pb-3"},"Produk"),t("th",{class:"pb-3 text-center w-32"},"Qty"),t("th",{class:"pb-3 text-center w-24"},"Aksi")])],-1)),t("tbody",ut,[a(s).items.length===0?(l(),n("tr",ct,[...e[14]||(e[14]=[t("td",{colspan:"4",class:"py-8 text-center text-slate-500 italic text-sm"}," Belum ada produk. Cari dan tambahkan produk di atas. ",-1)])])):P("",!0),(l(!0),n(_,null,C(a(s).items,(r,p)=>(l(),n("tr",{key:p,class:"group hover:bg-slate-50 dark:hover:bg-slate-800/50"},[t("td",pt,d(p+1),1),t("td",xt,[t("div",mt,[t("span",kt,d(r.title),1),t("span",ht,d(r.barcode),1)])]),t("td",gt,[x(t("input",{type:"number","onUpdate:modelValue":v=>r.qty=v,min:"1",class:"w-24 px-2 py-1 text-center text-sm rounded-lg border border-slate-200 bg-slate-50 focus:border-primary-500 focus:ring-0 dark:bg-slate-800 dark:border-slate-700 dark:text-white"},null,8,ft),[[m,r.qty,void 0,{number:!0}]])]),t("td",wt,[t("button",{onClick:v=>I(p),class:"p-1.5 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors"},[i(a(G),{size:18})],8,vt)])]))),128))])])])])]),t("div",yt,[t("div",_t,[e[17]||(e[17]=t("h3",{class:"font-semibold text-slate-900 dark:text-white mb-4"},"Catatan & Aksi",-1)),t("div",Ct,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"}," Catatan ",-1)),x(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=r=>a(s).notes=r),rows:"10",placeholder:"Catatan penyesuaian stok...",class:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"},null,512),[[m,a(s).notes]])]),t("div",Pt,[i(g,{type:"submit",label:"Simpan Penyesuaian",class:"w-full bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/30",processing:a(s).processing,disabled:a(s).items.length===0||!a(s).warehouse_id,onClick:$},null,8,["processing","disabled"]),i(g,{type:"button",label:"Batal",class:"w-full bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",onClick:e[5]||(e[5]=r=>a(A).visit(c("stock-penyesuaian.index")))})])])])])]),_:1}))}};export{Gt as default};
