import{T as N,a as m,c as V,w as r,b as a,u as l,Z as $,d as e,t as i,n as j,g as b,e as d,k as y,v as c,x as B,F as _,p as h,h as T,f as A}from"./app-CIYeQ-4j.js";import{I as P}from"./IconArrowLeft-D_cLVqwd.js";import{c as R}from"./IconSun-B2kMHmLk.js";import{f as U,_ as F}from"./DashboardLayout-CDE7-Y8V.js";import{_ as I}from"./Button-CxuUSqWK.js";import{_ as L}from"./Table-W38pwiux.js";import{_ as O}from"./TableCard-DWxSJUUQ.js";import{_ as q,a as H}from"./TableTbody-B6-z0LtQ.js";import{_ as f,a as p}from"./TableTh-C_S67pHj.js";import"./createVueComponent-Cyzcg1Tn.js";import"./IconUsers-lhp4zDA0.js";import"./IconFileInvoice-CDLMKT3Q.js";import"./IconReceipt-CzHzcLcH.js";import"./IconShoppingCart-C-7we8qa.js";const z={class:"mb-6"},J={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},E={class:"text-sm text-slate-500 dark:text-slate-400"},K={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Z={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},G={class:"p-6 space-y-3"},Q={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},W={class:"font-semibold text-slate-900 dark:text-white"},X={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},Y={class:"text-slate-900 dark:text-white"},tt={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},et={class:"font-mono font-bold text-slate-900 dark:text-white"},st={class:"flex justify-between py-2 border-b border-slate-100 dark:border-slate-800"},at={class:"font-mono text-green-600"},lt={class:"flex justify-between py-2"},rt={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},nt={class:"p-6"},ot={class:"space-y-4"},dt={class:"grid grid-cols-2 gap-4"},it=["value"],ut={class:"relative"},mt=["value"],bt={class:"text-xs text-slate-500 mt-1"},pt={key:0,class:"grid grid-cols-2 gap-4"},ft={key:1,class:"text-center py-8"},xt={class:"mt-6"},gt={key:1},$t={__name:"Show",props:{purchase:Object,payments:Array,paidAmount:Number,remaining:Number,paymentMethods:Object},setup(o){const D=o,n=N({payment_date:new Date().toISOString().slice(0,10),amount:"",payment_method:"",bank_name:"",bank_account:"",notes:""}),S=u=>u?u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"",C=u=>u.replace(/\./g,"").replace(/[^0-9]/g,""),M=()=>{n.post(w("payables.payment",D.purchase.id))},k=u=>u?new Date(u).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}):"-",x=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u||0),w=(u,t)=>typeof window<"u"&&window.route?window.route(u,t):"#";return(u,t)=>(m(),V(F,null,{default:r(()=>{var v;return[a(l($),{title:`Hutang - ${o.purchase.invoice}`},null,8,["title"]),e("div",z,[e("div",J,[e("div",null,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Detail Hutang",-1)),e("p",E," Invoice: "+i(o.purchase.invoice),1)]),a(I,{type:"link",icon:l(P),class:"bg-white border border-slate-200 text-slate-700",label:"Kembali",href:w("payables.index")},null,8,["icon","href"])])]),e("div",K,[e("div",Z,[t[12]||(t[12]=e("div",{class:"bg-primary-500 px-6 py-4"},[e("h3",{class:"text-lg font-bold text-white"},"Informasi Pembelian")],-1)),e("div",G,[e("div",Q,[t[7]||(t[7]=e("span",{class:"text-slate-500"},"Supplier",-1)),e("span",W,i((v=o.purchase.supplier)==null?void 0:v.name),1)]),e("div",X,[t[8]||(t[8]=e("span",{class:"text-slate-500"},"Tanggal",-1)),e("span",Y,i(k(o.purchase.created_at)),1)]),e("div",tt,[t[9]||(t[9]=e("span",{class:"text-slate-500"},"Total",-1)),e("span",et,i(x(o.purchase.grand_total)),1)]),e("div",st,[t[10]||(t[10]=e("span",{class:"text-slate-500"},"Dibayar",-1)),e("span",at,i(x(o.paidAmount)),1)]),e("div",lt,[t[11]||(t[11]=e("span",{class:"text-slate-500 font-bold"},"Sisa",-1)),e("span",{class:j(["font-mono text-xl font-bold",o.remaining>0?"text-red-600":"text-green-600"])},i(x(o.remaining)),3)])])]),e("div",rt,[t[22]||(t[22]=e("div",{class:"bg-green-500 px-6 py-4"},[e("h3",{class:"text-lg font-bold text-white"},"Catat Pembayaran")],-1)),e("div",nt,[o.remaining>0?(m(),b("form",{key:0,onSubmit:A(M,["prevent"])},[e("div",ot,[e("div",dt,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Tanggal "),e("span",{class:"text-red-500"},"*")],-1)),y(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>l(n).payment_date=s),required:"",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(n).payment_date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Metode "),e("span",{class:"text-red-500"},"*")],-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(n).payment_method=s),required:"",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},[t[14]||(t[14]=e("option",{value:""},"-- Pilih --",-1)),(m(!0),b(_,null,h(o.paymentMethods,(s,g)=>(m(),b("option",{key:g,value:g},i(s),9,it))),128))],512),[[B,l(n).payment_method]])])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},[d(" Jumlah Bayar "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ut,[t[16]||(t[16]=e("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"},"Rp",-1)),e("input",{type:"text",value:S(l(n).amount),onInput:t[2]||(t[2]=s=>l(n).amount=C(s.target.value)),required:"",class:"w-full pl-12 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-right font-mono text-lg",placeholder:"0"},null,40,mt)]),e("p",bt,"Maksimal: "+i(x(o.remaining)),1)]),l(n).payment_method==="transfer"||l(n).payment_method==="giro"?(m(),b("div",pt,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Nama Bank",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>l(n).bank_name=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(n).bank_name]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"No. Rekening",-1)),y(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>l(n).bank_account=s),class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(n).bank_account]])])])):T("",!0),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"},"Catatan",-1)),y(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(n).notes=s),rows:"2",class:"w-full px-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900"},null,512),[[c,l(n).notes]])])]),a(I,{type:"submit",icon:l(R),label:"Simpan Pembayaran",class:"bg-green-500 text-white mt-4 w-full",disabled:l(n).processing},null,8,["icon","disabled"])],32)):(m(),b("div",ft,[a(l(U),{size:48,class:"mx-auto text-green-500 mb-4"}),t[21]||(t[21]=e("p",{class:"text-lg font-bold text-green-600"},"Hutang Lunas",-1))]))])])]),e("div",xt,[a(O,{title:"Riwayat Pembayaran"},{default:r(()=>[a(L,null,{default:r(()=>[a(q,null,{default:r(()=>[e("tr",null,[a(f,null,{default:r(()=>[...t[23]||(t[23]=[d("Referensi",-1)])]),_:1}),a(f,null,{default:r(()=>[...t[24]||(t[24]=[d("Tanggal",-1)])]),_:1}),a(f,null,{default:r(()=>[...t[25]||(t[25]=[d("Metode",-1)])]),_:1}),a(f,{class:"text-right"},{default:r(()=>[...t[26]||(t[26]=[d("Jumlah",-1)])]),_:1}),a(f,null,{default:r(()=>[...t[27]||(t[27]=[d("Catatan",-1)])]),_:1}),a(f,null,{default:r(()=>[...t[28]||(t[28]=[d("Oleh",-1)])]),_:1})])]),_:1}),a(H,null,{default:r(()=>[o.payments.length>0?(m(!0),b(_,{key:0},h(o.payments,s=>(m(),b("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50"},[a(p,{class:"font-mono text-primary-600"},{default:r(()=>[d(i(s.reference),1)]),_:2},1024),a(p,null,{default:r(()=>[d(i(k(s.payment_date)),1)]),_:2},1024),a(p,null,{default:r(()=>[d(i(o.paymentMethods[s.payment_method]||s.payment_method),1)]),_:2},1024),a(p,{class:"text-right font-mono text-green-600 font-bold"},{default:r(()=>[d("+"+i(x(s.amount)),1)]),_:2},1024),a(p,{class:"text-slate-500 max-w-[200px] truncate"},{default:r(()=>[d(i(s.notes||"-"),1)]),_:2},1024),a(p,null,{default:r(()=>{var g;return[d(i((g=s.user)==null?void 0:g.name),1)]}),_:2},1024)]))),128)):(m(),b("tr",gt,[a(p,{colspan:"6",class:"text-center py-8"},{default:r(()=>[...t[29]||(t[29]=[e("p",{class:"text-slate-500"},"Belum ada pembayaran",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1})])]}),_:1}))}};export{$t as default};
