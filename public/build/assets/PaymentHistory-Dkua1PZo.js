import{K as w,O as D,a as n,c as P,w as C,b as g,u as l,Z as I,d as t,k as p,v as u,x as S,g as x,p as y,t as d,F as f,h as V}from"./app-DA0EYa_6.js";import{_ as N}from"./DashboardLayout-DqHF1oae.js";import{_ as B}from"./Pagination-B8BHcZ6z.js";import{l as U}from"./lodash-De9ynbB3.js";import"./createVueComponent-CUBUAVU4.js";import"./IconUsers-CzMPbSiM.js";import"./IconSun-9pmbsCzq.js";import"./IconFileInvoice-DqQY055S.js";import"./IconReceipt-DjQT6mN-.js";import"./IconShoppingCart-qle56F5S.js";import"./IconChevronRight-QKrPJlsB.js";const q={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 p-6 mb-6"},F={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},M=["value"],O={class:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden"},R={class:"overflow-x-auto"},T={class:"w-full text-left border-collapse"},j={class:"divide-y divide-slate-100 dark:divide-slate-800"},L={key:0},A={class:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white"},E={class:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400"},$={class:"px-6 py-4 text-sm"},z={class:"flex flex-col"},H={class:"font-medium text-slate-900 dark:text-white"},K={class:"text-xs text-slate-500"},Z={class:"px-6 py-4 text-sm capitalize text-slate-600 dark:text-slate-400"},G={class:"px-6 py-4 text-sm font-bold text-right text-primary-600 dark:text-primary-400"},J={class:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400"},Q={class:"px-6 py-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-800"},nt={__name:"PaymentHistory",props:{payments:Object,customers:Array,paymentMethods:Array,filters:Object},setup(i){const m=i,a=w({q:m.filters.q||"",customer_id:m.filters.customer_id||"",payment_method:m.filters.payment_method||"",start_date:m.filters.start_date||"",end_date:m.filters.end_date||""}),r=U.debounce(()=>{D.get(_("receivables.payment-history"),a,{preserveState:!0,replace:!0})},300),v=o=>new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),h=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o),_=(o,e)=>window.route(o,e);return(o,e)=>(n(),P(N,null,{default:C(()=>[g(l(I),{title:"Riwayat Pembayaran Piutang"}),e[15]||(e[15]=t("div",{class:"mb-6"},[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900 dark:text-white"},"Riwayat Pembayaran Piutang"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"}," Lihat seluruh transaksi pembayaran piutang dari pelanggan. ")])])],-1)),t("div",q,[t("div",F,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Invoice",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.q=s),type:"text",placeholder:"Cari invoice...",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200",onInput:e[1]||(e[1]=(...s)=>l(r)&&l(r)(...s))},null,544),[[u,a.q]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Pelanggan",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.customer_id=s),class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200",onChange:e[3]||(e[3]=(...s)=>l(r)&&l(r)(...s))},[e[9]||(e[9]=t("option",{value:""},"Semua Pelanggan",-1)),(n(!0),x(f,null,y(i.customers,s=>(n(),x("option",{key:s.id,value:s.id},d(s.name),9,M))),128))],544),[[S,a.customer_id]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Dari Tanggal",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.start_date=s),type:"date",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200",onChange:e[5]||(e[5]=(...s)=>l(r)&&l(r)(...s))},null,544),[[u,a.start_date]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Sampai Tanggal",-1)),p(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.end_date=s),type:"date",class:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-800 dark:text-slate-200",onChange:e[7]||(e[7]=(...s)=>l(r)&&l(r)(...s))},null,544),[[u,a.end_date]])])])]),t("div",O,[t("div",R,[t("table",T,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"bg-slate-50 dark:bg-slate-800/50"},[t("th",{class:"px-6 py-4 text-sm font-semibold text-slate-700 dark:text-slate-300"},"No. Referensi"),t("th",{class:"px-6 py-4 text-sm font-semibold text-slate-700 dark:text-slate-300"},"Tanggal"),t("th",{class:"px-6 py-4 text-sm font-semibold text-slate-700 dark:text-slate-300"},"Invoice Pelanggan"),t("th",{class:"px-6 py-4 text-sm font-semibold text-slate-700 dark:text-slate-300"},"Metode"),t("th",{class:"px-6 py-4 text-sm font-semibold text-right text-slate-700 dark:text-slate-300"},"Nominal"),t("th",{class:"px-6 py-4 text-sm font-semibold text-slate-700 dark:text-slate-300"},"User")])],-1)),t("tbody",j,[i.payments.data.length===0?(n(),x("tr",L,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"px-6 py-8 text-center text-slate-500 italic"}," Belum ada data pembayaran. ",-1)])])):V("",!0),(n(!0),x(f,null,y(i.payments.data,s=>{var b,c,k;return n(),x("tr",{key:s.id,class:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[t("td",A,d(s.reference),1),t("td",E,d(v(s.payment_date)),1),t("td",$,[t("div",z,[t("span",H,d((b=s.sale)==null?void 0:b.invoice),1),t("span",K,d((c=s.customer)==null?void 0:c.name),1)])]),t("td",Z,d(s.payment_method),1),t("td",G,d(h(s.amount)),1),t("td",J,d((k=s.user)==null?void 0:k.name),1)])}),128))])])]),t("div",Q,[g(B,{links:i.payments.links},null,8,["links"])])])]),_:1}))}};export{nt as default};
